<html><!-- Online page at https://angular.io/guide/testing-components-scenarios --><head><meta charset="utf-8"><title>Component testing scenarios</title><link rel="stylesheet" href="../css_1.css" type="text/css"><link rel="stylesheet" href="../css_2.css" type="text/css"><link rel="stylesheet" href="../css_3.css" type="text/css"><link rel="stylesheet" href="../css_4.css" type="text/css"><link rel="stylesheet" href="../css_5.css" type="text/css"><link rel="stylesheet" href="../css_6.css" type="text/css"><link rel="stylesheet" href="../css_7.css" type="text/css"><link rel="stylesheet" href="../css_8.css" type="text/css"><link rel="stylesheet" href="../css_9.css" type="text/css"><link rel="stylesheet" href="../css_11.css" type="text/css"><link rel="stylesheet" href="../css_12.css" type="text/css"><link rel="stylesheet" href="../css_13.css" type="text/css"><link rel="stylesheet" href="../css_14.css" type="text/css"><script type="text/javascript" src="../js_1.js"></script><script type="text/javascript" src="../js_2.js"></script><script type="text/javascript" src="../js_3.js"></script><script type="text/javascript" src="../js_4.js"></script><script type="text/javascript" src="../js_5.js"></script><script type="text/javascript" src="../js_6.js"></script><script type="text/javascript" src="../js_7.js"></script></head><body>

  <aio-shell ng-version="13.2.2" class="aio-notification-hide folder-guide mode-stable page-guide-testing-components-scenarios sidenav-closed view-SideNav"><div id="top-of-page"></div><aio-cookies-popup><div class="cookies-popup no-print ng-star-inserted"><h2 class="visually-hidden">Cookies concent notice</h2> This site uses cookies from Google to deliver its services and to analyze traffic. <div class="actions"><a mat-button="" href="https://policies.google.com/technologies/cookies" target="_blank" rel="noopener" class="mat-focus-indicator mat-button mat-button-base" tabindex="0" aria-disabled="false"><span class="mat-button-wrapper"> Learn more </span><span matripple="" class="mat-ripple mat-button-ripple"></span><span class="mat-button-focus-overlay"></span></a><button mat-button="" class="mat-focus-indicator mat-button mat-button-base"><span class="mat-button-wrapper"> OK, got it </span><span matripple="" class="mat-ripple mat-button-ripple"></span><span class="mat-button-focus-overlay"></span></button></div></div><!----></aio-cookies-popup><a href="#main-content" class="skip-to-content-link">Skip to main content</a><!----><mat-toolbar color="primary" class="mat-toolbar app-toolbar no-print mat-primary mat-toolbar-multiple-rows"><mat-toolbar-row class="mat-toolbar-row notification-container"><aio-notification notificationid="survey-january-2022" expirationdate="2022-02-01" class="ng-tns-c23-0 ng-trigger ng-trigger-hideAnimation ng-star-inserted" style="display: none; height: 0px;"><span class="content ng-tns-c23-0"><a href="https://stateofjs.com/" class="ng-tns-c23-0"><mat-icon role="img" svgicon="insert_comment" aria-label="Announcement" class="mat-icon notranslate icon mat-icon-no-color" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="insert_comment"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"></path>
  <path d="M0 0h24v24H0z" fill="none"></path>
</svg></mat-icon><span class="message">Share your experience with Angular in <b>The State of JavaScript</b></span><span class="action-button">Go to survey</span></a></span><button mat-icon-button="" aria-label="Close" class="mat-focus-indicator close-button ng-tns-c23-0 mat-icon-button mat-button-base"><span class="mat-button-wrapper"><mat-icon role="img" svgicon="close" aria-label="Dismiss notification" class="mat-icon notranslate mat-icon-no-color" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="close"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
  <path d="M0 0h24v24H0z" fill="none"></path>
</svg></mat-icon></span><span matripple="" class="mat-ripple mat-button-ripple mat-button-ripple-round"></span><span class="mat-button-focus-overlay"></span></button></aio-notification></mat-toolbar-row><mat-toolbar-row class="mat-toolbar-row"><button mat-button="" title="Docs menu" class="mat-focus-indicator hamburger mat-button mat-button-base"><span class="mat-button-wrapper"><mat-icon role="img" svgicon="menu" class="mat-icon notranslate mat-icon-no-color" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="menu"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path>
</svg></mat-icon></span><span matripple="" class="mat-ripple mat-button-ripple"></span><span class="mat-button-focus-overlay"></span></button><a href="../../angular.io.html" class="nav-link home"><!----><img src="../assets/images/logos/angular/shield-large.svg" width="37" height="40" title="Home" alt="Home" class="ng-star-inserted"><!----></a><!----><aio-search-box class="search-container"><input type="search" aria-label="search" placeholder="Search"><!----></aio-search-box><aio-theme-toggle><button mat-icon-button="" type="button" class="mat-focus-indicator mat-icon-button mat-button-base" title="Switch to dark mode" aria-label="Switch to dark mode"><span class="mat-button-wrapper"><mat-icon role="img" class="mat-icon notranslate material-icons mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font"> dark_mode </mat-icon></span><span matripple="" class="mat-ripple mat-button-ripple mat-button-ripple-round"></span><span class="mat-button-focus-overlay"></span></button></aio-theme-toggle><div class="toolbar-external-icons-container"><a mat-icon-button="" href="https://twitter.com/angular" title="Twitter" aria-label="Angular on twitter" class="mat-focus-indicator mat-icon-button mat-button-base" tabindex="0" aria-disabled="false"><span class="mat-button-wrapper"><mat-icon role="img" svgicon="logos:twitter" class="mat-icon notranslate mat-icon-no-color" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="twitter" data-mat-icon-namespace="logos"><svg focusable="false" viewBox="0 0 50 59" xmlns="http://www.w3.org/2000/svg">
  <path d="M50,9.3c-1.8,0.8-3.8,1.4-5.9,1.6c2.1-1.3,3.7-3.3,4.5-5.7c-2,1.2-4.2,2-6.5,2.5c-1.9-2-4.5-3.2-7.5-3.2
           c-5.7,0-10.3,4.6-10.3,10.3c0,0.8,0.1,1.6,0.3,2.3C16.1,16.7,8.5,12.6,3.5,6.4c-0.9,1.5-1.4,3.3-1.4,5.2c0,3.6,1.8,6.7,4.6,8.5
           C5,20,3.4,19.6,2,18.8c0,0,0,0.1,0,0.1c0,5,3.5,9.1,8.2,10.1c-0.9,0.2-1.8,0.4-2.7,0.4c-0.7,0-1.3-0.1-1.9-0.2
           c1.3,4.1,5.1,7,9.6,7.1c-3.5,2.8-7.9,4.4-12.7,4.4c-0.8,0-1.6,0-2.4-0.1c4.5,2.9,9.9,4.6,15.7,4.6c18.9,0,29.2-15.6,29.2-29.2
           c0-0.4,0-0.9,0-1.3C46.9,13.2,48.6,11.4,50,9.3z"></path>
</svg></mat-icon></span><span matripple="" class="mat-ripple mat-button-ripple mat-button-ripple-round"></span><span class="mat-button-focus-overlay"></span></a><a mat-icon-button="" href="https://github.com/angular/angular" title="GitHub" aria-label="Angular on github" class="mat-focus-indicator mat-icon-button mat-button-base" tabindex="0" aria-disabled="false"><span class="mat-button-wrapper"><mat-icon role="img" svgicon="logos:github" class="mat-icon notranslate mat-icon-no-color" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="github" data-mat-icon-namespace="logos"><svg focusable="false" viewBox="0 0 51.8 50.4" xmlns="http://www.w3.org/2000/svg">
  <path d="M25.9,0.2C11.8,0.2,0.3,11.7,0.3,25.8c0,11.3,7.3,20.9,17.5,24.3c1.3,0.2,1.7-0.6,1.7-1.2c0-0.6,0-2.6,0-4.8
           c-7.1,1.5-8.6-3-8.6-3c-1.2-3-2.8-3.7-2.8-3.7c-2.3-1.6,0.2-1.6,0.2-1.6c2.6,0.2,3.9,2.6,3.9,2.6c2.3,3.9,6,2.8,7.5,2.1
           c0.2-1.7,0.9-2.8,1.6-3.4c-5.7-0.6-11.7-2.8-11.7-12.7c0-2.8,1-5.1,2.6-6.9c-0.3-0.7-1.1-3.3,0.3-6.8c0,0,2.1-0.7,7,2.6
           c2-0.6,4.2-0.9,6.4-0.9c2.2,0,4.4,0.3,6.4,0.9c4.9-3.3,7-2.6,7-2.6c1.4,3.5,0.5,6.1,0.3,6.8c1.6,1.8,2.6,4.1,2.6,6.9
           c0,9.8-6,12-11.7,12.6c0.9,0.8,1.7,2.4,1.7,4.7c0,3.4,0,6.2,0,7c0,0.7,0.5,1.5,1.8,1.2c10.2-3.4,17.5-13,17.5-24.3
           C51.5,11.7,40.1,0.2,25.9,0.2z"></path>
</svg></mat-icon></span><span matripple="" class="mat-ripple mat-button-ripple mat-button-ripple-round"></span><span class="mat-button-focus-overlay"></span></a><a mat-icon-button="" href="https://youtube.com/angular" title="YouTube" aria-label="Angular on YouTube" class="mat-focus-indicator mat-icon-button mat-button-base" tabindex="0" aria-disabled="false"><span class="mat-button-wrapper"><mat-icon role="img" svgicon="logos:youtube" class="mat-icon notranslate mat-icon-no-color" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="youtube" data-mat-icon-namespace="logos"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M21.58 7.19c-.23-.86-.91-1.54-1.77-1.77C18.25 5 12 5 12 5s-6.25 0-7.81.42c-.86.23-1.54.91-1.77 1.77
           C2 8.75 2 12 2 12s0 3.25.42 4.81c.23.86.91 1.54 1.77 1.77C5.75 19 12 19 12 19s6.25 0 7.81-.42
           c.86-.23 1.54-.91 1.77-1.77C22 15.25 22 12 22 12s0-3.25-.42-4.81zM10 15V9l5.2 3-5.2 3z"></path>
</svg></mat-icon></span><span matripple="" class="mat-ripple mat-button-ripple mat-button-ripple-round"></span><span class="mat-button-focus-overlay"></span></a></div></mat-toolbar-row></mat-toolbar><!----><mat-sidenav-container role="main" class="mat-drawer-container mat-sidenav-container sidenav-container"><div class="mat-drawer-backdrop ng-star-inserted"></div><!----><div class="cdk-visually-hidden cdk-focus-trap-anchor" aria-hidden="true"></div><mat-sidenav tabindex="-1" class="mat-drawer mat-sidenav sidenav ng-tns-c19-1 ng-trigger ng-trigger-transform collapsed mat-drawer-over ng-star-inserted" style="box-shadow: none; visibility: hidden;"><div cdkscrollable="" class="mat-drawer-inner-container ng-tns-c19-1"><aio-nav-menu class="ng-star-inserted" style=""><aio-nav-item class="ng-star-inserted"><!----><div class="ng-star-inserted"><!----><button type="button" class="vertical-menu-item heading level-1 collapsed ng-star-inserted" title="About Angular." aria-pressed="false"><span>About Angular</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="keyboard_arrow_right"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path>
</svg></mat-icon></button><!----><div class="heading-children level-1 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed" href="../features.html" title="Features."><span>Features</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed" href="../resources.html" title="Resources."><span>Resources</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed" href="../events.html" title="Events."><span>Events</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed" href="https://blog.angular.io/" title="Blog."><span>Blog</span></a></div><!----><!----></aio-nav-item><!----></div></div><!----></aio-nav-item><!----></aio-nav-menu><!----><aio-nav-menu class="ng-tns-c19-1"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-1 collapsed" href="../docs.html" title="Welcome to the Angular documentation set."><span>Introduction</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><!----><div class="ng-star-inserted"><!----><button type="button" class="vertical-menu-item heading level-1 collapsed ng-star-inserted" title="Set up your environment and learn basic concepts" aria-pressed="false"><span>Getting Started</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="keyboard_arrow_right"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path>
</svg></mat-icon></button><!----><div class="heading-children level-1 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed" href="./what-is-angular.html" title="A brief description of the Angular platform."><span>What is Angular?</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><!----><div class="ng-star-inserted"><!----><button type="button" class="vertical-menu-item heading level-2 collapsed ng-star-inserted" title="Examine and work with a ready-made sample app, with no setup." aria-pressed="false"><span>Try it</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="keyboard_arrow_right"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path>
</svg></mat-icon></button><!----><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../start.html" title="Take a look at Angular's component model, template syntax, and component communication."><span>Getting started</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../start/start-routing.html" title="Navigate among different page views using the browser's URL."><span>Adding navigation</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../start/start-data.html" title="Use services and access external data via HTTP."><span>Managing Data</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../start/start-forms.html" title="Learn about fetching and managing data from users with forms."><span>Using Forms for User Input</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../start/start-deployment.html" title="Move to local development, or deploy your application to Firebase or your own server."><span>Deploying an application</span></a></div><!----><!----></aio-nav-item><!----></div></div><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed" href="./setup-local.html" title="Setting up for local development with the Angular CLI."><span>Setup</span></a></div><!----><!----></aio-nav-item><!----></div></div><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><!----><div class="ng-star-inserted"><!----><button type="button" class="vertical-menu-item heading level-1 collapsed ng-star-inserted" title="Learn the essential concepts to become a proficient Angular developer." aria-pressed="false"><span>Understanding Angular</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="keyboard_arrow_right"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path>
</svg></mat-icon></button><!----><div class="heading-children level-1 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed" href="./understanding-angular-overview.html" title="Learn about the most common parts of an Angular application."><span>Overview</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><!----><div class="ng-star-inserted"><!----><button type="button" class="vertical-menu-item heading level-2 collapsed ng-star-inserted" title="Learn more about how to use data binding to build dynamic views" aria-pressed="false"><span>Components</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="keyboard_arrow_right"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path>
</svg></mat-icon></button><!----><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./component-overview.html" title="Overview of how to create Angular components."><span>Overview</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./lifecycle-hooks.html" title="Angular calls lifecycle hook methods on directives and components as it creates, changes, and destroys them."><span>Component Lifecycle</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./view-encapsulation.html" title="Describes how component CSS styles are encapsulated into a component's view."><span>View Encapsulation</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./component-interaction.html" title="Share information between different directives and components."><span>Component Interaction</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./component-styles.html" title="Add CSS styles that are specific to a component."><span>Component Styles</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./inputs-outputs.html" title="Introductory guide to sharing data between parent and child directives or components."><span>Sharing data between child and parent directives and components</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./content-projection.html" title="Learn how to create reusable components using Angular's content projection feature."><span>Content Projection</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./dynamic-component-loader.html" title="Load components dynamically."><span>Dynamic Components</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./elements.html" title="Convert components to Custom Elements."><span>Angular Elements</span></a></div><!----><!----></aio-nav-item><!----></div></div><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><!----><div class="ng-star-inserted"><!----><button type="button" class="vertical-menu-item heading level-2 collapsed ng-star-inserted" title="Syntax to use in templates for binding, expressions, and directives." aria-pressed="false"><span>Templates</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="keyboard_arrow_right"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path>
</svg></mat-icon></button><!----><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./template-syntax.html" title="Introduction to writing templates that display data and consume user events with the help of data binding."><span>Introduction</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./interpolation.html" title="An introduction to interpolation and expressions in HTML."><span>Text interpolation</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./template-statements.html" title="Introductory guide to statements in templates that respond to events that components, directives, or elements raise."><span>Template statements</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./pipes.html" title="Pipes transform displayed values within a template."><span>Pipes</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./property-binding.html" title="Introductory guide to setting element or input properties."><span>Property binding</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./attribute-binding.html" title="Introductory guide to setting the value of HTML attributes."><span>Attribute, class, and style bindings</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./event-binding.html" title="Introductory guide to listening for user interaction."><span>Event binding</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./two-way-binding.html" title="Introductory guide to sharing data between a class and a template."><span>Two-way binding</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./template-reference-variables.html" title="Introductory guide to referring to DOM elements within a template."><span>Template reference variables</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./svg-in-templates.html" title="Learn how to use SVGs as templates for Angular applications."><span>SVG as templates</span></a></div><!----><!----></aio-nav-item><!----></div></div><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><!----><div class="ng-star-inserted"><!----><button type="button" class="vertical-menu-item heading level-2 collapsed ng-star-inserted" title="Control the behavior of elements and the layout of your pages with directives." aria-pressed="false"><span>Directives</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="keyboard_arrow_right"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path>
</svg></mat-icon></button><!----><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./built-in-directives.html" title="Introductory guide to some of the most popular built-in directives."><span>Built-in directives</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./attribute-directives.html" title="Attribute directives attach behavior to elements."><span>Attribute Directives</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./structural-directives.html" title="Structural directives manipulate the layout of the page."><span>Structural Directives</span></a></div><!----><!----></aio-nav-item><!----></div></div><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><!----><div class="ng-star-inserted"><!----><button type="button" class="vertical-menu-item heading level-2 collapsed ng-star-inserted" title="Dependency Injection: creating and injecting services" aria-pressed="false"><span>Dependency Injection</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="keyboard_arrow_right"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path>
</svg></mat-icon></button><!----><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./dependency-injection.html" title="Angular's dependency injection system creates and delivers dependent services to Angular-created classes."><span>Angular Dependency Injection</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./dependency-injection-providers.html" title="More about the different kinds of providers."><span>DI Providers</span></a></div><!----><!----></aio-nav-item><!----></div></div><!----></aio-nav-item><!----></div></div><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><!----><div class="ng-star-inserted"><!----><button type="button" class="vertical-menu-item heading level-1 expanded selected ng-star-inserted" title="Learn more about how to use Angular to build your applications." aria-pressed="true"><span>Developer guides</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="keyboard_arrow_right"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path>
</svg></mat-icon></button><!----><div class="heading-children level-1 expanded selected"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed" href="./developer-guide-overview.html" title="A list of developer guides for building Angular applications."><span>Overview</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><!----><div class="ng-star-inserted"><!----><button type="button" class="vertical-menu-item heading level-2 collapsed ng-star-inserted" title="Learn how to use Angular Router to build in-app navigation between views." aria-pressed="false"><span>Routing and Navigation</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="keyboard_arrow_right"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path>
</svg></mat-icon></button><!----><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./routing-overview.html" title="Introduces the Angular Router and lists topics that teach you how to add the router to your applications."><span>Overview</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./router.html" title="Task-based content on many of the common tasks associated with Angular routing, such as defining routs, setting up wildcard routes, and redirects."><span>Common routing tasks</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./router-tutorial.html" title="A tutorial that covers many patterns associated with Angular routing."><span>Tutorial: Routing in Single-page Applications</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./routing-with-urlmatcher.html" title="Learn how to create a custom URL matcher with the Angular router."><span>Tutorial: Creating custom route matches</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./router-tutorial-toh.html" title="Explore how to use Angular's router. Based on the Tour of Heroes example."><span>Tutorial: Adding routing to Tour of Heroes</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./router-reference.html" title="Describes highlight some core router API concepts."><span>Router reference</span></a></div><!----><!----></aio-nav-item><!----></div></div><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><!----><div class="ng-star-inserted"><!----><button type="button" class="vertical-menu-item heading level-2 collapsed ng-star-inserted" title="Forms creates a cohesive, effective, and compelling data entry experience." aria-pressed="false"><span>Forms</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="keyboard_arrow_right"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path>
</svg></mat-icon></button><!----><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./forms-overview.html" title="An Angular form coordinates a set of data-bound user controls, tracks changes, validates input, and presents errors."><span>Introduction</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./reactive-forms.html" title="Create a reactive form using FormBuilder, groups, and arrays."><span>Reactive Forms</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./form-validation.html" title="Validate user's form entries."><span>Validate form input</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./dynamic-form.html" title="Create dynamic form templates using FormGroup."><span>Building Dynamic Forms</span></a></div><!----><!----></aio-nav-item><!----></div></div><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed" href="./http.html" title="Use HTTP to talk to a remote server."><span>HTTP Client</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><!----><div class="ng-star-inserted"><!----><button type="button" class="vertical-menu-item heading level-2 expanded selected ng-star-inserted" title="Testing your Angular apps." aria-pressed="true"><span>Testing</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="keyboard_arrow_right"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path>
</svg></mat-icon></button><!----><div class="heading-children level-2 expanded selected"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./testing.html" title="Introduction to testing an Angular app."><span>Intro to Testing</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./testing-code-coverage.html" title="Determine how much of your code is tested."><span>Code Coverage</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./testing-services.html" title="How to test services."><span>Testing Services</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./testing-components-basics.html" title="The fundamentals of how to test components."><span>Basics of Testing Components</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 expanded selected" href="./testing-components-scenarios.html" title="Use cases for testing components."><span>Component Testing Scenarios</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./testing-attribute-directives.html" title="How to test attribute directives."><span>Testing Attribute Directives</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./testing-pipes.html" title="Writing tests for pipes."><span>Testing Pipes</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./test-debugging.html" title="How to debug tests."><span>Debugging Tests</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./testing-utility-apis.html" title="Features of the Angular testing utilities."><span>Testing Utility APIs</span></a></div><!----><!----></aio-nav-item><!----></div></div><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><!----><div class="ng-star-inserted"><!----><button type="button" class="vertical-menu-item heading level-2 collapsed ng-star-inserted" title="Translate the text of your application text into multiple languages" aria-pressed="false"><span>Internationalization</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="keyboard_arrow_right"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path>
</svg></mat-icon></button><!----><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./i18n-overview.html" title="Introduces the Angular internationalization and lists topics that teach you how to localize your applications"><span>Overview</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><!----><div class="ng-star-inserted"><!----><button type="button" class="vertical-menu-item heading level-3 collapsed ng-star-inserted" title="Task-based content on many of the common tasks associated with Angular internationalization, such as adding the locale package and formatting data for a locale" aria-pressed="false"><span>Common internationalization tasks</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="keyboard_arrow_right"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path>
</svg></mat-icon></button><!----><div class="heading-children level-3 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./i18n-common-overview.html" title="Introduces the common Angular internationalization tasks and lists topics that teach you how to localize your applications"><span>Overview</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./i18n-common-add-package.html" title="Add the Angular localize package"><span>Add the localize package</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./i18n-common-locale-id.html" title="Reference using locale IDs"><span>Refer to locales by ID</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./i18n-common-format-data-locale.html" title="Format data based on locale"><span>Format data based on locale</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./i18n-common-prepare.html" title="Prepare component for translation"><span>Prepare component for translation</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./i18n-common-translation-files.html" title="Work with translation files"><span>Work with translation files</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./i18n-common-merge.html" title="Merge translations into your app"><span>Merge translations into the app</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./i18n-common-deploy.html" title="Deploy multiple locale for your app"><span>Deploy multiple locales</span></a></div><!----><!----></aio-nav-item><!----></div></div><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./i18n-example.html" title="Example of a translated Angular application"><span>Example Angular application</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><!----><div class="ng-star-inserted"><!----><button type="button" class="vertical-menu-item heading level-3 collapsed ng-star-inserted" title="Task-based content on many of the optional pratices associated with Angular internationalization" aria-pressed="false"><span>Optional internationalization practices</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="keyboard_arrow_right"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path>
</svg></mat-icon></button><!----><div class="heading-children level-3 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./i18n-optional-overview.html" title="Introduces the optional Angular internationalization tasks and lists topics that teach you how to manually configure localization settings for your applications"><span>Overview</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./i18n-optional-manual-runtime-locale.html" title="Set the runtime locale manually"><span>Set the runtime locale manually</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./i18n-optional-import-global-variants.html" title="Import global variants of the locale data"><span>Import global variants of the locale data</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./i18n-optional-manage-marked-text.html" title="Manage marked text with custom IDs"><span>Manage marked text with custom IDs</span></a></div><!----><!----></aio-nav-item><!----></div></div><!----></aio-nav-item><!----></div></div><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><!----><div class="ng-star-inserted"><!----><button type="button" class="vertical-menu-item heading level-2 collapsed ng-star-inserted" title="Enhance the user experience with animation." aria-pressed="false"><span>Animations</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="keyboard_arrow_right"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path>
</svg></mat-icon></button><!----><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./animations.html" title="Basic techniques in Angular animations."><span>Introduction</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./transition-and-triggers.html" title="Advanced techniques in transition and triggers."><span>Transition and Triggers</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./complex-animation-sequences.html" title="Complex Angular animation sequences."><span>Complex Sequences</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./reusable-animations.html" title="Creating reusable animations."><span>Reusable Animations</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./route-animations.html" title="Animate route transitions."><span>Route Transition Animations</span></a></div><!----><!----></aio-nav-item><!----></div></div><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><!----><div class="ng-star-inserted"><!----><button type="button" class="vertical-menu-item heading level-2 collapsed ng-star-inserted" title="Angular service workers: Controlling caching of application resources." aria-pressed="false"><span>Service Workers &amp; PWA</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="keyboard_arrow_right"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path>
</svg></mat-icon></button><!----><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./service-worker-intro.html" title="Angular's implementation of service workers improves user experience with slow or unreliable network connectivity."><span>Introduction</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./service-worker-getting-started.html" title="Enabling the service worker in a CLI project and observing behavior in the browser."><span>Getting Started</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./app-shell.html" title="Render a portion of your app quickly to improve the startup experience."><span>App Shell</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./service-worker-communications.html" title="Services that enable you to interact with an Angular service worker."><span>Service Worker Communication</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./service-worker-notifications.html" title="Configuring service worker notification behavior."><span>Service Worker Notifications</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./service-worker-devops.html" title="Running apps with service workers, managing app update, debugging, and killing apps."><span>Service Worker in Production</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./service-worker-config.html" title="Configuring service worker caching behavior."><span>Service Worker Configuration</span></a></div><!----><!----></aio-nav-item><!----></div></div><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed" href="./web-worker.html" title="Using web workers for background processing."><span>Web Workers</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed" href="./universal.html" title="Render HTML server-side with Angular Universal."><span>Server-side Rendering</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed" href="./prerendering.html" title="Prerender HTML server-side with Angular Universal."><span>Prerendering</span></a></div><!----><!----></aio-nav-item><!----></div></div><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><!----><div class="ng-star-inserted"><!----><button type="button" class="vertical-menu-item heading level-1 collapsed ng-star-inserted" title="Learn how to build robust, scalable applications." aria-pressed="false"><span>Best Practices</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="keyboard_arrow_right"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path>
</svg></mat-icon></button><!----><div class="heading-children level-1 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed" href="./security.html" title="Developing for content security in Angular applications."><span>Security</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed" href="./accessibility.html" title="Design apps to be accessible to all users."><span>Accessibility</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed" href="./updating.html" title="Information about updating Angular applications and libraries to the latest version."><span>Keeping Up-to-Date</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed" href="./property-binding-best-practices.html" title="Use property binding efficiently."><span>Property Binding Best Practices</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed" href="./lazy-loading-ngmodules.html" title="Lazy load modules to speed up your apps."><span>Lazy Loading Feature Modules</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed" href="./lightweight-injection-tokens.html" title="Optimize client app size by designing library services with lightweight injection tokens."><span>Lightweight Injection Tokens for Libraries</span></a></div><!----><!----></aio-nav-item><!----></div></div><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><!----><div class="ng-star-inserted"><!----><button type="button" class="vertical-menu-item heading level-1 collapsed ng-star-inserted" title="Tools to help you build your Angular applications." aria-pressed="false"><span>Angular Tools</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="keyboard_arrow_right"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path>
</svg></mat-icon></button><!----><div class="heading-children level-1 collapsed"><aio-nav-item class="ng-star-inserted"><!----><div class="ng-star-inserted"><!----><button type="button" class="vertical-menu-item heading level-2 collapsed ng-star-inserted" title="Build, and deployment information." aria-pressed="false"><span>Dev Workflow</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="keyboard_arrow_right"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path>
</svg></mat-icon></button><!----><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./deployment.html" title="Learn how to deploy your Angular app."><span>Deploying applications</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><!----><div class="ng-star-inserted"><!----><button type="button" class="vertical-menu-item heading level-3 collapsed ng-star-inserted" title="Understanding ahead-of-time compilation." aria-pressed="false"><span>AOT Compiler</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="keyboard_arrow_right"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path>
</svg></mat-icon></button><!----><div class="heading-children level-3 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./aot-compiler.html" title="Learn why and how to use the Ahead-of-Time (AOT) compiler."><span>Ahead-of-Time Compilation</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./angular-compiler-options.html" title="Configuring AOT compilation."><span>Angular Compiler Options</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./aot-metadata-errors.html" title="Troubleshooting AOT compilation."><span>AOT Metadata Errors</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./template-typecheck.html" title="Template type-checking in Angular."><span>Template Type-checking</span></a></div><!----><!----></aio-nav-item><!----></div></div><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./build.html" title="Building and serving Angular apps."><span>Building &amp; Serving</span></a></div><!----><!----></aio-nav-item><!----></div></div><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed" href="./cli-builder.html" title="Using builders to customize Angular CLI."><span>CLI Builders</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed" href="./language-service.html" title="Use Angular Language Service to speed up dev time."><span>Language Service</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed" href="./devtools.html" title="DevTools"><span>DevTools</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><!----><div class="ng-star-inserted"><!----><button type="button" class="vertical-menu-item heading level-2 collapsed ng-star-inserted" title="Understanding schematics." aria-pressed="false"><span>Schematics</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="keyboard_arrow_right"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path>
</svg></mat-icon></button><!----><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./schematics.html" title="Extending CLI generation capabilities."><span>Schematics Overview</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./schematics-authoring.html" title="Understand the structure of a schematic."><span>Authoring Schematics</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./schematics-for-libraries.html" title="Use schematics to integrate your library with the Angular CLI."><span>Schematics for Libraries</span></a></div><!----><!----></aio-nav-item><!----></div></div><!----></aio-nav-item><!----></div></div><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><!----><div class="ng-star-inserted"><!----><button type="button" class="vertical-menu-item heading level-1 collapsed ng-star-inserted" title="End-to-end tutorials for learning Angular concepts and patterns." aria-pressed="false"><span>Tutorials</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="keyboard_arrow_right"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path>
</svg></mat-icon></button><!----><div class="heading-children level-1 collapsed"><aio-nav-item class="ng-star-inserted"><!----><div class="ng-star-inserted"><!----><button type="button" class="vertical-menu-item heading level-2 collapsed ng-star-inserted" title="The Tour of Heroes app is used as a reference point in many Angular examples." aria-pressed="false"><span>Tutorial: Tour of Heroes</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="keyboard_arrow_right"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path>
</svg></mat-icon></button><!----><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../tutorial.html" title="Introduction to the Tour of Heroes app and tutorial"><span>Introduction</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../tutorial/toh-pt0.html" title="Creating the application shell"><span>Create a Project</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../tutorial/toh-pt1.html" title="Part 1: Build a simple editor"><span>1. The Hero Editor</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../tutorial/toh-pt2.html" title="Part 2: Build a master/detail page with a list of heroes."><span>2. Display a List</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../tutorial/toh-pt3.html" title="Part 3: Refactor the master/detail views into separate components."><span>3. Create a Feature Component</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../tutorial/toh-pt4.html" title="Part 4: Create a reusable service to manage hero data."><span>4. Add Services</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../tutorial/toh-pt5.html" title="Part 5: Add the Angular router and navigate among the views."><span>5. Add Navigation</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../tutorial/toh-pt6.html" title="Part 6: Use HTTP to retrieve and save hero data."><span>6. Get Data from a Server</span></a></div><!----><!----></aio-nav-item><!----></div></div><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed" href="./forms.html" title="Create a template-driven form using directives and Angular template syntax."><span>Building a Template-driven Form</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><!----><div class="ng-star-inserted"><!----><button type="button" class="vertical-menu-item heading level-2 collapsed ng-star-inserted" title="Extending Angular with shared libraries." aria-pressed="false"><span>Angular Libraries</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="keyboard_arrow_right"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path>
</svg></mat-icon></button><!----><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./libraries.html" title="Understand how and when to use or create libraries."><span>Libraries Overview</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./using-libraries.html" title="Integrate published libraries into an app."><span>Using Published Libraries</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./creating-libraries.html" title="Extend Angular by creating, publishing, and using your own libraries."><span>Creating Libraries</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./angular-package-format.html" title="Information about the Angular Package Format."><span>Angular Package Format</span></a></div><!----><!----></aio-nav-item><!----></div></div><!----></aio-nav-item><!----></div></div><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><!----><div class="ng-star-inserted"><!----><button type="button" class="vertical-menu-item heading level-1 collapsed ng-star-inserted" title="Angular release practices, updating, and upgrading." aria-pressed="false"><span>Release Information</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="keyboard_arrow_right"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path>
</svg></mat-icon></button><!----><div class="heading-children level-1 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed" href="./releases.html" title="Angular versioning, release, support, and deprecation policies and practices."><span>Release Practices</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed" href="./roadmap.html" title="Roadmap of the Angular team."><span>Roadmap</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed" href="./browser-support.html" title="Browser support and polyfills guide."><span>Browser Support</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed" href="./update-to-latest-version.html" title="Support to update your application to version 13"><span>Update to Version 13</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed" href="./deprecations.html" title="Summary of Angular APIs and features that are deprecated."><span>Deprecations</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><!----><div class="ng-star-inserted"><!----><button type="button" class="vertical-menu-item heading level-2 collapsed ng-star-inserted" title="Incrementally upgrade an AngularJS application to Angular." aria-pressed="false"><span>Upgrading from AngularJS</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="keyboard_arrow_right"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path>
</svg></mat-icon></button><!----><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./upgrade.html" title="Incrementally upgrade an AngularJS application to Angular."><span>Upgrading Instructions</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./upgrade-setup.html" title="Use code from the Angular QuickStart seed as part of upgrading from AngularJS."><span>Setup for Upgrading from AngularJS</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./upgrade-performance.html" title="Upgrade from AngularJS to Angular in a more flexible way."><span>Upgrading for Performance</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./ajs-quick-reference.html" title="Learn how AngularJS concepts and techniques map to Angular."><span>AngularJS-Angular Concepts</span></a></div><!----><!----></aio-nav-item><!----></div></div><!----></aio-nav-item><!----></div></div><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><!----><div class="ng-star-inserted"><!----><button type="button" class="vertical-menu-item heading level-1 collapsed ng-star-inserted" title="Reference guides for Angular features and tools." aria-pressed="false"><span>Reference</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="keyboard_arrow_right"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path>
</svg></mat-icon></button><!----><div class="heading-children level-1 collapsed"><aio-nav-item class="ng-star-inserted"><!----><div class="ng-star-inserted"><!----><button type="button" class="vertical-menu-item heading level-2 collapsed ng-star-inserted" title="Reference documentation that explains how Angular features work." aria-pressed="false"><span>Conceptual Reference</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="keyboard_arrow_right"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path>
</svg></mat-icon></button><!----><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><!----><div class="ng-star-inserted"><!----><button type="button" class="vertical-menu-item heading level-3 collapsed ng-star-inserted" title="Introduction to basic concepts for Angular applications." aria-pressed="false"><span>Angular Concepts</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="keyboard_arrow_right"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path>
</svg></mat-icon></button><!----><div class="heading-children level-3 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./architecture.html" title="Basic building blocks of Angular applications."><span>Intro to Basic Concepts</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./architecture-modules.html" title="About NgModules."><span>Intro to Modules</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./architecture-components.html" title="About Components, Templates, and Views."><span>Intro to Components</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./architecture-services.html" title="About services and dependency injection."><span>Intro to Services and DI</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./architecture-next-steps.html" title="Beyond the basics."><span>Next Steps</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./binding-syntax.html" title="Introductory guide to coordinating app values."><span>Binding syntax</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./event-binding-concepts.html" title="About event binding."><span>How event binding works</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./template-reference-variables.html" title="Introductory guide to referring to DOM elements within a template."><span>Template variables</span></a></div><!----><!----></aio-nav-item><!----></div></div><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><!----><div class="ng-star-inserted"><!----><button type="button" class="vertical-menu-item heading level-3 collapsed ng-star-inserted" title="Workspace and project file structure and configuration." aria-pressed="false"><span>Workspace and project structure</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="keyboard_arrow_right"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path>
</svg></mat-icon></button><!----><div class="heading-children level-3 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./file-structure.html" title="How your Angular workspace looks on your filesystem."><span>Project File Structure</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./workspace-config.html" title="The &quot;angular.json&quot; file contains workspace and project configuration defaults for Angular CLI commands."><span>Workspace Configuration</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./npm-packages.html" title="Description of npm packages required at development time and at runtime."><span>npm Dependencies</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./typescript-configuration.html" title="TypeScript configuration for Angular developers."><span>TypeScript Configuration</span></a></div><!----><!----></aio-nav-item><!----></div></div><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><!----><div class="ng-star-inserted"><!----><button type="button" class="vertical-menu-item heading level-3 collapsed ng-star-inserted" title="NgModules." aria-pressed="false"><span>NgModules</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="keyboard_arrow_right"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path>
</svg></mat-icon></button><!----><div class="heading-children level-3 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./ngmodules.html" title="Use NgModules to make your apps efficient."><span>NgModules Introduction</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./ngmodule-vs-jsmodule.html" title="Differentiate between JavaScript modules and NgModules."><span>JS Modules vs NgModules</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./bootstrapping.html" title="Tell Angular how to construct and bootstrap the app in the root &quot;AppModule&quot;."><span>Launching Apps with a Root Module</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./frequent-ngmodules.html" title="Introduction to the most frequently used NgModules."><span>Frequently Used NgModules</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./module-types.html" title="Description of the different types of feature modules."><span>Types of Feature Modules</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./entry-components.html" title="All about entry components in Angular."><span>Entry Components</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./feature-modules.html" title="Create feature modules to organize your code."><span>Feature Modules</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./providers.html" title="Providing dependencies to NgModules."><span>Providing Dependencies</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./singleton-services.html" title="Creating singleton services."><span>Singleton Services</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./sharing-ngmodules.html" title="Share NgModules to streamline your apps."><span>Sharing NgModules</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./ngmodule-api.html" title="Understand the details of NgModules."><span>NgModule API</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./ngmodule-faq.html" title="Answers to frequently asked questions about NgModules."><span>NgModule FAQs</span></a></div><!----><!----></aio-nav-item><!----></div></div><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><!----><div class="ng-star-inserted"><!----><button type="button" class="vertical-menu-item heading level-3 collapsed ng-star-inserted" title="Using observables for message passing in Angular." aria-pressed="false"><span>Observables &amp; RxJS</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="keyboard_arrow_right"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path>
</svg></mat-icon></button><!----><div class="heading-children level-3 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./observables.html" title="Using observables to pass values synchronously or asynchronously."><span>Observables Overview</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./rx-library.html" title="A library for reactive programming using observables to compose asynchronous or callback-based code."><span>The RxJS Library</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./observables-in-angular.html" title="How Angular subsystems use and expect observables."><span>Observables in Angular</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./practical-observable-usage.html" title="Domains in which observables are particularly useful."><span>Practical Usage</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./comparing-observables.html" title="How observables compare to promises and other message passing techniques."><span>Compare to Other Techniques</span></a></div><!----><!----></aio-nav-item><!----></div></div><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><!----><div class="ng-star-inserted"><!----><button type="button" class="vertical-menu-item heading level-3 collapsed ng-star-inserted" title="Using dependency injection in Angular." aria-pressed="false"><span>Dependency injection</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="keyboard_arrow_right"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path>
</svg></mat-icon></button><!----><div class="heading-children level-3 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./hierarchical-dependency-injection.html" title="An injector tree parallels the component tree and supports nested dependencies."><span>Hierarchical Injectors</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed" href="./dependency-injection-in-action.html" title="Techniques for dependency injection."><span>DI in Action</span></a></div><!----><!----></aio-nav-item><!----></div></div><!----></aio-nav-item><!----></div></div><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><!----><div class="ng-star-inserted"><!----><button type="button" class="vertical-menu-item heading level-2 collapsed ng-star-inserted" title="Angular CLI command reference." aria-pressed="false"><span>CLI Command Reference</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="keyboard_arrow_right"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path>
</svg></mat-icon></button><!----><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../cli.html" title="An introduction to the CLI tool, commands, and syntax."><span>Overview</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../cli/cache.html" title="Details on the Angular CLI persistent disk cache."><span>Persistent Disk Cache</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../cli/usage-analytics-gathering.html" title="For administrators, guide to gathering usage analytics from your users."><span>Usage Analytics</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../cli/add.html" title="ng add."><span>ng add</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../cli/analytics.html" title="ng analytics."><span>ng analytics</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../cli/build.html" title="ng build."><span>ng build</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../cli/config.html" title="ng config."><span>ng config</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../cli/deploy.html" title="ng deploy."><span>ng deploy</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../cli/doc.html" title="ng doc."><span>ng doc</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../cli/e2e.html" title="ng e2e."><span>ng e2e</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../cli/extract-i18n.html" title="ng extract-i18n."><span>ng extract-i18n</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../cli/generate.html" title="ng generate."><span>ng generate</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../cli/help.html" title="ng help."><span>ng help</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../cli/lint.html" title="ng lint."><span>ng lint</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../cli/new.html" title="ng new."><span>ng new</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../cli/run.html" title="ng run."><span>ng run</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../cli/serve.html" title="ng serve."><span>ng serve</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../cli/test.html" title="ng test."><span>ng test</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../cli/update.html" title="ng update."><span>ng update</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../cli/version.html" title="ng version."><span>ng version</span></a></div><!----><!----></aio-nav-item><!----></div></div><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed" href="../api.html" title="Details of the Angular packages, classes, interfaces, and other types."><span>API Reference</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><!----><div class="ng-star-inserted"><!----><button type="button" class="vertical-menu-item heading level-2 collapsed ng-star-inserted" title="Details of the errors that can be thrown by Angular." aria-pressed="false"><span>Error Reference</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="keyboard_arrow_right"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path>
</svg></mat-icon></button><!----><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../errors/NG0100.html" title="Expression Changed After Checked"><span>NG0100: Expression Changed After Checked</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../errors/NG0200.html" title="Circular Dependency in DI"><span>NG0200: Circular Dependency in DI</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../errors/NG0201.html" title="No Provider Found"><span>NG0201: No Provider Found</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../errors/NG0300.html" title="Selector Collision"><span>NG0300: Selector Collision</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../errors/NG0301.html" title="Export Not Found"><span>NG0301: Export Not Found</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../errors/NG0302.html" title="Pipe Not Found"><span>NG0302: Pipe Not Found</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../errors/NG1001.html" title="Argument Not Literal"><span>NG1001: Argument Not Literal</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../errors/NG2003.html" title="Missing Token"><span>NG2003: Missing Token</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../errors/NG2009.html" title="Invalid Shadow DOM selector"><span>NG2009: Invalid Shadow DOM selector</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../errors/NG3003.html" title="Import Cycle Detected"><span>NG3003: Import Cycle Detected</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../errors/NG6999.html" title="Invalid metadata"><span>NG6999: Invalid metadata</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../errors/NG8001.html" title="Invalid Element"><span>NG8001: Invalid Element</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../errors/NG8002.html" title="Invalid Attribute"><span>NG8002: Invalid Attribute</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../errors/NG8003.html" title="Missing Reference Target"><span>NG8003: Missing Reference Target</span></a></div><!----><!----></aio-nav-item><!----></div></div><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><!----><div class="ng-star-inserted"><!----><button type="button" class="vertical-menu-item heading level-2 collapsed ng-star-inserted" title="Details of extended diagnostics that can be emitted by the Angular compiler" aria-pressed="false"><span>Extended Diagnostic Reference</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="keyboard_arrow_right"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path>
</svg></mat-icon></button><!----><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../extended-diagnostics.html" title="Overview of extended diagnostics, what they are, and how to configure them."><span>Extended Diagnostics Overview</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../extended-diagnostics/NG8101.html" title="Invalid Banana-in-Box"><span>NG8101: Invalid Banana-in-Box</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="../extended-diagnostics/NG8102.html" title="Nullish coalescing not nullable"><span>NG8102: Nullish coalescing not nullable</span></a></div><!----><!----></aio-nav-item><!----></div></div><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed" href="./example-apps-list.html" title="List of all of the example applications in the Angular documentation."><span>Example applications</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed" href="./glossary.html" title="Brief definitions of the most important words in the Angular vocabulary."><span>Angular Glossary</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><!----><div class="ng-star-inserted"><!----><button type="button" class="vertical-menu-item heading level-2 collapsed ng-star-inserted" title="Summaries of Angular syntax, coding, and doc styles." aria-pressed="false"><span>Angular Style and Usage</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="keyboard_arrow_right"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path>
</svg></mat-icon></button><!----><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./cheatsheet.html" title="A quick guide to common Angular coding techniques."><span>Quick Reference</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./styleguide.html" title="Guidelines for writing Angular code."><span>Coding Style Guide</span></a></div><!----><!----></aio-nav-item><!----></div></div><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><!----><div class="ng-star-inserted"><!----><button type="button" class="vertical-menu-item heading level-2 collapsed ng-star-inserted" title="Describes how to contribute to the Angular documentation." aria-pressed="false"><span>Content Contributor's Guide</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="keyboard_arrow_right"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path>
</svg></mat-icon></button><!----><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./contributors-guide-overview.html" title="Provides an overview of how to contribute to Angular's documentation."><span>Overview</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./reviewing-content.html" title="Keep Angular content up-to-date by reviewing topics for accuracy."><span>Reviewing content</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./updating-search-keywords.html" title="Help users find the content they need by adding additional search keywords."><span>Updating search keywords</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./updating-content-github-ui.html" title="Update topics in the browser through the GitHub user interface."><span>Updating content using GitHub UI</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./docs-style-guide.html" title="Style guide for documentation authors."><span>Documentation Style Guide</span></a></div><!----><!----></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed" href="./localizing-angular.html" title="Learn about the guidelines for localizing Angular documentation."><span>Angular doc localization guidelines</span></a></div><!----><!----></aio-nav-item><!----></div></div><!----></aio-nav-item><!----></div></div><!----></aio-nav-item><!----></aio-nav-menu><div class="doc-version ng-tns-c19-1"><aio-select><div class="form-select-menu"><button class="form-select-button"><span><strong></strong></span><!----><span>stable (v13.2.3)</span></button><!----></div></aio-select></div></div></mat-sidenav><div class="cdk-visually-hidden cdk-focus-trap-anchor" aria-hidden="true"></div><mat-sidenav-content class="mat-drawer-content mat-sidenav-content ng-star-inserted"><section class="sidenav-content-container"><main role="main" class="sidenav-content" id="guide-testing-components-scenarios"><div id="main-content" tabindex="-1"></div><aio-mode-banner><!----></aio-mode-banner><aio-doc-viewer class=""><div style="opacity: 1;">


<div class="github-links">
  <a href="https://github.com/angular/angular/edit/master/aio/content/guide/testing-components-scenarios.md?message=docs%3A%20describe%20your%20change..." aria-label="Suggest Edits" title="Suggest Edits"><i class="material-icons" aria-hidden="true" role="img">mode_edit</i></a>
</div>


<div class="content">
  <h1 id="component-testing-scenarios">Component testing scenarios</h1><aio-toc class="embedded" ng-version="13.2.2"><div class="toc-inner no-print collapsed ng-star-inserted"><!----><button type="button" title="Expand/collapse contents" aria-label="Expand/collapse contents" class="toc-heading embedded secondary ng-star-inserted" aria-pressed="false"> Contents <mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon collapsed mat-icon-no-color" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="keyboard_arrow_right"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path>
</svg></mat-icon></button><!----><ul class="toc-list embedded"><!----><!----><li class="h2 ng-star-inserted" title="Component binding"><a href="./testing-components-scenarios.html#component-binding">Component binding</a></li><!----><!----><li class="h2 ng-star-inserted" title="Component with external files"><a href="./testing-components-scenarios.html#component-with-external-files">Component with external files</a></li><!----><!----><li class="h2 ng-star-inserted" title="Component with a dependency"><a href="./testing-components-scenarios.html#component-with-a-dependency">Component with a dependency</a></li><!----><!----><li class="h2 secondary ng-star-inserted" title="Component with async service"><a href="./testing-components-scenarios.html#component-with-async-service">Component with async service</a></li><!----><!----><li class="h2 secondary ng-star-inserted" title="Component marble tests"><a href="./testing-components-scenarios.html#component-marble-tests">Component marble tests</a></li><!----><!----><li class="h2 secondary ng-star-inserted" title="Component with inputs and outputs"><a href="./testing-components-scenarios.html#component-with-inputs-and-outputs">Component with inputs and outputs</a></li><!----><!----><li class="h2 secondary ng-star-inserted" title="Component inside a test host"><a href="./testing-components-scenarios.html#component-inside-a-test-host">Component inside a test host</a></li><!----><!----><li class="h2 secondary ng-star-inserted" title="Routing component"><a href="./testing-components-scenarios.html#routing-component">Routing component</a></li><!----><!----><li class="h2 secondary ng-star-inserted" title="Routed components"><a href="./testing-components-scenarios.html#routed-components">Routed components</a></li><!----><!----><li class="h2 secondary ng-star-inserted" title="Nested component tests"><a href="./testing-components-scenarios.html#nested-component-tests">Nested component tests</a></li><!----><!----><li class="h2 secondary ng-star-inserted" title="Components with RouterLink"><a href="./testing-components-scenarios.html#components-with-routerlink">Components with <em>RouterLink</em></a></li><!----><!----><li class="h2 secondary ng-star-inserted" title="Use a page object"><a href="./testing-components-scenarios.html#use-a-page-object">Use a <em>page</em> object</a></li><!----><!----><li class="h2 secondary ng-star-inserted" title="Calling compileComponents()"><a href="./testing-components-scenarios.html#calling-compilecomponents">Calling <em>compileComponents()</em></a></li><!----><!----><li class="h2 secondary ng-star-inserted" title="Setup with module imports"><a href="./testing-components-scenarios.html#setup-with-module-imports">Setup with module imports</a></li><!----><!----><li class="h2 secondary ng-star-inserted" title="Override component providers"><a href="./testing-components-scenarios.html#override-component-providers">Override component providers</a></li><!----><!----><!----></ul><button type="button" title="Expand/collapse contents" aria-label="Expand/collapse contents" class="toc-more-items embedded material-icons collapsed ng-star-inserted" aria-pressed="false"></button><!----></div><!----></aio-toc>
<p>This guide explores common component testing use cases.</p>
<div class="alert is-helpful">
<p>  If you'd like to experiment with the application that this guide describes, <live-example name="testing" nodownload="" ng-version="13.2.2"><span style="display: none;">run it in your browser</span><span><!----><!----><span class="ng-star-inserted"><a target="_blank" title="run it in your browser" href="https://angular.io/generated/live-examples/testing/stackblitz.html">run it in your browser</a><!----></span><!----></span></live-example> or <live-example name="testing" downloadonly="" ng-version="13.2.2"><span style="display: none;">download and run it locally</span><span><!----><span class="ng-star-inserted"><a download="" title="download and run it locally" href="https://angular.io/generated/zips/testing/testing.zip">download and run it locally</a></span><!----><!----></span></live-example>.</p>
</div>
<a class="dashAnchor" name="//apple_ref/Section/Component%20binding"></a><h2 id="component-binding">Component binding</h2>
<p>In the example app, the <code>BannerComponent</code> presents static title text in the HTML template.</p>
<p>After a few changes, the <code>BannerComponent</code> presents a dynamic title by binding to
the component's <code>title</code> property like this.</p>
<code-example path="testing/src/app/banner/banner.component.ts" region="component" header="app/banner/banner.component.ts" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/banner/banner.component.ts</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/banner/banner.component.ts">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="lit">@</span><a href="../api/core/Component.html" class="code-anchor"><span class="lit">Component</span></a><span class="pun">({</span><span class="pln">
  selector</span><span class="pun">:</span><span class="pln"> </span><span class="str">'app-banner'</span><span class="pun">,</span><span class="pln">
  </span><span class="kwd">template</span><span class="pun">:</span><span class="pln"> </span><span class="str">'&lt;h1&gt;{{title}}&lt;/h1&gt;'</span><span class="pun">,</span><span class="pln">
  styles</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="str">'h1 { color: green; font-size: 350%}'</span><span class="pun">]</span><span class="pln">
</span><span class="pun">})</span><span class="pln">
</span><span class="kwd">export</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">BannerComponent</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  title </span><span class="pun">=</span><span class="pln"> </span><span class="str">'Test Tour of Heroes'</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></code>
    </pre></aio-code></code-example>
<p>As minimal as this is, you decide to add a test to confirm that component
actually displays the right content where you think it should.</p>
<h4 id="query-for-the-h1">Query for the <em>&lt;h1&gt;</em></h4>
<p>You'll write a sequence of tests that inspect the value of the <code>&lt;h1&gt;</code> element
that wraps the <em>title</em> property interpolation binding.</p>
<p>You update the <code>beforeEach</code> to find that element with a standard HTML <code>querySelector</code>
and assign it to the <code>h1</code> variable.</p>
<code-example path="testing/src/app/banner/banner.component.spec.ts" region="setup" header="app/banner/banner.component.spec.ts (setup)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/banner/banner.component.spec.ts (setup)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/banner/banner.component.spec.ts (setup)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="kwd">let</span><span class="pln"> component</span><span class="pun">:</span><span class="pln"> </span><span class="typ">BannerComponent</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">let</span><span class="pln"> fixture</span><span class="pun">:</span><span class="pln"> </span><a href="../api/core/testing/ComponentFixture.html" class="code-anchor"><span class="typ">ComponentFixture</span></a><span class="pun">&lt;</span><span class="typ">BannerComponent</span><span class="pun">&gt;;</span><span class="pln">
</span><span class="kwd">let</span><span class="pln"> h1</span><span class="pun">:</span><span class="pln"> </span><span class="typ">HTMLElement</span><span class="pun">;</span><span class="pln">

beforeEach</span><span class="pun">(()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="typ">TestBed</span><span class="pun">.</span><span class="pln">configureTestingModule</span><span class="pun">({</span><span class="pln">
    declarations</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln"> </span><span class="typ">BannerComponent</span><span class="pln"> </span><span class="pun">],</span><span class="pln">
  </span><span class="pun">});</span><span class="pln">
  fixture </span><span class="pun">=</span><span class="pln"> </span><span class="typ">TestBed</span><span class="pun">.</span><span class="pln">createComponent</span><span class="pun">(</span><span class="typ">BannerComponent</span><span class="pun">);</span><span class="pln">
  component </span><span class="pun">=</span><span class="pln"> fixture</span><span class="pun">.</span><span class="pln">componentInstance</span><span class="pun">;</span><span class="pln"> </span><span class="com">// BannerComponent test instance</span><span class="pln">
  h1 </span><span class="pun">=</span><span class="pln"> fixture</span><span class="pun">.</span><span class="pln">nativeElement</span><span class="pun">.</span><span class="pln">querySelector</span><span class="pun">(</span><span class="str">'h1'</span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span></code>
    </pre></aio-code></code-example>
<a id="detect-changes"></a>
<h4 id="createcomponent-does-not-bind-data"><em>createComponent()</em> does not bind data</h4>
<p>For your first test you'd like to see that the screen displays the default <code>title</code>.
Your instinct is to write a test that immediately inspects the <code>&lt;h1&gt;</code> like this:</p>
<code-example path="testing/src/app/banner/banner.component.spec.ts" region="expect-h1-default-v1" ng-version="13.2.2"><div style="display: none;"></div><!----><aio-code><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">it</span><span class="pun">(</span><span class="str">'should display original title'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  expect</span><span class="pun">(</span><span class="pln">h1</span><span class="pun">.</span><span class="pln">textContent</span><span class="pun">).</span><span class="pln">toContain</span><span class="pun">(</span><span class="pln">component</span><span class="pun">.</span><span class="pln">title</span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span></code>
    </pre></aio-code></code-example>
<p><em>That test fails</em> with the message:</p>
<code-example language="javascript" ng-version="13.2.2"><div style="display: none;"></div><!----><aio-code><pre class="lang-javascript prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">expected </span><span class="str">''</span><span class="pln"> to contain </span><span class="str">'Test Tour of Heroes'</span><span class="pun">.</span></code>
    </pre></aio-code></code-example>
<p>Binding happens when Angular performs <strong>change detection</strong>.</p>
<p>In production, change detection kicks in automatically
when Angular creates a component or the user enters a keystroke or
an asynchronous activity (for example, AJAX) completes.</p>
<p>The <code>TestBed.createComponent</code> does <em>not</em> trigger change detection; a fact confirmed in the revised test:</p>
<code-example path="testing/src/app/banner/banner.component.spec.ts" region="test-w-o-detect-changes" ng-version="13.2.2"><div style="display: none;"></div><!----><aio-code><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">it</span><span class="pun">(</span><span class="str">'no title in the DOM after createComponent()'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  expect</span><span class="pun">(</span><span class="pln">h1</span><span class="pun">.</span><span class="pln">textContent</span><span class="pun">).</span><span class="pln">toEqual</span><span class="pun">(</span><span class="str">''</span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span></code>
    </pre></aio-code></code-example>
<h4 id="detectchanges"><em>detectChanges()</em></h4>
<p>You must tell the <code><a href="../api/core/testing/TestBed.html" class="code-anchor">TestBed</a></code> to perform data binding by calling <code>fixture.detectChanges()</code>.
Only then does the <code>&lt;h1&gt;</code> have the expected title.</p>
<code-example path="testing/src/app/banner/banner.component.spec.ts" region="expect-h1-default" ng-version="13.2.2"><div style="display: none;"></div><!----><aio-code><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">it</span><span class="pun">(</span><span class="str">'should display original title after detectChanges()'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  fixture</span><span class="pun">.</span><span class="pln">detectChanges</span><span class="pun">();</span><span class="pln">
  expect</span><span class="pun">(</span><span class="pln">h1</span><span class="pun">.</span><span class="pln">textContent</span><span class="pun">).</span><span class="pln">toContain</span><span class="pun">(</span><span class="pln">component</span><span class="pun">.</span><span class="pln">title</span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span></code>
    </pre></aio-code></code-example>
<p>Delayed change detection is intentional and useful.
It gives the tester an opportunity to inspect and change the state of
the component <em>before Angular initiates data binding and calls <a href="./lifecycle-hooks.html">lifecycle hooks</a></em>.</p>
<p>Here's another test that changes the component's <code>title</code> property <em>before</em> calling <code>fixture.detectChanges()</code>.</p>
<code-example path="testing/src/app/banner/banner.component.spec.ts" region="after-change" ng-version="13.2.2"><div style="display: none;"></div><!----><aio-code><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">it</span><span class="pun">(</span><span class="str">'should display a different test title'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  component</span><span class="pun">.</span><span class="pln">title </span><span class="pun">=</span><span class="pln"> </span><span class="str">'Test </span><a href="../api/platform-browser/Title.html" class="code-anchor"><span class="str">Title</span></a><span class="str">'</span><span class="pun">;</span><span class="pln">
  fixture</span><span class="pun">.</span><span class="pln">detectChanges</span><span class="pun">();</span><span class="pln">
  expect</span><span class="pun">(</span><span class="pln">h1</span><span class="pun">.</span><span class="pln">textContent</span><span class="pun">).</span><span class="pln">toContain</span><span class="pun">(</span><span class="str">'Test </span><a href="../api/platform-browser/Title.html" class="code-anchor"><span class="str">Title</span></a><span class="str">'</span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span></code>
    </pre></aio-code></code-example>
<a id="auto-detect-changes"></a>
<h4 id="automatic-change-detection">Automatic change detection</h4>
<p>The <code>BannerComponent</code> tests frequently call <code>detectChanges</code>.
Some testers prefer that the Angular test environment run change detection automatically.</p>
<p>That's possible by configuring the <code><a href="../api/core/testing/TestBed.html" class="code-anchor">TestBed</a></code> with the <code><a href="../api/core/testing/ComponentFixtureAutoDetect.html" class="code-anchor">ComponentFixtureAutoDetect</a></code> provider.
First import it from the testing utility library:</p>
<code-example path="testing/src/app/banner/banner.component.detect-changes.spec.ts" region="import-ComponentFixtureAutoDetect" header="app/banner/banner.component.detect-changes.spec.ts (import)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/banner/banner.component.detect-changes.spec.ts (import)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/banner/banner.component.detect-changes.spec.ts (import)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="kwd">import</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><a href="../api/core/testing/ComponentFixtureAutoDetect.html" class="code-anchor"><span class="typ">ComponentFixtureAutoDetect</span></a><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> </span><span class="str">'@angular/core/testing'</span><span class="pun">;</span></code>
    </pre></aio-code></code-example>
<p>Then add it to the <code>providers</code> array of the testing module configuration:</p>
<code-example path="testing/src/app/banner/banner.component.detect-changes.spec.ts" region="auto-detect" header="app/banner/banner.component.detect-changes.spec.ts (AutoDetect)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/banner/banner.component.detect-changes.spec.ts (AutoDetect)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/banner/banner.component.detect-changes.spec.ts (AutoDetect)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="typ">TestBed</span><span class="pun">.</span><span class="pln">configureTestingModule</span><span class="pun">({</span><span class="pln">
  declarations</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln"> </span><span class="typ">BannerComponent</span><span class="pln"> </span><span class="pun">],</span><span class="pln">
  providers</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln">
    </span><span class="pun">{</span><span class="pln"> provide</span><span class="pun">:</span><span class="pln"> </span><a href="../api/core/testing/ComponentFixtureAutoDetect.html" class="code-anchor"><span class="typ">ComponentFixtureAutoDetect</span></a><span class="pun">,</span><span class="pln"> useValue</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">true</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
  </span><span class="pun">]</span><span class="pln">
</span><span class="pun">});</span></code>
    </pre></aio-code></code-example>
<p>Here are three tests that illustrate how automatic change detection works.</p>
<code-example path="testing/src/app/banner/banner.component.detect-changes.spec.ts" region="auto-detect-tests" header="app/banner/banner.component.detect-changes.spec.ts (AutoDetect Tests)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/banner/banner.component.detect-changes.spec.ts (AutoDetect Tests)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/banner/banner.component.detect-changes.spec.ts (AutoDetect Tests)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">it</span><span class="pun">(</span><span class="str">'should display original title'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="com">// Hooray! No `fixture.detectChanges()` needed</span><span class="pln">
  expect</span><span class="pun">(</span><span class="pln">h1</span><span class="pun">.</span><span class="pln">textContent</span><span class="pun">).</span><span class="pln">toContain</span><span class="pun">(</span><span class="pln">comp</span><span class="pun">.</span><span class="pln">title</span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span><span class="pln">

it</span><span class="pun">(</span><span class="str">'should still see original title after comp.title change'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">const</span><span class="pln"> oldTitle </span><span class="pun">=</span><span class="pln"> comp</span><span class="pun">.</span><span class="pln">title</span><span class="pun">;</span><span class="pln">
  comp</span><span class="pun">.</span><span class="pln">title </span><span class="pun">=</span><span class="pln"> </span><span class="str">'Test </span><a href="../api/platform-browser/Title.html" class="code-anchor"><span class="str">Title</span></a><span class="str">'</span><span class="pun">;</span><span class="pln">
  </span><span class="com">// Displayed title is old because Angular didn't hear the change :(</span><span class="pln">
  expect</span><span class="pun">(</span><span class="pln">h1</span><span class="pun">.</span><span class="pln">textContent</span><span class="pun">).</span><span class="pln">toContain</span><span class="pun">(</span><span class="pln">oldTitle</span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span><span class="pln">

it</span><span class="pun">(</span><span class="str">'should display updated title after detectChanges'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  comp</span><span class="pun">.</span><span class="pln">title </span><span class="pun">=</span><span class="pln"> </span><span class="str">'Test </span><a href="../api/platform-browser/Title.html" class="code-anchor"><span class="str">Title</span></a><span class="str">'</span><span class="pun">;</span><span class="pln">
  fixture</span><span class="pun">.</span><span class="pln">detectChanges</span><span class="pun">();</span><span class="pln"> </span><span class="com">// detect changes explicitly</span><span class="pln">
  expect</span><span class="pun">(</span><span class="pln">h1</span><span class="pun">.</span><span class="pln">textContent</span><span class="pun">).</span><span class="pln">toContain</span><span class="pun">(</span><span class="pln">comp</span><span class="pun">.</span><span class="pln">title</span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span></code>
    </pre></aio-code></code-example>
<p>The first test shows the benefit of automatic change detection.</p>
<p>The second and third test reveal an important limitation.
The Angular testing environment does <em>not</em> know that the test changed the component's <code>title</code>.
The <code><a href="../api/core/testing/ComponentFixtureAutoDetect.html" class="code-anchor">ComponentFixtureAutoDetect</a></code> service responds to <em>asynchronous activities</em> such as promise resolution, timers, and DOM events.
But a direct, synchronous update of the component property is invisible.
The test must call <code>fixture.detectChanges()</code> manually to trigger another cycle of change detection.</p>
<div class="alert is-helpful">
<p>Rather than wonder when the test fixture will or won't perform change detection,
the samples in this guide <em>always call</em> <code>detectChanges()</code> <em>explicitly</em>.
There is no harm in calling <code>detectChanges()</code> more often than is strictly necessary.</p>
</div>
<a id="dispatch-event"></a>
<h4 id="change-an-input-value-with-dispatchevent">Change an input value with <em>dispatchEvent()</em></h4>
<p>To simulate user input, find the input element and set its <code>value</code> property.</p>
<p>You will call <code>fixture.detectChanges()</code> to trigger Angular's change detection.
But there is an essential, intermediate step.</p>
<p>Angular doesn't know that you set the input element's <code>value</code> property.
It won't read that property until you raise the element's <code>input</code> event by calling <code>dispatchEvent()</code>.
<em>Then</em> you call <code>detectChanges()</code>.</p>
<p>The following example demonstrates the proper sequence.</p>
<code-example path="testing/src/app/hero/hero-detail.component.spec.ts" region="title-case-pipe" header="app/hero/hero-detail.component.spec.ts (pipe test)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/hero/hero-detail.component.spec.ts (pipe test)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/hero/hero-detail.component.spec.ts (pipe test)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">it</span><span class="pun">(</span><span class="str">'should convert hero name to </span><a href="../api/platform-browser/Title.html" class="code-anchor"><span class="str">Title</span></a><span class="str"> Case'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="com">// get the name's input and display elements from the DOM</span><span class="pln">
  </span><span class="kwd">const</span><span class="pln"> hostElement</span><span class="pun">:</span><span class="pln"> </span><span class="typ">HTMLElement</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> fixture</span><span class="pun">.</span><span class="pln">nativeElement</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">const</span><span class="pln"> nameInput</span><span class="pun">:</span><span class="pln"> </span><span class="typ">HTMLInputElement</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> hostElement</span><span class="pun">.</span><span class="pln">querySelector</span><span class="pun">(</span><span class="str">'input'</span><span class="pun">)!;</span><span class="pln">
  </span><span class="kwd">const</span><span class="pln"> nameDisplay</span><span class="pun">:</span><span class="pln"> </span><span class="typ">HTMLElement</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> hostElement</span><span class="pun">.</span><span class="pln">querySelector</span><span class="pun">(</span><span class="str">'span'</span><span class="pun">)!;</span><span class="pln">

  </span><span class="com">// simulate user entering a new name into the input box</span><span class="pln">
  nameInput</span><span class="pun">.</span><span class="kwd">value</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">'quick BROWN  fOx'</span><span class="pun">;</span><span class="pln">

  </span><span class="com">// Dispatch a DOM event so that Angular learns of input value change.</span><span class="pln">
  nameInput</span><span class="pun">.</span><span class="pln">dispatchEvent</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><a href="../api/router/Event.html" class="code-anchor"><span class="typ">Event</span></a><span class="pun">(</span><span class="str">'input'</span><span class="pun">));</span><span class="pln">

  </span><span class="com">// Tell Angular to update the display binding through the title pipe</span><span class="pln">
  fixture</span><span class="pun">.</span><span class="pln">detectChanges</span><span class="pun">();</span><span class="pln">

  expect</span><span class="pun">(</span><span class="pln">nameDisplay</span><span class="pun">.</span><span class="pln">textContent</span><span class="pun">).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'Quick Brown  Fox'</span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span></code>
    </pre></aio-code></code-example>
<a class="dashAnchor" name="//apple_ref/Section/Component%20with%20external%20files"></a><h2 id="component-with-external-files">Component with external files</h2>
<p>The preceding <code>BannerComponent</code> is defined with an <em>inline template</em> and <em>inline css</em>, specified in the <code>@<a href="../api/core/Component.html#template" class="code-anchor">Component.template</a></code> and <code>@<a href="../api/core/Component.html#styles" class="code-anchor">Component.styles</a></code> properties respectively.</p>
<p>Many components specify <em>external templates</em> and <em>external css</em> with the
<code>@<a href="../api/core/Component.html#templateUrl" class="code-anchor">Component.templateUrl</a></code> and <code>@<a href="../api/core/Component.html#styleUrls" class="code-anchor">Component.styleUrls</a></code> properties respectively,
as the following variant of <code>BannerComponent</code> does.</p>
<code-example path="testing/src/app/banner/banner-external.component.ts" region="metadata" header="app/banner/banner-external.component.ts (metadata)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/banner/banner-external.component.ts (metadata)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/banner/banner-external.component.ts (metadata)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="lit">@</span><a href="../api/core/Component.html" class="code-anchor"><span class="lit">Component</span></a><span class="pun">({</span><span class="pln">
  selector</span><span class="pun">:</span><span class="pln"> </span><span class="str">'app-banner'</span><span class="pun">,</span><span class="pln">
  templateUrl</span><span class="pun">:</span><span class="pln"> </span><span class="str">'./banner-external.component.html'</span><span class="pun">,</span><span class="pln">
  styleUrls</span><span class="pun">:</span><span class="pln">  </span><span class="pun">[</span><span class="str">'./banner-external.component.css'</span><span class="pun">]</span><span class="pln">
</span><span class="pun">})</span></code>
    </pre></aio-code></code-example>
<p>This syntax tells the Angular compiler to read the external files during component compilation.</p>
<p>That's not a problem when you run the CLI <code>ng test</code> command because it
<em>compiles the application before running the tests</em>.</p>
<p>However, if you run the tests in a <strong>non-CLI environment</strong>,
tests of this component might fail.
For example, if you run the <code>BannerComponent</code> tests in a web coding environment such as <a href="https://plnkr.co/">plunker</a>, you'll see a message like this one:</p>
<code-example language="sh" hidecopy="" ng-version="13.2.2"><div style="display: none;"></div><!----><aio-code><pre class="lang-sh prettyprint">      <!---->
      <code class="animated fadeIn"><span class="typ">Error</span><span class="pun">:</span><span class="pln"> </span><span class="typ">This</span><span class="pln"> test module uses the component </span><span class="typ">BannerComponent</span><span class="pln">
which is using a </span><span class="str">"templateUrl"</span><span class="pln"> or </span><span class="str">"styleUrls"</span><span class="pun">,</span><span class="pln"> but they were never compiled</span><span class="pun">.</span><span class="pln">
</span><span class="typ">Please</span><span class="pln"> call </span><span class="str">"TestBed.compileComponents"</span><span class="pln"> before your test</span><span class="pun">.</span></code>
    </pre></aio-code></code-example>
<p>You get this test failure message when the runtime environment
compiles the source code <em>during the tests themselves</em>.</p>
<p>To correct the problem, call <code>compileComponents()</code> as explained in the following <a href="./testing-components-scenarios.html#compile-components">Calling compileComponents</a> section.</p>
<a id="component-with-dependency"></a>
<a class="dashAnchor" name="//apple_ref/Section/Component%20with%20a%20dependency"></a><h2 id="component-with-a-dependency">Component with a dependency</h2>
<p>Components often have service dependencies.</p>
<p>The <code>WelcomeComponent</code> displays a welcome message to the logged in user.
It knows who the user is based on a property of the injected <code>UserService</code>:</p>
<code-example path="testing/src/app/welcome/welcome.component.ts" header="app/welcome/welcome.component.ts" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/welcome/welcome.component.ts</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/welcome/welcome.component.ts">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="kwd">import</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><a href="../api/core/Component.html" class="code-anchor"><span class="typ">Component</span></a><span class="pun">,</span><span class="pln"> </span><a href="../api/core/OnInit.html" class="code-anchor"><span class="typ">OnInit</span></a><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> </span><span class="str">'@angular/core'</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="typ">UserService</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> </span><span class="str">'../model/user.service'</span><span class="pun">;</span><span class="pln">

</span><span class="lit">@</span><a href="../api/core/Component.html" class="code-anchor"><span class="lit">Component</span></a><span class="pun">({</span><span class="pln">
  selector</span><span class="pun">:</span><span class="pln"> </span><span class="str">'app-welcome'</span><span class="pun">,</span><span class="pln">
  </span><span class="kwd">template</span><span class="pun">:</span><span class="pln"> </span><span class="str">'&lt;h3 class="welcome"&gt;&lt;i&gt;{{welcome}}&lt;/i&gt;&lt;/h3&gt;'</span><span class="pln">
</span><span class="pun">})</span><span class="pln">
</span><span class="kwd">export</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">WelcomeComponent</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><a href="../api/core/OnInit.html" class="code-anchor"><span class="typ">OnInit</span></a><span class="pln"> </span><span class="pun">{</span><span class="pln">
  welcome </span><span class="pun">=</span><span class="pln"> </span><span class="str">''</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">constructor</span><span class="pun">(</span><span class="kwd">private</span><span class="pln"> userService</span><span class="pun">:</span><span class="pln"> </span><span class="typ">UserService</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="pun">}</span><span class="pln">

  ngOnInit</span><span class="pun">():</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">welcome </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">userService</span><span class="pun">.</span><span class="pln">isLoggedIn </span><span class="pun">?</span><span class="pln">
      </span><span class="str">'Welcome, '</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">userService</span><span class="pun">.</span><span class="pln">user</span><span class="pun">.</span><span class="pln">name </span><span class="pun">:</span><span class="pln"> </span><span class="str">'Please log in.'</span><span class="pun">;</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code>
    </pre></aio-code></code-example>
<p>The <code>WelcomeComponent</code> has decision logic that interacts with the service, logic that makes this component worth testing.
Here's the testing module configuration for the spec file:</p>
<code-example path="testing/src/app/welcome/welcome.component.spec.ts" region="config-test-module" header="app/welcome/welcome.component.spec.ts" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/welcome/welcome.component.spec.ts</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/welcome/welcome.component.spec.ts">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="typ">TestBed</span><span class="pun">.</span><span class="pln">configureTestingModule</span><span class="pun">({</span><span class="pln">
   declarations</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln"> </span><span class="typ">WelcomeComponent</span><span class="pln"> </span><span class="pun">],</span><span class="pln">
</span><span class="com">// providers: [ UserService ],  // NO! Don't provide the real service!</span><span class="pln">
                                </span><span class="com">// Provide a test-double instead</span><span class="pln">
   providers</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> provide</span><span class="pun">:</span><span class="pln"> </span><span class="typ">UserService</span><span class="pun">,</span><span class="pln"> useValue</span><span class="pun">:</span><span class="pln"> userServiceStub </span><span class="pun">}</span><span class="pln"> </span><span class="pun">],</span><span class="pln">
</span><span class="pun">});</span></code>
    </pre></aio-code></code-example>
<p>This time, in addition to declaring the <em>component-under-test</em>,
the configuration adds a <code>UserService</code> provider to the <code>providers</code> list.
But not the real <code>UserService</code>.</p>
<a id="service-test-doubles"></a>
<h4 id="provide-service-test-doubles">Provide service test doubles</h4>
<p>A <em>component-under-test</em> doesn't have to be injected with real services.
In fact, it is usually better if they are test doubles (stubs, fakes, spies, or mocks).
The purpose of the spec is to test the component, not the service,
and real services can be trouble.</p>
<p>Injecting the real <code>UserService</code> could be a nightmare.
The real service might ask the user for login credentials and
attempt to reach an authentication server.
These behaviors can be hard to intercept.
It is far easier and safer to create and register a test double in place of the real <code>UserService</code>.</p>
<p>This particular test suite supplies a minimal mock of the <code>UserService</code> that satisfies the needs of the <code>WelcomeComponent</code> and its tests:</p>
<code-example path="testing/src/app/welcome/welcome.component.spec.ts" region="user-service-stub" header="app/welcome/welcome.component.spec.ts" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/welcome/welcome.component.spec.ts</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/welcome/welcome.component.spec.ts">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="kwd">let</span><span class="pln"> userServiceStub</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Partial</span><span class="pun">&lt;</span><span class="typ">UserService</span><span class="pun">&gt;;</span><span class="pln">

  userServiceStub </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    isLoggedIn</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">,</span><span class="pln">
    user</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Test User'</span><span class="pln"> </span><span class="pun">},</span><span class="pln">
  </span><span class="pun">};</span></code>
    </pre></aio-code></code-example>
<a id="get-injected-service"></a>
<h4 id="get-injected-services">Get injected services</h4>
<p>The tests need access to the (stub) <code>UserService</code> injected into the <code>WelcomeComponent</code>.</p>
<p>Angular has a hierarchical injection system.
There can be injectors at multiple levels, from the root injector created by the <code><a href="../api/core/testing/TestBed.html" class="code-anchor">TestBed</a></code>
down through the component tree.</p>
<p>The safest way to get the injected service, the way that <strong><em>always works</em></strong>,
is to <strong>get it from the injector of the <em>component-under-test</em></strong>.
The component injector is a property of the fixture's <code><a href="../api/core/DebugElement.html" class="code-anchor">DebugElement</a></code>.</p>
<code-example path="testing/src/app/welcome/welcome.component.spec.ts" region="injected-service" header="WelcomeComponent's injector" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">WelcomeComponent's injector</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from WelcomeComponent's injector">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="com">// UserService actually injected into the component</span><span class="pln">
userService </span><span class="pun">=</span><span class="pln"> fixture</span><span class="pun">.</span><span class="pln">debugElement</span><span class="pun">.</span><span class="pln">injector</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="typ">UserService</span><span class="pun">);</span></code>
    </pre></aio-code></code-example>
<a id="testbed-inject"></a>
<h4 id="testbedinject"><em>TestBed.inject()</em></h4>
<p>You <em>might</em> also be able to get the service from the root injector using <code>TestBed.inject()</code>.
This is easier to remember and less verbose.
But it only works when Angular injects the component with the service instance in the test's root injector.</p>
<p>In this test suite, the <em>only</em> provider of <code>UserService</code> is the root testing module,
so it is safe to call <code>TestBed.inject()</code> as follows:</p>
<code-example path="testing/src/app/welcome/welcome.component.spec.ts" region="inject-from-testbed" header="TestBed injector" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">TestBed injector</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from TestBed injector">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="com">// UserService from the root injector</span><span class="pln">
userService </span><span class="pun">=</span><span class="pln"> </span><span class="typ">TestBed</span><span class="pun">.</span><span class="pln">inject</span><span class="pun">(</span><span class="typ">UserService</span><span class="pun">);</span></code>
    </pre></aio-code></code-example>
<div class="alert is-helpful">
<p>For a use case in which <code>TestBed.inject()</code> does not work,
see the <a href="./testing-components-scenarios.html#component-override"><em>Override component providers</em></a> section that
explains when and why you must get the service from the component's injector instead.</p>
</div>
<a id="welcome-spec-setup"></a>
<h4 id="final-setup-and-tests">Final setup and tests</h4>
<p>Here's the complete <code>beforeEach()</code>, using <code>TestBed.inject()</code>:</p>
<code-example path="testing/src/app/welcome/welcome.component.spec.ts" region="setup" header="app/welcome/welcome.component.spec.ts" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/welcome/welcome.component.spec.ts</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/welcome/welcome.component.spec.ts">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="kwd">let</span><span class="pln"> userServiceStub</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Partial</span><span class="pun">&lt;</span><span class="typ">UserService</span><span class="pun">&gt;;</span><span class="pln">

beforeEach</span><span class="pun">(()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="com">// stub UserService for test purposes</span><span class="pln">
  userServiceStub </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    isLoggedIn</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">,</span><span class="pln">
    user</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Test User'</span><span class="pln"> </span><span class="pun">},</span><span class="pln">
  </span><span class="pun">};</span><span class="pln">

  </span><span class="typ">TestBed</span><span class="pun">.</span><span class="pln">configureTestingModule</span><span class="pun">({</span><span class="pln">
     declarations</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln"> </span><span class="typ">WelcomeComponent</span><span class="pln"> </span><span class="pun">],</span><span class="pln">
     providers</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> provide</span><span class="pun">:</span><span class="pln"> </span><span class="typ">UserService</span><span class="pun">,</span><span class="pln"> useValue</span><span class="pun">:</span><span class="pln"> userServiceStub </span><span class="pun">}</span><span class="pln"> </span><span class="pun">],</span><span class="pln">
  </span><span class="pun">});</span><span class="pln">

  fixture </span><span class="pun">=</span><span class="pln"> </span><span class="typ">TestBed</span><span class="pun">.</span><span class="pln">createComponent</span><span class="pun">(</span><span class="typ">WelcomeComponent</span><span class="pun">);</span><span class="pln">
  comp    </span><span class="pun">=</span><span class="pln"> fixture</span><span class="pun">.</span><span class="pln">componentInstance</span><span class="pun">;</span><span class="pln">

  </span><span class="com">// UserService from the root injector</span><span class="pln">
  userService </span><span class="pun">=</span><span class="pln"> </span><span class="typ">TestBed</span><span class="pun">.</span><span class="pln">inject</span><span class="pun">(</span><span class="typ">UserService</span><span class="pun">);</span><span class="pln">

  </span><span class="com">//  get the "welcome" element by CSS selector (e.g., by class name)</span><span class="pln">
  el </span><span class="pun">=</span><span class="pln"> fixture</span><span class="pun">.</span><span class="pln">nativeElement</span><span class="pun">.</span><span class="pln">querySelector</span><span class="pun">(</span><span class="str">'.welcome'</span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span></code>
    </pre></aio-code></code-example>
<p>And here are some tests:</p>
<code-example path="testing/src/app/welcome/welcome.component.spec.ts" region="tests" header="app/welcome/welcome.component.spec.ts" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/welcome/welcome.component.spec.ts</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/welcome/welcome.component.spec.ts">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">it</span><span class="pun">(</span><span class="str">'should welcome the user'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  fixture</span><span class="pun">.</span><span class="pln">detectChanges</span><span class="pun">();</span><span class="pln">
  </span><span class="kwd">const</span><span class="pln"> content </span><span class="pun">=</span><span class="pln"> el</span><span class="pun">.</span><span class="pln">textContent</span><span class="pun">;</span><span class="pln">
  expect</span><span class="pun">(</span><span class="pln">content</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">withContext</span><span class="pun">(</span><span class="str">'"Welcome ..."'</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">toContain</span><span class="pun">(</span><span class="str">'Welcome'</span><span class="pun">);</span><span class="pln">
  expect</span><span class="pun">(</span><span class="pln">content</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">withContext</span><span class="pun">(</span><span class="str">'expected name'</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">toContain</span><span class="pun">(</span><span class="str">'Test User'</span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span><span class="pln">

it</span><span class="pun">(</span><span class="str">'should welcome "Bubba"'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  userService</span><span class="pun">.</span><span class="pln">user</span><span class="pun">.</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> </span><span class="str">'Bubba'</span><span class="pun">;</span><span class="pln"> </span><span class="com">// welcome message hasn't been shown yet</span><span class="pln">
  fixture</span><span class="pun">.</span><span class="pln">detectChanges</span><span class="pun">();</span><span class="pln">
  expect</span><span class="pun">(</span><span class="pln">el</span><span class="pun">.</span><span class="pln">textContent</span><span class="pun">).</span><span class="pln">toContain</span><span class="pun">(</span><span class="str">'Bubba'</span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span><span class="pln">

it</span><span class="pun">(</span><span class="str">'should request login if not logged in'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  userService</span><span class="pun">.</span><span class="pln">isLoggedIn </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln"> </span><span class="com">// welcome message hasn't been shown yet</span><span class="pln">
  fixture</span><span class="pun">.</span><span class="pln">detectChanges</span><span class="pun">();</span><span class="pln">
  </span><span class="kwd">const</span><span class="pln"> content </span><span class="pun">=</span><span class="pln"> el</span><span class="pun">.</span><span class="pln">textContent</span><span class="pun">;</span><span class="pln">
  expect</span><span class="pun">(</span><span class="pln">content</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">withContext</span><span class="pun">(</span><span class="str">'not welcomed'</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">.</span><span class="kwd">not</span><span class="pun">.</span><span class="pln">toContain</span><span class="pun">(</span><span class="str">'Welcome'</span><span class="pun">);</span><span class="pln">
  expect</span><span class="pun">(</span><span class="pln">content</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">withContext</span><span class="pun">(</span><span class="str">'"log in"'</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">toMatch</span><span class="pun">(</span><span class="str">/log in/</span><span class="pln">i</span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span></code>
    </pre></aio-code></code-example>
<p>The first is a sanity test; it confirms that the stubbed <code>UserService</code> is called and working.</p>
<div class="alert is-helpful">
<p>The second parameter to the Jasmine matcher (for example, <code>'expected name'</code>) is an optional failure label.
If the expectation fails, Jasmine appends this label to the expectation failure message.
In a spec with multiple expectations, it can help clarify what went wrong and which expectation failed.</p>
</div>
<p>The remaining tests confirm the logic of the component when the service returns different values.
The second test validates the effect of changing the user name.
The third test checks that the component displays the proper message when there is no logged-in user.</p>
<a class="dashAnchor" name="//apple_ref/Section/Component%20with%20async%20service"></a><a id="component-with-async-service"></a>
<h2 id="component-with-async-service">Component with async service</h2>
<p>In this sample, the <code>AboutComponent</code> template hosts a <code>TwainComponent</code>.
The <code>TwainComponent</code> displays Mark Twain quotes.</p>
<code-example path="testing/src/app/twain/twain.component.ts" region="template" header="app/twain/twain.component.ts (template)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/twain/twain.component.ts (template)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/twain/twain.component.ts (template)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="kwd">template</span><span class="pun">:</span><span class="pln"> </span><span class="str">`
  &lt;p class="twain"&gt;&lt;i&gt;{{quote | </span><a href="../api/common/AsyncPipe.html" class="code-anchor"><span class="str">async</span></a><span class="str">}}&lt;/i&gt;&lt;/p&gt;
  &lt;button type="button" (click)="getQuote()"&gt;Next quote&lt;/button&gt;
  &lt;p class="error" *</span><a href="../api/common/NgIf.html" class="code-anchor"><span class="str">ngIf</span></a><span class="str">="errorMessage"&gt;{{ errorMessage }}&lt;/p&gt;`</span><span class="pun">,</span></code>
    </pre></aio-code></code-example>
<p>Note that the value of the component's <code>quote</code> property passes through an <code><a href="../api/common/AsyncPipe.html" class="code-anchor">AsyncPipe</a></code>.
That means the property returns either a <code>Promise</code> or an <code>Observable</code>.</p>
<p>In this example, the <code>TwainComponent.getQuote()</code> method tells you that
the <code>quote</code> property returns an <code>Observable</code>.</p>
<code-example path="testing/src/app/twain/twain.component.ts" region="get-quote" header="app/twain/twain.component.ts (getQuote)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/twain/twain.component.ts (getQuote)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/twain/twain.component.ts (getQuote)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">getQuote</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">errorMessage </span><span class="pun">=</span><span class="pln"> </span><span class="str">''</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">quote </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">twainService</span><span class="pun">.</span><span class="pln">getQuote</span><span class="pun">().</span><span class="pln">pipe</span><span class="pun">(</span><span class="pln">
    startWith</span><span class="pun">(</span><span class="str">'...'</span><span class="pun">),</span><span class="pln">
    catchError</span><span class="pun">(</span><span class="pln"> </span><span class="pun">(</span><span class="pln">err</span><span class="pun">:</span><span class="pln"> any</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="com">// Wait a turn because errorMessage already set once this turn</span><span class="pln">
      setTimeout</span><span class="pun">(()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">errorMessage </span><span class="pun">=</span><span class="pln"> err</span><span class="pun">.</span><span class="pln">message </span><span class="pun">||</span><span class="pln"> err</span><span class="pun">.</span><span class="pln">toString</span><span class="pun">());</span><span class="pln">
      </span><span class="kwd">return</span><span class="pln"> of</span><span class="pun">(</span><span class="str">'...'</span><span class="pun">);</span><span class="pln"> </span><span class="com">// reset message to placeholder</span><span class="pln">
    </span><span class="pun">})</span><span class="pln">
  </span><span class="pun">);</span></code>
    </pre></aio-code></code-example>
<p>The <code>TwainComponent</code> gets quotes from an injected <code>TwainService</code>.
The component starts the returned <code>Observable</code> with a placeholder value (<code>'...'</code>),
before the service can return its first quote.</p>
<p>The <code>catchError</code> intercepts service errors, prepares an error message,
and returns the placeholder value on the success channel.
It must wait a tick to set the <code>errorMessage</code>
in order to avoid updating that message twice in the same change detection cycle.</p>
<p>These are all features you'll want to test.</p>
<h4 id="testing-with-a-spy">Testing with a spy</h4>
<p>When testing a component, only the service's public API should matter.
In general, tests themselves should not make calls to remote servers.
They should emulate such calls. The setup in this <code>app/twain/twain.component.spec.ts</code> shows one way to do that:</p>
<code-example path="testing/src/app/twain/twain.component.spec.ts" region="setup" header="app/twain/twain.component.spec.ts (setup)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/twain/twain.component.spec.ts (setup)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/twain/twain.component.spec.ts (setup)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">beforeEach</span><span class="pun">(()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  testQuote </span><span class="pun">=</span><span class="pln"> </span><span class="str">'Test Quote'</span><span class="pun">;</span><span class="pln">

  </span><span class="com">// Create a fake TwainService object with a `getQuote()` spy</span><span class="pln">
  </span><span class="kwd">const</span><span class="pln"> twainService </span><span class="pun">=</span><span class="pln"> jasmine</span><span class="pun">.</span><span class="pln">createSpyObj</span><span class="pun">(</span><span class="str">'TwainService'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">[</span><span class="str">'getQuote'</span><span class="pun">]);</span><span class="pln">
  </span><span class="com">// Make the spy return a synchronous Observable with the test data</span><span class="pln">
  getQuoteSpy </span><span class="pun">=</span><span class="pln"> twainService</span><span class="pun">.</span><span class="pln">getQuote</span><span class="pun">.</span><span class="kwd">and</span><span class="pun">.</span><span class="pln">returnValue</span><span class="pun">(</span><span class="pln">of</span><span class="pun">(</span><span class="pln">testQuote</span><span class="pun">));</span><span class="pln">

  </span><span class="typ">TestBed</span><span class="pun">.</span><span class="pln">configureTestingModule</span><span class="pun">({</span><span class="pln">
    declarations</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="typ">TwainComponent</span><span class="pun">],</span><span class="pln">
    providers</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[{</span><span class="pln">provide</span><span class="pun">:</span><span class="pln"> </span><span class="typ">TwainService</span><span class="pun">,</span><span class="pln"> useValue</span><span class="pun">:</span><span class="pln"> twainService</span><span class="pun">}]</span><span class="pln">
  </span><span class="pun">});</span><span class="pln">

  fixture </span><span class="pun">=</span><span class="pln"> </span><span class="typ">TestBed</span><span class="pun">.</span><span class="pln">createComponent</span><span class="pun">(</span><span class="typ">TwainComponent</span><span class="pun">);</span><span class="pln">
  component </span><span class="pun">=</span><span class="pln"> fixture</span><span class="pun">.</span><span class="pln">componentInstance</span><span class="pun">;</span><span class="pln">
  quoteEl </span><span class="pun">=</span><span class="pln"> fixture</span><span class="pun">.</span><span class="pln">nativeElement</span><span class="pun">.</span><span class="pln">querySelector</span><span class="pun">(</span><span class="str">'.twain'</span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span></code>
    </pre></aio-code></code-example>
<a id="service-spy"></a>
<p>Focus on the spy.</p>
<code-example path="testing/src/app/twain/twain.component.spec.ts" region="spy" ng-version="13.2.2"><div style="display: none;"></div><!----><aio-code><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="com">// Create a fake TwainService object with a `getQuote()` spy</span><span class="pln">
</span><span class="kwd">const</span><span class="pln"> twainService </span><span class="pun">=</span><span class="pln"> jasmine</span><span class="pun">.</span><span class="pln">createSpyObj</span><span class="pun">(</span><span class="str">'TwainService'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">[</span><span class="str">'getQuote'</span><span class="pun">]);</span><span class="pln">
</span><span class="com">// Make the spy return a synchronous Observable with the test data</span><span class="pln">
getQuoteSpy </span><span class="pun">=</span><span class="pln"> twainService</span><span class="pun">.</span><span class="pln">getQuote</span><span class="pun">.</span><span class="kwd">and</span><span class="pun">.</span><span class="pln">returnValue</span><span class="pun">(</span><span class="pln">of</span><span class="pun">(</span><span class="pln">testQuote</span><span class="pun">));</span></code>
    </pre></aio-code></code-example>
<p>The spy is designed such that any call to <code>getQuote</code> receives an observable with a test quote.
Unlike the real <code>getQuote()</code> method, this spy bypasses the server
and returns a synchronous observable whose value is available immediately.</p>
<p>You can write many useful tests with this spy, even though its <code>Observable</code> is synchronous.</p>
<a id="sync-tests"></a>
<h4 id="synchronous-tests">Synchronous tests</h4>
<p>A key advantage of a synchronous <code>Observable</code> is that
you can often turn asynchronous processes into synchronous tests.</p>
<code-example path="testing/src/app/twain/twain.component.spec.ts" region="sync-test" ng-version="13.2.2"><div style="display: none;"></div><!----><aio-code><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">it</span><span class="pun">(</span><span class="str">'should show quote after component initialized'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  fixture</span><span class="pun">.</span><span class="pln">detectChanges</span><span class="pun">();</span><span class="pln">  </span><span class="com">// onInit()</span><span class="pln">

  </span><span class="com">// sync spy result shows testQuote immediately after init</span><span class="pln">
  expect</span><span class="pun">(</span><span class="pln">quoteEl</span><span class="pun">.</span><span class="pln">textContent</span><span class="pun">).</span><span class="pln">toBe</span><span class="pun">(</span><span class="pln">testQuote</span><span class="pun">);</span><span class="pln">
  expect</span><span class="pun">(</span><span class="pln">getQuoteSpy</span><span class="pun">.</span><span class="pln">calls</span><span class="pun">.</span><span class="pln">any</span><span class="pun">())</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">withContext</span><span class="pun">(</span><span class="str">'getQuote called'</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">toBe</span><span class="pun">(</span><span class="kwd">true</span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span></code>
    </pre></aio-code></code-example>
<p>Because the spy result returns synchronously, the <code>getQuote()</code> method updates
the message on screen immediately <em>after</em>
the first change detection cycle during which Angular calls <code>ngOnInit</code>.</p>
<p>You're not so lucky when testing the error path.
Although the service spy will return an error synchronously,
the component method calls <code>setTimeout()</code>.
The test must wait at least one full turn of the JavaScript engine before the
value becomes available. The test must become <em>asynchronous</em>.</p>
<a id="fake-async"></a>
<h4 id="async-test-with-fakeasync">Async test with <em>fakeAsync()</em></h4>
<p>To use <code><a href="../api/core/testing/fakeAsync.html" class="code-anchor">fakeAsync</a>()</code> functionality, you must import <code>zone.js/testing</code> in your test setup file.
If you created your project with the Angular CLI, <code>zone-testing</code> is already imported in <code>src/test.ts</code>.</p>
<p>The following test confirms the expected behavior when the service returns an <code>ErrorObservable</code>.</p>
<code-example path="testing/src/app/twain/twain.component.spec.ts" region="error-test" ng-version="13.2.2"><div style="display: none;"></div><!----><aio-code><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">it</span><span class="pun">(</span><span class="str">'should display error when TwainService fails'</span><span class="pun">,</span><span class="pln"> </span><a href="../api/core/testing/fakeAsync.html" class="code-anchor"><span class="pln">fakeAsync</span></a><span class="pun">(()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
     </span><span class="com">// tell spy to return an error observable</span><span class="pln">
     getQuoteSpy</span><span class="pun">.</span><span class="kwd">and</span><span class="pun">.</span><span class="pln">returnValue</span><span class="pun">(</span><span class="pln">throwError</span><span class="pun">(()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Error</span><span class="pun">(</span><span class="str">'TwainService test failure'</span><span class="pun">)));</span><span class="pln">
     fixture</span><span class="pun">.</span><span class="pln">detectChanges</span><span class="pun">();</span><span class="pln">  </span><span class="com">// onInit()</span><span class="pln">
     </span><span class="com">// sync spy errors immediately after init</span><span class="pln">

     </span><a href="../api/core/testing/tick.html" class="code-anchor"><span class="pln">tick</span></a><span class="pun">();</span><span class="pln">  </span><span class="com">// </span><a href="../api/core/testing/flush.html" class="code-anchor"><span class="com">flush</span></a><span class="com"> the component's setTimeout()</span><span class="pln">

     fixture</span><span class="pun">.</span><span class="pln">detectChanges</span><span class="pun">();</span><span class="pln">  </span><span class="com">// update errorMessage within setTimeout()</span><span class="pln">

     expect</span><span class="pun">(</span><span class="pln">errorMessage</span><span class="pun">())</span><span class="pln">
      </span><span class="pun">.</span><span class="pln">withContext</span><span class="pun">(</span><span class="str">'should display error'</span><span class="pun">)</span><span class="pln">
      </span><span class="pun">.</span><span class="pln">toMatch</span><span class="pun">(</span><span class="str">/test failure/</span><span class="pun">,</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
     expect</span><span class="pun">(</span><span class="pln">quoteEl</span><span class="pun">.</span><span class="pln">textContent</span><span class="pun">)</span><span class="pln">
      </span><span class="pun">.</span><span class="pln">withContext</span><span class="pun">(</span><span class="str">'should show placeholder'</span><span class="pun">)</span><span class="pln">
      </span><span class="pun">.</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'...'</span><span class="pun">);</span><span class="pln">
   </span><span class="pun">}));</span></code>
    </pre></aio-code></code-example>
<p>Note that the <code>it()</code> function receives an argument of the following form.</p>
<code-example language="javascript" ng-version="13.2.2"><div style="display: none;"></div><!----><aio-code><pre class="lang-javascript prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><a href="../api/core/testing/fakeAsync.html" class="code-anchor"><span class="pln">fakeAsync</span></a><span class="pun">(()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="com">/* test body */</span><span class="pln"> </span><span class="pun">})</span></code>
    </pre></aio-code></code-example>
<p>The <code><a href="../api/core/testing/fakeAsync.html" class="code-anchor">fakeAsync</a>()</code> function enables a linear coding style by running the test body in a special <code><a href="../api/core/testing/fakeAsync.html" class="code-anchor">fakeAsync</a> test zone</code>.
The test body appears to be synchronous.
There is no nested syntax (like a <code>Promise.then()</code>) to disrupt the flow of control.</p>
<div class="alert is-helpful">
<p>Limitation: The <code><a href="../api/core/testing/fakeAsync.html" class="code-anchor">fakeAsync</a>()</code> function won't work if the test body makes an <code>XMLHttpRequest</code> (XHR) call.
XHR calls within a test are rare, but if you need to call XHR, see the <a href="./testing-components-scenarios.html#waitForAsync"><code>waitForAsync()</code></a> section.</p>
</div>
<a id="tick"></a>
<h4 id="the-tick-function">The <em>tick()</em> function</h4>
<p>You do have to call <a href="../api/core/testing/tick.html">tick()</a> to advance the (virtual) clock.</p>
<p>Calling <a href="../api/core/testing/tick.html">tick()</a> simulates the passage of time until all pending asynchronous activities finish.
In this case, it waits for the error handler's <code>setTimeout()</code>.</p>
<p>The <a href="../api/core/testing/tick.html">tick()</a> function accepts milliseconds and tickOptions as parameters, the millisecond (defaults to 0 if not provided) parameter represents how much the virtual clock advances. For example, if you have a <code>setTimeout(fn, 100)</code> in a <code><a href="../api/core/testing/fakeAsync.html" class="code-anchor">fakeAsync</a>()</code> test, you need to use tick(100) to trigger the fn callback. The tickOptions is an optional parameter with a property called <code>processNewMacroTasksSynchronously</code> (defaults to true) that represents whether to invoke new generated macro tasks when ticking.</p>
<code-example path="testing/src/app/demo/async-helper.spec.ts" region="fake-async-test-tick" ng-version="13.2.2"><div style="display: none;"></div><!----><aio-code><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">it</span><span class="pun">(</span><span class="str">'should run timeout callback with delay after call </span><a href="../api/core/testing/tick.html" class="code-anchor"><span class="str">tick</span></a><span class="str"> with millis'</span><span class="pun">,</span><span class="pln"> </span><a href="../api/core/testing/fakeAsync.html" class="code-anchor"><span class="pln">fakeAsync</span></a><span class="pun">(()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
     </span><span class="kwd">let</span><span class="pln"> called </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">
     setTimeout</span><span class="pun">(()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
       called </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">
     </span><span class="pun">},</span><span class="pln"> </span><span class="lit">100</span><span class="pun">);</span><span class="pln">
     </span><a href="../api/core/testing/tick.html" class="code-anchor"><span class="pln">tick</span></a><span class="pun">(</span><span class="lit">100</span><span class="pun">);</span><span class="pln">
     expect</span><span class="pun">(</span><span class="pln">called</span><span class="pun">).</span><span class="pln">toBe</span><span class="pun">(</span><span class="kwd">true</span><span class="pun">);</span><span class="pln">
   </span><span class="pun">}));</span></code>
    </pre></aio-code></code-example>
<p>The <a href="../api/core/testing/tick.html">tick()</a> function is one of the Angular testing utilities that you import with <code><a href="../api/core/testing/TestBed.html" class="code-anchor">TestBed</a></code>.
It's a companion to <code><a href="../api/core/testing/fakeAsync.html" class="code-anchor">fakeAsync</a>()</code> and you can only call it within a <code><a href="../api/core/testing/fakeAsync.html" class="code-anchor">fakeAsync</a>()</code> body.</p>
<h4 id="tickoptions">tickOptions</h4>
<code-example path="testing/src/app/demo/async-helper.spec.ts" region="fake-async-test-tick-new-macro-task-sync" ng-version="13.2.2"><div style="display: none;"></div><!----><aio-code><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">it</span><span class="pun">(</span><span class="str">'should run new macro task callback with delay after call </span><a href="../api/core/testing/tick.html" class="code-anchor"><span class="str">tick</span></a><span class="str"> with millis'</span><span class="pun">,</span><span class="pln">
   </span><a href="../api/core/testing/fakeAsync.html" class="code-anchor"><span class="pln">fakeAsync</span></a><span class="pun">(()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
     </span><span class="kwd">function</span><span class="pln"> nestedTimer</span><span class="pun">(</span><span class="pln">cb</span><span class="pun">:</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> any</span><span class="pun">):</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
       setTimeout</span><span class="pun">(()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> setTimeout</span><span class="pun">(()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> cb</span><span class="pun">()));</span><span class="pln">
     </span><span class="pun">}</span><span class="pln">
     </span><span class="kwd">const</span><span class="pln"> callback </span><span class="pun">=</span><span class="pln"> jasmine</span><span class="pun">.</span><span class="pln">createSpy</span><span class="pun">(</span><span class="str">'callback'</span><span class="pun">);</span><span class="pln">
     nestedTimer</span><span class="pun">(</span><span class="pln">callback</span><span class="pun">);</span><span class="pln">
     expect</span><span class="pun">(</span><span class="pln">callback</span><span class="pun">).</span><span class="kwd">not</span><span class="pun">.</span><span class="pln">toHaveBeenCalled</span><span class="pun">();</span><span class="pln">
     </span><a href="../api/core/testing/tick.html" class="code-anchor"><span class="pln">tick</span></a><span class="pun">(</span><span class="lit">0</span><span class="pun">);</span><span class="pln">
     </span><span class="com">// the nested timeout will also be triggered</span><span class="pln">
     expect</span><span class="pun">(</span><span class="pln">callback</span><span class="pun">).</span><span class="pln">toHaveBeenCalled</span><span class="pun">();</span><span class="pln">
   </span><span class="pun">}));</span></code>
    </pre></aio-code></code-example>
<p>In this example, you have a new macro task (nested setTimeout), by default, when the <code><a href="../api/core/testing/tick.html" class="code-anchor">tick</a></code> is setTimeout <code>outside</code> and <code>nested</code> will both be triggered.</p>
<code-example path="testing/src/app/demo/async-helper.spec.ts" region="fake-async-test-tick-new-macro-task-async" ng-version="13.2.2"><div style="display: none;"></div><!----><aio-code><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">it</span><span class="pun">(</span><span class="str">'should not run new macro task callback with delay after call </span><a href="../api/core/testing/tick.html" class="code-anchor"><span class="str">tick</span></a><span class="str"> with millis'</span><span class="pun">,</span><span class="pln">
   </span><a href="../api/core/testing/fakeAsync.html" class="code-anchor"><span class="pln">fakeAsync</span></a><span class="pun">(()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
     </span><span class="kwd">function</span><span class="pln"> nestedTimer</span><span class="pun">(</span><span class="pln">cb</span><span class="pun">:</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> any</span><span class="pun">):</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
       setTimeout</span><span class="pun">(()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> setTimeout</span><span class="pun">(()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> cb</span><span class="pun">()));</span><span class="pln">
     </span><span class="pun">}</span><span class="pln">
     </span><span class="kwd">const</span><span class="pln"> callback </span><span class="pun">=</span><span class="pln"> jasmine</span><span class="pun">.</span><span class="pln">createSpy</span><span class="pun">(</span><span class="str">'callback'</span><span class="pun">);</span><span class="pln">
     nestedTimer</span><span class="pun">(</span><span class="pln">callback</span><span class="pun">);</span><span class="pln">
     expect</span><span class="pun">(</span><span class="pln">callback</span><span class="pun">).</span><span class="kwd">not</span><span class="pun">.</span><span class="pln">toHaveBeenCalled</span><span class="pun">();</span><span class="pln">
     </span><a href="../api/core/testing/tick.html" class="code-anchor"><span class="pln">tick</span></a><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="pln">processNewMacroTasksSynchronously</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">});</span><span class="pln">
     </span><span class="com">// the nested timeout will not be triggered</span><span class="pln">
     expect</span><span class="pun">(</span><span class="pln">callback</span><span class="pun">).</span><span class="kwd">not</span><span class="pun">.</span><span class="pln">toHaveBeenCalled</span><span class="pun">();</span><span class="pln">
     </span><a href="../api/core/testing/tick.html" class="code-anchor"><span class="pln">tick</span></a><span class="pun">(</span><span class="lit">0</span><span class="pun">);</span><span class="pln">
     expect</span><span class="pun">(</span><span class="pln">callback</span><span class="pun">).</span><span class="pln">toHaveBeenCalled</span><span class="pun">();</span><span class="pln">
   </span><span class="pun">}));</span></code>
    </pre></aio-code></code-example>
<p>And in some case, you don't want to trigger the new macro task when ticking, you can use <code><a href="../api/core/testing/tick.html" class="code-anchor">tick</a>(milliseconds, {processNewMacroTasksSynchronously: false})</code> to not invoke new macro task.</p>
<h4 id="comparing-dates-inside-fakeasync">Comparing dates inside fakeAsync()</h4>
<p><code><a href="../api/core/testing/fakeAsync.html" class="code-anchor">fakeAsync</a>()</code> simulates passage of time, which lets you calculate the difference between dates inside <code><a href="../api/core/testing/fakeAsync.html" class="code-anchor">fakeAsync</a>()</code>.</p>
<code-example path="testing/src/app/demo/async-helper.spec.ts" region="fake-async-test-date" ng-version="13.2.2"><div style="display: none;"></div><!----><aio-code><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">it</span><span class="pun">(</span><span class="str">'should get Date diff correctly in </span><a href="../api/core/testing/fakeAsync.html" class="code-anchor"><span class="str">fakeAsync</span></a><span class="str">'</span><span class="pun">,</span><span class="pln"> </span><a href="../api/core/testing/fakeAsync.html" class="code-anchor"><span class="pln">fakeAsync</span></a><span class="pun">(()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
     </span><span class="kwd">const</span><span class="pln"> start </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Date</span><span class="pun">.</span><span class="pln">now</span><span class="pun">();</span><span class="pln">
     </span><a href="../api/core/testing/tick.html" class="code-anchor"><span class="pln">tick</span></a><span class="pun">(</span><span class="lit">100</span><span class="pun">);</span><span class="pln">
     </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">end</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Date</span><span class="pun">.</span><span class="pln">now</span><span class="pun">();</span><span class="pln">
     expect</span><span class="pun">(</span><span class="kwd">end</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> start</span><span class="pun">).</span><span class="pln">toBe</span><span class="pun">(</span><span class="lit">100</span><span class="pun">);</span><span class="pln">
   </span><span class="pun">}));</span></code>
    </pre></aio-code></code-example>
<h4 id="jasmineclock-with-fakeasync">jasmine.clock with fakeAsync()</h4>
<p>Jasmine also provides a <code>clock</code> feature to mock dates. Angular automatically runs tests that are run after
<code>jasmine.clock().install()</code> is called inside a <code><a href="../api/core/testing/fakeAsync.html" class="code-anchor">fakeAsync</a>()</code> method until <code>jasmine.clock().uninstall()</code> is called. <code><a href="../api/core/testing/fakeAsync.html" class="code-anchor">fakeAsync</a>()</code> is not needed and throws an error if nested.</p>
<p>By default, this feature is disabled. To enable it, set a global flag before importing <code>zone-testing</code>.</p>
<p>If you use the Angular CLI, configure this flag in <code>src/test.ts</code>.</p>
<code-example ng-version="13.2.2"><div style="display: none;"></div><!----><aio-code><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pun">(</span><span class="pln">window </span><span class="kwd">as</span><span class="pln"> any</span><span class="pun">)[</span><span class="str">'__zone_symbol__fakeAsyncPatchLock'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> </span><span class="str">'zone.js/testing'</span><span class="pun">;</span></code>
    </pre></aio-code></code-example>
<code-example path="testing/src/app/demo/async-helper.spec.ts" region="fake-async-test-clock" ng-version="13.2.2"><div style="display: none;"></div><!----><aio-code><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">describe</span><span class="pun">(</span><span class="str">'use jasmine.clock()'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="com">// need to config __zone_symbol__fakeAsyncPatchLock flag</span><span class="pln">
  </span><span class="com">// before loading zone.js/testing</span><span class="pln">
  beforeEach</span><span class="pun">(()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    jasmine</span><span class="pun">.</span><span class="pln">clock</span><span class="pun">().</span><span class="pln">install</span><span class="pun">();</span><span class="pln">
  </span><span class="pun">});</span><span class="pln">
  afterEach</span><span class="pun">(()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    jasmine</span><span class="pun">.</span><span class="pln">clock</span><span class="pun">().</span><span class="pln">uninstall</span><span class="pun">();</span><span class="pln">
  </span><span class="pun">});</span><span class="pln">
  it</span><span class="pun">(</span><span class="str">'should auto enter </span><a href="../api/core/testing/fakeAsync.html" class="code-anchor"><span class="str">fakeAsync</span></a><span class="str">'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="com">// is in </span><a href="../api/core/testing/fakeAsync.html" class="code-anchor"><span class="com">fakeAsync</span></a><span class="com"> now, don't need to call </span><a href="../api/core/testing/fakeAsync.html" class="code-anchor"><span class="com">fakeAsync</span></a><span class="com">(testFn)</span><span class="pln">
    </span><span class="kwd">let</span><span class="pln"> called </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">
    setTimeout</span><span class="pun">(()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      called </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">},</span><span class="pln"> </span><span class="lit">100</span><span class="pun">);</span><span class="pln">
    jasmine</span><span class="pun">.</span><span class="pln">clock</span><span class="pun">().</span><span class="pln">tick</span><span class="pun">(</span><span class="lit">100</span><span class="pun">);</span><span class="pln">
    expect</span><span class="pun">(</span><span class="pln">called</span><span class="pun">).</span><span class="pln">toBe</span><span class="pun">(</span><span class="kwd">true</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">});</span><span class="pln">
</span><span class="pun">});</span></code>
    </pre></aio-code></code-example>
<h4 id="using-the-rxjs-scheduler-inside-fakeasync">Using the RxJS scheduler inside fakeAsync()</h4>
<p>You can also use RxJS scheduler in <code><a href="../api/core/testing/fakeAsync.html" class="code-anchor">fakeAsync</a>()</code> just like using <code>setTimeout()</code> or <code>setInterval()</code>, but you need to import <code>zone.js/plugins/zone-patch-rxjs-fake-async</code> to patch RxJS scheduler.
<code-example path="testing/src/app/demo/async-helper.spec.ts" region="fake-async-test-rxjs" ng-version="13.2.2"></code-example></p><div style="display: none;"></div><!----><aio-code><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">it</span><span class="pun">(</span><span class="str">'should get Date diff correctly in </span><a href="../api/core/testing/fakeAsync.html" class="code-anchor"><span class="str">fakeAsync</span></a><span class="str"> with rxjs scheduler'</span><span class="pun">,</span><span class="pln"> </span><a href="../api/core/testing/fakeAsync.html" class="code-anchor"><span class="pln">fakeAsync</span></a><span class="pun">(()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
     </span><span class="com">// need to add `import 'zone.js/plugins/zone-patch-rxjs-fake-async'</span><span class="pln">
     </span><span class="com">// to patch rxjs scheduler</span><span class="pln">
     </span><span class="kwd">let</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> </span><span class="str">''</span><span class="pun">;</span><span class="pln">
     of</span><span class="pun">(</span><span class="str">'hello'</span><span class="pun">).</span><span class="pln">pipe</span><span class="pun">(</span><span class="pln">delay</span><span class="pun">(</span><span class="lit">1000</span><span class="pun">)).</span><span class="pln">subscribe</span><span class="pun">(</span><span class="pln">v </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
       result </span><span class="pun">=</span><span class="pln"> v</span><span class="pun">;</span><span class="pln">
     </span><span class="pun">});</span><span class="pln">
     expect</span><span class="pun">(</span><span class="pln">result</span><span class="pun">).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">''</span><span class="pun">);</span><span class="pln">
     </span><a href="../api/core/testing/tick.html" class="code-anchor"><span class="pln">tick</span></a><span class="pun">(</span><span class="lit">1000</span><span class="pun">);</span><span class="pln">
     expect</span><span class="pun">(</span><span class="pln">result</span><span class="pun">).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'hello'</span><span class="pun">);</span><span class="pln">

     </span><span class="kwd">const</span><span class="pln"> start </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Date</span><span class="pun">().</span><span class="pln">getTime</span><span class="pun">();</span><span class="pln">
     </span><span class="kwd">let</span><span class="pln"> dateDiff </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
     interval</span><span class="pun">(</span><span class="lit">1000</span><span class="pun">).</span><span class="pln">pipe</span><span class="pun">(</span><span class="pln">take</span><span class="pun">(</span><span class="lit">2</span><span class="pun">)).</span><span class="pln">subscribe</span><span class="pun">(()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> dateDiff </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Date</span><span class="pun">().</span><span class="pln">getTime</span><span class="pun">()</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> start</span><span class="pun">));</span><span class="pln">

     </span><a href="../api/core/testing/tick.html" class="code-anchor"><span class="pln">tick</span></a><span class="pun">(</span><span class="lit">1000</span><span class="pun">);</span><span class="pln">
     expect</span><span class="pun">(</span><span class="pln">dateDiff</span><span class="pun">).</span><span class="pln">toBe</span><span class="pun">(</span><span class="lit">1000</span><span class="pun">);</span><span class="pln">
     </span><a href="../api/core/testing/tick.html" class="code-anchor"><span class="pln">tick</span></a><span class="pun">(</span><span class="lit">1000</span><span class="pun">);</span><span class="pln">
     expect</span><span class="pun">(</span><span class="pln">dateDiff</span><span class="pun">).</span><span class="pln">toBe</span><span class="pun">(</span><span class="lit">2000</span><span class="pun">);</span><span class="pln">
   </span><span class="pun">}));</span></code>
    </pre></aio-code><p></p>
<h4 id="support-more-macrotasks">Support more macroTasks</h4>
<p>By default, <code><a href="../api/core/testing/fakeAsync.html" class="code-anchor">fakeAsync</a>()</code> supports the following macro tasks.</p>
<ul>
<li><code>setTimeout</code></li>
<li><code>setInterval</code></li>
<li><code>requestAnimationFrame</code></li>
<li><code>webkitRequestAnimationFrame</code></li>
<li><code>mozRequestAnimationFrame</code></li>
</ul>
<p>If you run other macro tasks such as <code>HTMLCanvasElement.toBlob()</code>, an <em>"Unknown macroTask scheduled in fake async test"</em> error is thrown.</p>
<code-tabs ng-version="13.2.2"><div style="display: none;"></div><mat-card class="mat-card mat-focus-indicator"><mat-tab-group class="mat-tab-group code-tab-group mat-primary"><mat-tab-header class="mat-tab-header"><div aria-hidden="true" mat-ripple="" class="mat-ripple mat-tab-header-pagination mat-tab-header-pagination-before mat-elevation-z4 mat-tab-header-pagination-disabled"><div class="mat-tab-header-pagination-chevron"></div></div><div class="mat-tab-label-container"><div role="tablist" class="mat-tab-list" style="transform: translateX(0px);"><div class="mat-tab-labels"><div role="tab" mattablabelwrapper="" mat-ripple="" cdkmonitorelementfocus="" class="mat-ripple mat-tab-label mat-focus-indicator mat-tab-label-active ng-star-inserted" id="mat-tab-label-0-0" tabindex="0" aria-posinset="1" aria-setsize="2" aria-controls="mat-tab-content-0-0" aria-selected="true" aria-disabled="false"><div class="mat-tab-label-content"><span class="ng-star-inserted">src/app/shared/canvas.component.spec.ts (failing)</span><!----><!----><!----></div></div><div role="tab" mattablabelwrapper="" mat-ripple="" cdkmonitorelementfocus="" class="mat-ripple mat-tab-label mat-focus-indicator ng-star-inserted" id="mat-tab-label-0-1" tabindex="-1" aria-posinset="2" aria-setsize="2" aria-controls="mat-tab-content-0-1" aria-selected="false" aria-disabled="false"><div class="mat-tab-label-content"><span class="ng-star-inserted">src/app/shared/canvas.component.ts</span><!----><!----><!----></div></div><!----></div><mat-ink-bar class="mat-ink-bar"></mat-ink-bar></div></div><div aria-hidden="true" mat-ripple="" class="mat-ripple mat-tab-header-pagination mat-tab-header-pagination-after mat-elevation-z4 mat-tab-header-pagination-disabled"><div class="mat-tab-header-pagination-chevron"></div></div></mat-tab-header><div class="mat-tab-body-wrapper"><mat-tab-body role="tabpanel" class="mat-tab-body ng-tns-c51-2 mat-tab-body-active ng-star-inserted" id="mat-tab-content-0-0" aria-labelledby="mat-tab-label-0-0"><div cdkscrollable="" class="mat-tab-body-content ng-tns-c51-2 ng-trigger ng-trigger-translateTab" style="transform: none;"><!----><aio-code class="ng-star-inserted" style=""><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from src/app/shared/canvas.component.spec.ts (failing)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="kwd">import</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><a href="../api/core/testing/fakeAsync.html" class="code-anchor"><span class="pln">fakeAsync</span></a><span class="pun">,</span><span class="pln"> </span><a href="../api/core/testing/TestBed.html" class="code-anchor"><span class="typ">TestBed</span></a><span class="pun">,</span><span class="pln"> </span><a href="../api/core/testing/tick.html" class="code-anchor"><span class="pln">tick</span></a><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> </span><span class="str">'@angular/core/testing'</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="typ">CanvasComponent</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> </span><span class="str">'./canvas.component'</span><span class="pun">;</span><span class="pln">

describe</span><span class="pun">(</span><span class="str">'CanvasComponent'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  beforeEach</span><span class="pun">(</span><span class="kwd">async</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">await</span><span class="pln"> </span><a href="../api/core/testing/TestBed.html" class="code-anchor"><span class="typ">TestBed</span></a><span class="pln">
        </span><span class="pun">.</span><span class="pln">configureTestingModule</span><span class="pun">({</span><span class="pln">
          declarations</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="typ">CanvasComponent</span><span class="pun">],</span><span class="pln">
        </span><span class="pun">})</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">compileComponents</span><span class="pun">();</span><span class="pln">
  </span><span class="pun">});</span><span class="pln">

  it</span><span class="pun">(</span><span class="str">'should be able to generate blob data from canvas'</span><span class="pun">,</span><span class="pln"> </span><a href="../api/core/testing/fakeAsync.html" class="code-anchor"><span class="pln">fakeAsync</span></a><span class="pun">(()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
       </span><span class="kwd">const</span><span class="pln"> fixture </span><span class="pun">=</span><span class="pln"> </span><span class="typ">TestBed</span><span class="pun">.</span><span class="pln">createComponent</span><span class="pun">(</span><span class="typ">CanvasComponent</span><span class="pun">);</span><span class="pln">
       </span><span class="kwd">const</span><span class="pln"> canvasComp </span><span class="pun">=</span><span class="pln"> fixture</span><span class="pun">.</span><span class="pln">componentInstance</span><span class="pun">;</span><span class="pln">

       fixture</span><span class="pun">.</span><span class="pln">detectChanges</span><span class="pun">();</span><span class="pln">
       expect</span><span class="pun">(</span><span class="pln">canvasComp</span><span class="pun">.</span><span class="pln">blobSize</span><span class="pun">).</span><span class="pln">toBe</span><span class="pun">(</span><span class="lit">0</span><span class="pun">);</span><span class="pln">

       </span><a href="../api/core/testing/tick.html" class="code-anchor"><span class="pln">tick</span></a><span class="pun">();</span><span class="pln">
       expect</span><span class="pun">(</span><span class="pln">canvasComp</span><span class="pun">.</span><span class="pln">blobSize</span><span class="pun">).</span><span class="pln">toBeGreaterThan</span><span class="pun">(</span><span class="lit">0</span><span class="pun">);</span><span class="pln">
     </span><span class="pun">}));</span><span class="pln">
</span><span class="pun">});</span></code>
    </pre></aio-code><!----></div></mat-tab-body><mat-tab-body role="tabpanel" class="mat-tab-body ng-tns-c51-3 ng-star-inserted" id="mat-tab-content-0-1" aria-labelledby="mat-tab-label-0-1"><div cdkscrollable="" class="mat-tab-body-content ng-tns-c51-3 ng-trigger ng-trigger-translateTab" style="transform: translate3d(100%, 0px, 0px); min-height: 1px;"><!----></div></mat-tab-body><!----></div></mat-tab-group></mat-card></code-tabs>
<p>If you want to support such a case, you need to define the macro task you want to support in <code>beforeEach()</code>.
For example:</p>
<code-example header="src/app/shared/canvas.component.spec.ts (excerpt)" path="testing/src/app/shared/canvas.component.spec.ts" region="enable-toBlob-macrotask" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">src/app/shared/canvas.component.spec.ts (excerpt)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from src/app/shared/canvas.component.spec.ts (excerpt)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">beforeEach</span><span class="pun">(()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="pun">(</span><span class="pln">window </span><span class="kwd">as</span><span class="pln"> any</span><span class="pun">).</span><span class="pln">__zone_symbol__FakeAsyncTestMacroTask </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">
    </span><span class="pun">{</span><span class="pln">
      source</span><span class="pun">:</span><span class="pln"> </span><span class="str">'HTMLCanvasElement.toBlob'</span><span class="pun">,</span><span class="pln">
      callbackArgs</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[{</span><span class="pln">size</span><span class="pun">:</span><span class="pln"> </span><span class="lit">200</span><span class="pun">}],</span><span class="pln">
    </span><span class="pun">},</span><span class="pln">
  </span><span class="pun">];</span><span class="pln">
</span><span class="pun">});</span></code>
    </pre></aio-code></code-example>
<p>Note that in order to make the <code>&lt;canvas&gt;</code> element Zone.js-aware in your app, you need to import the <code>zone-patch-canvas</code> patch (either in <code>polyfills.ts</code> or in the specific file that uses <code>&lt;canvas&gt;</code>):</p>
<code-example header="src/polyfills.ts or src/app/shared/canvas.component.ts" path="testing/src/app/shared/canvas.component.ts" region="import-canvas-patch" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">src/polyfills.ts or src/app/shared/canvas.component.ts</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from src/polyfills.ts or src/app/shared/canvas.component.ts">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="com">// Import patch to make async `HTMLCanvasElement` methods (such as `.toBlob()`) Zone.js-aware.</span><span class="pln">
</span><span class="com">// Either import in `polyfills.ts` (if used in more than one places in the app) or in the component</span><span class="pln">
</span><span class="com">// file using `HTMLCanvasElement` (if it is only used in a single file).</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> </span><span class="str">'zone.js/plugins/zone-patch-canvas'</span><span class="pun">;</span></code>
    </pre></aio-code></code-example>
<h4 id="async-observables">Async observables</h4>
<p>You might be satisfied with the test coverage of these tests.</p>
<p>However, you might be troubled by the fact that the real service doesn't quite behave this way.
The real service sends requests to a remote server.
A server takes time to respond and the response certainly won't be available immediately
as in the previous two tests.</p>
<p>Your tests will reflect the real world more faithfully if you return an <em>asynchronous</em> observable
from the <code>getQuote()</code> spy like this.</p>
<code-example path="testing/src/app/twain/twain.component.spec.ts" region="async-setup" ng-version="13.2.2"><div style="display: none;"></div><!----><aio-code><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="com">// Simulate delayed observable values with the `asyncData()` helper</span><span class="pln">
getQuoteSpy</span><span class="pun">.</span><span class="kwd">and</span><span class="pun">.</span><span class="pln">returnValue</span><span class="pun">(</span><span class="pln">asyncData</span><span class="pun">(</span><span class="pln">testQuote</span><span class="pun">));</span></code>
    </pre></aio-code></code-example>
<h4 id="async-observable-helpers">Async observable helpers</h4>
<p>The async observable was produced by an <code>asyncData</code> helper.
The <code>asyncData</code> helper is a utility function that you'll have to write yourself, or copy this one from the sample code.</p>
<code-example path="testing/src/testing/async-observable-helpers.ts" region="async-data" header="testing/async-observable-helpers.ts" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">testing/async-observable-helpers.ts</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from testing/async-observable-helpers.ts">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="com">/**
 * Create async observable that emits-once and completes
 * after a JS engine turn
 */</span><span class="pln">
</span><span class="kwd">export</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> asyncData</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;(</span><span class="pln">data</span><span class="pun">:</span><span class="pln"> T</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">return</span><span class="pln"> defer</span><span class="pun">(()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="typ">Promise</span><span class="pun">.</span><span class="pln">resolve</span><span class="pun">(</span><span class="pln">data</span><span class="pun">));</span><span class="pln">
</span><span class="pun">}</span></code>
    </pre></aio-code></code-example>
<p>This helper's observable emits the <code>data</code> value in the next turn of the JavaScript engine.</p>
<p>The <a href="http://reactivex.io/documentation/operators/defer.html">RxJS <code>defer()</code> operator</a> returns an observable.
It takes a factory function that returns either a promise or an observable.
When something subscribes to <em>defer</em>'s observable,
it adds the subscriber to a new observable created with that factory.</p>
<p>The <code>defer()</code> operator transforms the <code>Promise.resolve()</code> into a new observable that,
like <code><a href="../api/common/http/HttpClient.html" class="code-anchor">HttpClient</a></code>, emits once and completes.
Subscribers are unsubscribed after they receive the data value.</p>
<p>There's a similar helper for producing an async error.</p>
<code-example path="testing/src/testing/async-observable-helpers.ts" region="async-error" ng-version="13.2.2"><div style="display: none;"></div><!----><aio-code><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="com">/**
 * Create async observable error that errors
 * after a JS engine turn
 */</span><span class="pln">
</span><span class="kwd">export</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> asyncError</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;(</span><span class="pln">errorObject</span><span class="pun">:</span><span class="pln"> any</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">return</span><span class="pln"> defer</span><span class="pun">(()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="typ">Promise</span><span class="pun">.</span><span class="pln">reject</span><span class="pun">(</span><span class="pln">errorObject</span><span class="pun">));</span><span class="pln">
</span><span class="pun">}</span></code>
    </pre></aio-code></code-example>
<h4 id="more-async-tests">More async tests</h4>
<p>Now that the <code>getQuote()</code> spy is returning async observables,
most of your tests will have to be async as well.</p>
<p>Here's a <code><a href="../api/core/testing/fakeAsync.html" class="code-anchor">fakeAsync</a>()</code> test that demonstrates the data flow you'd expect
in the real world.</p>
<code-example path="testing/src/app/twain/twain.component.spec.ts" region="fake-async-test" ng-version="13.2.2"><div style="display: none;"></div><!----><aio-code><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">it</span><span class="pun">(</span><span class="str">'should show quote after getQuote (</span><a href="../api/core/testing/fakeAsync.html" class="code-anchor"><span class="str">fakeAsync</span></a><span class="str">)'</span><span class="pun">,</span><span class="pln"> </span><a href="../api/core/testing/fakeAsync.html" class="code-anchor"><span class="pln">fakeAsync</span></a><span class="pun">(()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
     fixture</span><span class="pun">.</span><span class="pln">detectChanges</span><span class="pun">();</span><span class="pln">  </span><span class="com">// ngOnInit()</span><span class="pln">
     expect</span><span class="pun">(</span><span class="pln">quoteEl</span><span class="pun">.</span><span class="pln">textContent</span><span class="pun">)</span><span class="pln">
      </span><span class="pun">.</span><span class="pln">withContext</span><span class="pun">(</span><span class="str">'should show placeholder'</span><span class="pun">)</span><span class="pln">
      </span><span class="pun">.</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'...'</span><span class="pun">);</span><span class="pln">

     </span><a href="../api/core/testing/tick.html" class="code-anchor"><span class="pln">tick</span></a><span class="pun">();</span><span class="pln">                   </span><span class="com">// </span><a href="../api/core/testing/flush.html" class="code-anchor"><span class="com">flush</span></a><span class="com"> the observable to get the quote</span><span class="pln">
     fixture</span><span class="pun">.</span><span class="pln">detectChanges</span><span class="pun">();</span><span class="pln">  </span><span class="com">// update view</span><span class="pln">

     expect</span><span class="pun">(</span><span class="pln">quoteEl</span><span class="pun">.</span><span class="pln">textContent</span><span class="pun">)</span><span class="pln">
      </span><span class="pun">.</span><span class="pln">withContext</span><span class="pun">(</span><span class="str">'should show quote'</span><span class="pun">)</span><span class="pln">
      </span><span class="pun">.</span><span class="pln">toBe</span><span class="pun">(</span><span class="pln">testQuote</span><span class="pun">);</span><span class="pln">
     expect</span><span class="pun">(</span><span class="pln">errorMessage</span><span class="pun">())</span><span class="pln">
      </span><span class="pun">.</span><span class="pln">withContext</span><span class="pun">(</span><span class="str">'should not show error'</span><span class="pun">)</span><span class="pln">
      </span><span class="pun">.</span><span class="pln">toBeNull</span><span class="pun">();</span><span class="pln">
   </span><span class="pun">}));</span></code>
    </pre></aio-code></code-example>
<p>Notice that the quote element displays the placeholder value (<code>'...'</code>) after <code>ngOnInit()</code>.
The first quote hasn't arrived yet.</p>
<p>To flush the first quote from the observable, you call <a href="../api/core/testing/tick.html">tick()</a>.
Then call <code>detectChanges()</code> to tell Angular to update the screen.</p>
<p>Then you can assert that the quote element displays the expected text.</p>
<a id="waitForAsync"></a>
<h4 id="async-test-with-waitforasync">Async test with <em>waitForAsync()</em></h4>
<p>To use <code><a href="../api/core/testing/waitForAsync.html" class="code-anchor">waitForAsync</a>()</code> functionality, you must import <code>zone.js/testing</code> in your test setup file.
If you created your project with the Angular CLI, <code>zone-testing</code> is already imported in <code>src/test.ts</code>.</p>
<p>Here's the previous <code><a href="../api/core/testing/fakeAsync.html" class="code-anchor">fakeAsync</a>()</code> test, re-written with the <code><a href="../api/core/testing/waitForAsync.html" class="code-anchor">waitForAsync</a>()</code> utility.</p>
<code-example path="testing/src/app/twain/twain.component.spec.ts" region="waitForAsync-test" ng-version="13.2.2"><div style="display: none;"></div><!----><aio-code><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">it</span><span class="pun">(</span><span class="str">'should show quote after getQuote (</span><a href="../api/core/testing/waitForAsync.html" class="code-anchor"><span class="str">waitForAsync</span></a><span class="str">)'</span><span class="pun">,</span><span class="pln"> </span><a href="../api/core/testing/waitForAsync.html" class="code-anchor"><span class="pln">waitForAsync</span></a><span class="pun">(()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
     fixture</span><span class="pun">.</span><span class="pln">detectChanges</span><span class="pun">();</span><span class="pln">  </span><span class="com">// ngOnInit()</span><span class="pln">
     expect</span><span class="pun">(</span><span class="pln">quoteEl</span><span class="pun">.</span><span class="pln">textContent</span><span class="pun">)</span><span class="pln">
      </span><span class="pun">.</span><span class="pln">withContext</span><span class="pun">(</span><span class="str">'should show placeholder'</span><span class="pun">)</span><span class="pln">
      </span><span class="pun">.</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'...'</span><span class="pun">);</span><span class="pln">

     fixture</span><span class="pun">.</span><span class="pln">whenStable</span><span class="pun">().</span><span class="kwd">then</span><span class="pun">(()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">// wait for async getQuote</span><span class="pln">
       fixture</span><span class="pun">.</span><span class="pln">detectChanges</span><span class="pun">();</span><span class="pln">         </span><span class="com">// update view with quote</span><span class="pln">
       expect</span><span class="pun">(</span><span class="pln">quoteEl</span><span class="pun">.</span><span class="pln">textContent</span><span class="pun">).</span><span class="pln">toBe</span><span class="pun">(</span><span class="pln">testQuote</span><span class="pun">);</span><span class="pln">
       expect</span><span class="pun">(</span><span class="pln">errorMessage</span><span class="pun">())</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">withContext</span><span class="pun">(</span><span class="str">'should not show error'</span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">toBeNull</span><span class="pun">();</span><span class="pln">
     </span><span class="pun">});</span><span class="pln">
   </span><span class="pun">}));</span></code>
    </pre></aio-code></code-example>
<p>The <code><a href="../api/core/testing/waitForAsync.html" class="code-anchor">waitForAsync</a>()</code> utility hides some asynchronous boilerplate by arranging for the tester's code
to run in a special <em>async test zone</em>.
You don't need to pass Jasmine's <code>done()</code> into the test and call <code>done()</code> because it is <code>undefined</code> in promise or observable callbacks.</p>
<p>But the test's asynchronous nature is revealed by the call to <code>fixture.whenStable()</code>,
which breaks the linear flow of control.</p>
<p>When using an <code>intervalTimer()</code> such as <code>setInterval()</code> in <code><a href="../api/core/testing/waitForAsync.html" class="code-anchor">waitForAsync</a>()</code>, remember to cancel the timer with <code>clearInterval()</code> after the test, otherwise the <code><a href="../api/core/testing/waitForAsync.html" class="code-anchor">waitForAsync</a>()</code> never ends.</p>
<a id="when-stable"></a>
<h4 id="whenstable"><em>whenStable</em></h4>
<p>The test must wait for the <code>getQuote()</code> observable to emit the next quote.
Instead of calling <a href="../api/core/testing/tick.html">tick()</a>, it calls <code>fixture.whenStable()</code>.</p>
<p>The <code>fixture.whenStable()</code> returns a promise that resolves when the JavaScript engine's
task queue becomes empty.
In this example, the task queue becomes empty when the observable emits the first quote.</p>
<p>The test resumes within the promise callback, which calls <code>detectChanges()</code> to
update the quote element with the expected text.</p>
<a id="jasmine-done"></a>
<h4 id="jasmine-done">Jasmine <em>done()</em></h4>
<p>While the <code><a href="../api/core/testing/waitForAsync.html" class="code-anchor">waitForAsync</a>()</code> and <code><a href="../api/core/testing/fakeAsync.html" class="code-anchor">fakeAsync</a>()</code> functions greatly
simplify Angular asynchronous testing,
you can still fall back to the traditional technique
and pass <code>it</code> a function that takes a
<a href="https://jasmine.github.io/2.0/introduction.html#section-Asynchronous_Support"><code>done</code> callback</a>.</p>
<p>You can't call <code>done()</code> in <code><a href="../api/core/testing/waitForAsync.html" class="code-anchor">waitForAsync</a>()</code> or <code><a href="../api/core/testing/fakeAsync.html" class="code-anchor">fakeAsync</a>()</code> functions, because the <code>done parameter</code>
is <code>undefined</code>.</p>
<p>Now you are responsible for chaining promises, handling errors, and calling <code>done()</code> at the appropriate moments.</p>
<p>Writing test functions with <code>done()</code>, is more cumbersome than <code><a href="../api/core/testing/waitForAsync.html" class="code-anchor">waitForAsync</a>()</code>and <code><a href="../api/core/testing/fakeAsync.html" class="code-anchor">fakeAsync</a>()</code>, but it is occasionally necessary when code involves the <code>intervalTimer()</code> like <code>setInterval</code>.</p>
<p>Here are two more versions of the previous test, written with <code>done()</code>.
The first one subscribes to the <code>Observable</code> exposed to the template by the component's <code>quote</code> property.</p>
<code-example path="testing/src/app/twain/twain.component.spec.ts" region="quote-done-test" ng-version="13.2.2"><div style="display: none;"></div><!----><aio-code><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">it</span><span class="pun">(</span><span class="str">'should show last quote (quote done)'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">done</span><span class="pun">:</span><span class="pln"> </span><span class="typ">DoneFn</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  fixture</span><span class="pun">.</span><span class="pln">detectChanges</span><span class="pun">();</span><span class="pln">

  component</span><span class="pun">.</span><span class="pln">quote</span><span class="pun">.</span><span class="pln">pipe</span><span class="pun">(</span><span class="kwd">last</span><span class="pun">()).</span><span class="pln">subscribe</span><span class="pun">(()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    fixture</span><span class="pun">.</span><span class="pln">detectChanges</span><span class="pun">();</span><span class="pln">  </span><span class="com">// update view with quote</span><span class="pln">
    expect</span><span class="pun">(</span><span class="pln">quoteEl</span><span class="pun">.</span><span class="pln">textContent</span><span class="pun">).</span><span class="pln">toBe</span><span class="pun">(</span><span class="pln">testQuote</span><span class="pun">);</span><span class="pln">
    expect</span><span class="pun">(</span><span class="pln">errorMessage</span><span class="pun">())</span><span class="pln">
      </span><span class="pun">.</span><span class="pln">withContext</span><span class="pun">(</span><span class="str">'should not show error'</span><span class="pun">)</span><span class="pln">
      </span><span class="pun">.</span><span class="pln">toBeNull</span><span class="pun">();</span><span class="pln">
    </span><span class="kwd">done</span><span class="pun">();</span><span class="pln">
  </span><span class="pun">});</span><span class="pln">
</span><span class="pun">});</span></code>
    </pre></aio-code></code-example>
<p>The RxJS <code>last()</code> operator emits the observable's last value before completing, which will be the test quote.
The <code>subscribe</code> callback calls <code>detectChanges()</code> to
update the quote element with the test quote, in the same manner as the earlier tests.</p>
<p>In some tests, you're more interested in how an injected service method was called and what values it returned,
than what appears on screen.</p>
<p>A service spy, such as the <code>qetQuote()</code> spy of the fake <code>TwainService</code>,
can give you that information and make assertions about the state of the view.</p>
<code-example path="testing/src/app/twain/twain.component.spec.ts" region="spy-done-test" ng-version="13.2.2"><div style="display: none;"></div><!----><aio-code><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">it</span><span class="pun">(</span><span class="str">'should show quote after getQuote (spy done)'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">done</span><span class="pun">:</span><span class="pln"> </span><span class="typ">DoneFn</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  fixture</span><span class="pun">.</span><span class="pln">detectChanges</span><span class="pun">();</span><span class="pln">

  </span><span class="com">// the spy's most recent call returns the observable with the test quote</span><span class="pln">
  getQuoteSpy</span><span class="pun">.</span><span class="pln">calls</span><span class="pun">.</span><span class="pln">mostRecent</span><span class="pun">().</span><span class="pln">returnValue</span><span class="pun">.</span><span class="pln">subscribe</span><span class="pun">(()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    fixture</span><span class="pun">.</span><span class="pln">detectChanges</span><span class="pun">();</span><span class="pln">  </span><span class="com">// update view with quote</span><span class="pln">
    expect</span><span class="pun">(</span><span class="pln">quoteEl</span><span class="pun">.</span><span class="pln">textContent</span><span class="pun">).</span><span class="pln">toBe</span><span class="pun">(</span><span class="pln">testQuote</span><span class="pun">);</span><span class="pln">
    expect</span><span class="pun">(</span><span class="pln">errorMessage</span><span class="pun">())</span><span class="pln">
      </span><span class="pun">.</span><span class="pln">withContext</span><span class="pun">(</span><span class="str">'should not show error'</span><span class="pun">)</span><span class="pln">
      </span><span class="pun">.</span><span class="pln">toBeNull</span><span class="pun">();</span><span class="pln">
    </span><span class="kwd">done</span><span class="pun">();</span><span class="pln">
  </span><span class="pun">});</span><span class="pln">
</span><span class="pun">});</span></code>
    </pre></aio-code></code-example>
<a id="marble-testing"></a>
<a class="dashAnchor" name="//apple_ref/Section/Component%20marble%20tests"></a><h2 id="component-marble-tests">Component marble tests</h2>
<p>The previous <code>TwainComponent</code> tests simulated an asynchronous observable response
from the <code>TwainService</code> with the <code>asyncData</code> and <code>asyncError</code> utilities.</p>
<p>These are short, simple functions that you can write yourself.
Unfortunately, they're too simple for many common scenarios.
An observable often emits multiple times, perhaps after a significant delay.
A component might coordinate multiple observables
with overlapping sequences of values and errors.</p>
<p><strong>RxJS marble testing</strong> is a great way to test observable scenarios,
both simple and complex.
You've likely seen the <a href="https://rxmarbles.com/">marble diagrams</a>
that illustrate how observables work.
Marble testing uses a similar marble language to
specify the observable streams and expectations in your tests.</p>
<p>The following examples revisit two of the <code>TwainComponent</code> tests
with marble testing.</p>
<p>Start by installing the <code>jasmine-marbles</code> npm package.
Then import the symbols you need.</p>
<code-example path="testing/src/app/twain/twain.component.marbles.spec.ts" region="import-marbles" header="app/twain/twain.component.marbles.spec.ts (import marbles)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/twain/twain.component.marbles.spec.ts (import marbles)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/twain/twain.component.marbles.spec.ts (import marbles)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="kwd">import</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> cold</span><span class="pun">,</span><span class="pln"> getTestScheduler </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> </span><span class="str">'jasmine-marbles'</span><span class="pun">;</span></code>
    </pre></aio-code></code-example>
<p>Here's the complete test for getting a quote:</p>
<code-example path="testing/src/app/twain/twain.component.marbles.spec.ts" region="get-quote-test" ng-version="13.2.2"><div style="display: none;"></div><!----><aio-code><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">it</span><span class="pun">(</span><span class="str">'should show quote after getQuote (marbles)'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="com">// observable test quote value and complete(), after delay</span><span class="pln">
  </span><span class="kwd">const</span><span class="pln"> q$ </span><span class="pun">=</span><span class="pln"> cold</span><span class="pun">(</span><span class="str">'---x|'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> x</span><span class="pun">:</span><span class="pln"> testQuote </span><span class="pun">});</span><span class="pln">
  getQuoteSpy</span><span class="pun">.</span><span class="kwd">and</span><span class="pun">.</span><span class="pln">returnValue</span><span class="pun">(</span><span class="pln"> q$ </span><span class="pun">);</span><span class="pln">

  fixture</span><span class="pun">.</span><span class="pln">detectChanges</span><span class="pun">();</span><span class="pln"> </span><span class="com">// ngOnInit()</span><span class="pln">
  expect</span><span class="pun">(</span><span class="pln">quoteEl</span><span class="pun">.</span><span class="pln">textContent</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">withContext</span><span class="pun">(</span><span class="str">'should show placeholder'</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'...'</span><span class="pun">);</span><span class="pln">

  getTestScheduler</span><span class="pun">().</span><span class="pln">flush</span><span class="pun">();</span><span class="pln"> </span><span class="com">// </span><a href="../api/core/testing/flush.html" class="code-anchor"><span class="com">flush</span></a><span class="com"> the observables</span><span class="pln">

  fixture</span><span class="pun">.</span><span class="pln">detectChanges</span><span class="pun">();</span><span class="pln"> </span><span class="com">// update view</span><span class="pln">

  expect</span><span class="pun">(</span><span class="pln">quoteEl</span><span class="pun">.</span><span class="pln">textContent</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">withContext</span><span class="pun">(</span><span class="str">'should show quote'</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">toBe</span><span class="pun">(</span><span class="pln">testQuote</span><span class="pun">);</span><span class="pln">
  expect</span><span class="pun">(</span><span class="pln">errorMessage</span><span class="pun">())</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">withContext</span><span class="pun">(</span><span class="str">'should not show error'</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">toBeNull</span><span class="pun">();</span><span class="pln">
</span><span class="pun">});</span></code>
    </pre></aio-code></code-example>
<p>Notice that the Jasmine test is synchronous. There's no <code><a href="../api/core/testing/fakeAsync.html" class="code-anchor">fakeAsync</a>()</code>.
Marble testing uses a test scheduler to simulate the passage of time
in a synchronous test.</p>
<p>The beauty of marble testing is in the visual definition of the observable streams.
This test defines a <a href="./testing-components-scenarios.html#cold-observable"><em>cold</em> observable</a> that waits
three <a href="./testing-components-scenarios.html#marble-frame">frames</a> (<code>---</code>),
emits a value (<code>x</code>), and completes (<code>|</code>).
In the second argument you map the value marker (<code>x</code>) to the emitted value (<code>testQuote</code>).</p>
<code-example path="testing/src/app/twain/twain.component.marbles.spec.ts" region="test-quote-marbles" ng-version="13.2.2"><div style="display: none;"></div><!----><aio-code><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="kwd">const</span><span class="pln"> q$ </span><span class="pun">=</span><span class="pln"> cold</span><span class="pun">(</span><span class="str">'---x|'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> x</span><span class="pun">:</span><span class="pln"> testQuote </span><span class="pun">});</span></code>
    </pre></aio-code></code-example>
<p>The marble library constructs the corresponding observable, which the
test sets as the <code>getQuote</code> spy's return value.</p>
<p>When you're ready to activate the marble observables,
you tell the <code>TestScheduler</code> to <em>flush</em> its queue of prepared tasks like this.</p>
<code-example path="testing/src/app/twain/twain.component.marbles.spec.ts" region="test-scheduler-flush" ng-version="13.2.2"><div style="display: none;"></div><!----><aio-code><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">getTestScheduler</span><span class="pun">().</span><span class="pln">flush</span><span class="pun">();</span><span class="pln"> </span><span class="com">// </span><a href="../api/core/testing/flush.html" class="code-anchor"><span class="com">flush</span></a><span class="com"> the observables</span></code>
    </pre></aio-code></code-example>
<p>This step serves a purpose analogous to <a href="../api/core/testing/tick.html">tick()</a> and <code>whenStable()</code> in the
earlier <code><a href="../api/core/testing/fakeAsync.html" class="code-anchor">fakeAsync</a>()</code> and <code><a href="../api/core/testing/waitForAsync.html" class="code-anchor">waitForAsync</a>()</code> examples.
The balance of the test is the same as those examples.</p>
<h4 id="marble-error-testing">Marble error testing</h4>
<p>Here's the marble testing version of the <code>getQuote()</code> error test.</p>
<code-example path="testing/src/app/twain/twain.component.marbles.spec.ts" region="error-test" ng-version="13.2.2"><div style="display: none;"></div><!----><aio-code><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">it</span><span class="pun">(</span><span class="str">'should display error when TwainService fails'</span><span class="pun">,</span><span class="pln"> </span><a href="../api/core/testing/fakeAsync.html" class="code-anchor"><span class="pln">fakeAsync</span></a><span class="pun">(()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="com">// observable error after delay</span><span class="pln">
  </span><span class="kwd">const</span><span class="pln"> q$ </span><span class="pun">=</span><span class="pln"> cold</span><span class="pun">(</span><span class="str">'---#|'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Error</span><span class="pun">(</span><span class="str">'TwainService test failure'</span><span class="pun">));</span><span class="pln">
  getQuoteSpy</span><span class="pun">.</span><span class="kwd">and</span><span class="pun">.</span><span class="pln">returnValue</span><span class="pun">(</span><span class="pln"> q$ </span><span class="pun">);</span><span class="pln">

  fixture</span><span class="pun">.</span><span class="pln">detectChanges</span><span class="pun">();</span><span class="pln"> </span><span class="com">// ngOnInit()</span><span class="pln">
  expect</span><span class="pun">(</span><span class="pln">quoteEl</span><span class="pun">.</span><span class="pln">textContent</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">withContext</span><span class="pun">(</span><span class="str">'should show placeholder'</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'...'</span><span class="pun">);</span><span class="pln">

  getTestScheduler</span><span class="pun">().</span><span class="pln">flush</span><span class="pun">();</span><span class="pln"> </span><span class="com">// </span><a href="../api/core/testing/flush.html" class="code-anchor"><span class="com">flush</span></a><span class="com"> the observables</span><span class="pln">
  </span><a href="../api/core/testing/tick.html" class="code-anchor"><span class="pln">tick</span></a><span class="pun">();</span><span class="pln">                     </span><span class="com">// component shows error after a setTimeout()</span><span class="pln">
  fixture</span><span class="pun">.</span><span class="pln">detectChanges</span><span class="pun">();</span><span class="pln">    </span><span class="com">// update error message</span><span class="pln">

  expect</span><span class="pun">(</span><span class="pln">errorMessage</span><span class="pun">())</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">withContext</span><span class="pun">(</span><span class="str">'should display error'</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">toMatch</span><span class="pun">(</span><span class="str">/test failure/</span><span class="pun">);</span><span class="pln">
  expect</span><span class="pun">(</span><span class="pln">quoteEl</span><span class="pun">.</span><span class="pln">textContent</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">withContext</span><span class="pun">(</span><span class="str">'should show placeholder'</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'...'</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}));</span></code>
    </pre></aio-code></code-example>
<p>It's still an async test, calling <code><a href="../api/core/testing/fakeAsync.html" class="code-anchor">fakeAsync</a>()</code> and <a href="../api/core/testing/tick.html">tick()</a>, because the component itself
calls <code>setTimeout()</code> when processing errors.</p>
<p>Look at the marble observable definition.</p>
<code-example path="testing/src/app/twain/twain.component.marbles.spec.ts" region="error-marbles" ng-version="13.2.2"><div style="display: none;"></div><!----><aio-code><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="kwd">const</span><span class="pln"> q$ </span><span class="pun">=</span><span class="pln"> cold</span><span class="pun">(</span><span class="str">'---#|'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Error</span><span class="pun">(</span><span class="str">'TwainService test failure'</span><span class="pun">));</span></code>
    </pre></aio-code></code-example>
<p>This is a <em>cold</em> observable that waits three frames and then emits an error,
The hash (<code>#</code>) indicates the timing of the error that is specified in the third argument.
The second argument is null because the observable never emits a value.</p>
<h4 id="learn-about-marble-testing">Learn about marble testing</h4>
<a id="marble-frame"></a>
<p>A <em>marble frame</em> is a virtual unit of testing time.
Each symbol (<code>-</code>, <code>x</code>, <code>|</code>, <code>#</code>) marks the passing of one frame.</p>
<a id="cold-observable"></a>
<p>A <em>cold</em> observable doesn't produce values until you subscribe to it.
Most of your application observables are cold.
All <a href="./http.html"><em>HttpClient</em></a> methods return cold observables.</p>
<p>A <em>hot</em> observable is already producing values <em>before</em> you subscribe to it.
The <a href="../api/router/Router.html#events"><em>Router.events</em></a> observable,
which reports router activity, is a <em>hot</em> observable.</p>
<p>RxJS marble testing is a rich subject, beyond the scope of this guide.
Learn about it on the web, starting with the
<a href="https://rxjs.dev/guide/testing/marble-testing">official documentation</a>.</p>
<a id="component-with-input-output"></a>
<a class="dashAnchor" name="//apple_ref/Section/Component%20with%20inputs%20and%20outputs"></a><h2 id="component-with-inputs-and-outputs">Component with inputs and outputs</h2>
<p>A component with inputs and outputs typically appears inside the view template of a host component.
The host uses a property binding to set the input property and an event binding to
listen to events raised by the output property.</p>
<p>The testing goal is to verify that such bindings work as expected.
The tests should set input values and listen for output events.</p>
<p>The <code>DashboardHeroComponent</code> is a tiny example of a component in this role.
It displays an individual hero provided by the <code>DashboardComponent</code>.
Clicking that hero tells the <code>DashboardComponent</code> that the user has selected the hero.</p>
<p>The <code>DashboardHeroComponent</code> is embedded in the <code>DashboardComponent</code> template like this:</p>
<code-example path="testing/src/app/dashboard/dashboard.component.html" region="dashboard-hero" header="app/dashboard/dashboard.component.html (excerpt)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/dashboard/dashboard.component.html (excerpt)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/dashboard/dashboard.component.html (excerpt)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="tag">&lt;dashboard-hero</span><span class="pln"> *</span><a href="../api/common/NgForOf.html" class="code-anchor"><span class="atn">ngFor</span></a><span class="pun">=</span><span class="atv">"let hero of heroes"</span><span class="pln">  </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"col-1-4"</span><span class="pln">
  [</span><span class="atn">hero</span><span class="pln">]</span><span class="pun">=</span><span class="atv">hero</span><span class="pln">  (</span><span class="atn">selected</span><span class="pln">)</span><span class="pun">=</span><span class="atv">"gotoDetail($event)"</span><span class="pln"> </span><span class="tag">&gt;</span><span class="pln">
</span><span class="tag">&lt;/dashboard-hero&gt;</span></code>
    </pre></aio-code></code-example>
<p>The <code>DashboardHeroComponent</code> appears in an <code>*<a href="../api/common/NgForOf.html" class="code-anchor">ngFor</a></code> repeater, which sets each component's <code>hero</code> input property
to the looping value and listens for the component's <code>selected</code> event.</p>
<p>Here's the component's full definition:</p>
<a id="dashboard-hero-component"></a>
<code-example path="testing/src/app/dashboard/dashboard-hero.component.ts" region="component" header="app/dashboard/dashboard-hero.component.ts (component)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/dashboard/dashboard-hero.component.ts (component)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/dashboard/dashboard-hero.component.ts (component)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="lit">@</span><a href="../api/core/Component.html" class="code-anchor"><span class="lit">Component</span></a><span class="pun">({</span><span class="pln">
  selector</span><span class="pun">:</span><span class="pln"> </span><span class="str">'dashboard-hero'</span><span class="pun">,</span><span class="pln">
  </span><span class="kwd">template</span><span class="pun">:</span><span class="pln"> </span><span class="str">`
    &lt;button type="button" (click)="click()" class="hero"&gt;
      {{hero.name | </span><a href="../api/common/UpperCasePipe.html" class="code-anchor"><span class="str">uppercase</span></a><span class="str">}}
    &lt;/button&gt;
  `</span><span class="pun">,</span><span class="pln">
  styleUrls</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln"> </span><span class="str">'./dashboard-hero.component.css'</span><span class="pln"> </span><span class="pun">]</span><span class="pln">
</span><span class="pun">})</span><span class="pln">
</span><span class="kwd">export</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">DashboardHeroComponent</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="lit">@</span><a href="../api/core/Input.html" class="code-anchor"><span class="lit">Input</span></a><span class="pun">()</span><span class="pln"> hero</span><span class="pun">!:</span><span class="pln"> </span><span class="typ">Hero</span><span class="pun">;</span><span class="pln">
  </span><span class="lit">@</span><a href="../api/core/Output.html" class="code-anchor"><span class="lit">Output</span></a><span class="pun">()</span><span class="pln"> selected </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><a href="../api/core/EventEmitter.html" class="code-anchor"><span class="typ">EventEmitter</span></a><span class="pun">&lt;</span><span class="typ">Hero</span><span class="pun">&gt;();</span><span class="pln">
  click</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">selected</span><span class="pun">.</span><span class="pln">emit</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">hero</span><span class="pun">);</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code>
    </pre></aio-code></code-example>
<p>While testing a component this simple has little intrinsic value, it's worth knowing how.
Use one of these approaches:</p>
<ul>
<li>Test it as used by <code>DashboardComponent</code>.</li>
<li>Test it as a stand-alone component.</li>
<li>Test it as used by a substitute for <code>DashboardComponent</code>.</li>
</ul>
<p>A quick look at the <code>DashboardComponent</code> constructor discourages the first approach:</p>
<code-example path="testing/src/app/dashboard/dashboard.component.ts" region="ctor" header="app/dashboard/dashboard.component.ts (constructor)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/dashboard/dashboard.component.ts (constructor)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/dashboard/dashboard.component.ts (constructor)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="kwd">constructor</span><span class="pun">(</span><span class="pln">
  </span><span class="kwd">private</span><span class="pln"> router</span><span class="pun">:</span><span class="pln"> </span><a href="../api/router/Router.html" class="code-anchor"><span class="typ">Router</span></a><span class="pun">,</span><span class="pln">
  </span><span class="kwd">private</span><span class="pln"> heroService</span><span class="pun">:</span><span class="pln"> </span><span class="typ">HeroService</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
</span><span class="pun">}</span></code>
    </pre></aio-code></code-example>
<p>The <code>DashboardComponent</code> depends on the Angular router and the <code>HeroService</code>.
You'd probably have to replace them both with test doubles, which is a lot of work.
The router seems particularly challenging.</p>
<div class="alert is-helpful">
<p>The <a href="./testing-components-scenarios.html#routing-component">following discussion</a> covers testing components that require the router.</p>
</div>
<p>The immediate goal is to test the <code>DashboardHeroComponent</code>, not the <code>DashboardComponent</code>,
so, try the second and third options.</p>
<a id="dashboard-standalone"></a>
<h4 id="test-dashboardherocomponent-stand-alone">Test <em>DashboardHeroComponent</em> stand-alone</h4>
<p>Here's the meat of the spec file setup.</p>
<code-example path="testing/src/app/dashboard/dashboard-hero.component.spec.ts" region="setup" header="app/dashboard/dashboard-hero.component.spec.ts (setup)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/dashboard/dashboard-hero.component.spec.ts (setup)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/dashboard/dashboard-hero.component.spec.ts (setup)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><a href="../api/core/testing/TestBed.html" class="code-anchor"><span class="typ">TestBed</span></a><span class="pln">
    </span><span class="pun">.</span><span class="pln">configureTestingModule</span><span class="pun">({</span><span class="pln">declarations</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="typ">DashboardHeroComponent</span><span class="pun">]})</span><span class="pln">
fixture </span><span class="pun">=</span><span class="pln"> </span><span class="typ">TestBed</span><span class="pun">.</span><span class="pln">createComponent</span><span class="pun">(</span><span class="typ">DashboardHeroComponent</span><span class="pun">);</span><span class="pln">
comp </span><span class="pun">=</span><span class="pln"> fixture</span><span class="pun">.</span><span class="pln">componentInstance</span><span class="pun">;</span><span class="pln">

</span><span class="com">// find the hero's </span><a href="../api/core/DebugElement.html" class="code-anchor"><span class="com">DebugElement</span></a><span class="com"> and element</span><span class="pln">
heroDe </span><span class="pun">=</span><span class="pln"> fixture</span><span class="pun">.</span><span class="pln">debugElement</span><span class="pun">.</span><span class="pln">query</span><span class="pun">(</span><span class="typ">By</span><span class="pun">.</span><span class="pln">css</span><span class="pun">(</span><span class="str">'.hero'</span><span class="pun">));</span><span class="pln">
heroEl </span><span class="pun">=</span><span class="pln"> heroDe</span><span class="pun">.</span><span class="pln">nativeElement</span><span class="pun">;</span><span class="pln">

</span><span class="com">// mock the hero supplied by the parent component</span><span class="pln">
expectedHero </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln">id</span><span class="pun">:</span><span class="pln"> </span><span class="lit">42</span><span class="pun">,</span><span class="pln"> name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Test Name'</span><span class="pun">};</span><span class="pln">

</span><span class="com">// simulate the parent setting the input property with that hero</span><span class="pln">
comp</span><span class="pun">.</span><span class="pln">hero </span><span class="pun">=</span><span class="pln"> expectedHero</span><span class="pun">;</span><span class="pln">

</span><span class="com">// </span><a href="../api/animations/trigger.html" class="code-anchor"><span class="com">trigger</span></a><span class="com"> initial data binding</span><span class="pln">
fixture</span><span class="pun">.</span><span class="pln">detectChanges</span><span class="pun">();</span></code>
    </pre></aio-code></code-example>
<p>Note how the setup code assigns a test hero (<code>expectedHero</code>) to the component's <code>hero</code> property,
emulating the way the <code>DashboardComponent</code> would set it
using the property binding in its repeater.</p>
<p>The following test verifies that the hero name is propagated to the template using a binding.</p>
<code-example path="testing/src/app/dashboard/dashboard-hero.component.spec.ts" region="name-test" ng-version="13.2.2"><div style="display: none;"></div><!----><aio-code><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">it</span><span class="pun">(</span><span class="str">'should display hero name in uppercase'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">const</span><span class="pln"> expectedPipedName </span><span class="pun">=</span><span class="pln"> expectedHero</span><span class="pun">.</span><span class="pln">name</span><span class="pun">.</span><span class="pln">toUpperCase</span><span class="pun">();</span><span class="pln">
  expect</span><span class="pun">(</span><span class="pln">heroEl</span><span class="pun">.</span><span class="pln">textContent</span><span class="pun">).</span><span class="pln">toContain</span><span class="pun">(</span><span class="pln">expectedPipedName</span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span></code>
    </pre></aio-code></code-example>
<p>Because the <a href="./testing-components-scenarios.html#dashboard-hero-component">template</a> passes the hero name through the Angular <code><a href="../api/common/UpperCasePipe.html" class="code-anchor">UpperCasePipe</a></code>,
the test must match the element value with the upper-cased name.</p>
<div class="alert is-helpful">
<p>This small test demonstrates how Angular tests can verify a component's visual
representationsomething not possible with
<a href="./testing-components-basics.html#component-class-testing">component class tests</a>at
low cost and without resorting to much slower and more complicated end-to-end tests.</p>
</div>
<h4 id="clicking">Clicking</h4>
<p>Clicking the hero should raise a <code>selected</code> event that
the host component (<code>DashboardComponent</code> presumably) can hear:</p>
<code-example path="testing/src/app/dashboard/dashboard-hero.component.spec.ts" region="click-test" ng-version="13.2.2"><div style="display: none;"></div><!----><aio-code><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">it</span><span class="pun">(</span><span class="str">'should raise selected event when clicked (triggerEventHandler)'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">let</span><span class="pln"> selectedHero</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Hero</span><span class="pln"> </span><span class="pun">|</span><span class="pln"> </span><span class="kwd">undefined</span><span class="pun">;</span><span class="pln">
  comp</span><span class="pun">.</span><span class="pln">selected</span><span class="pun">.</span><span class="pln">pipe</span><span class="pun">(</span><span class="pln">first</span><span class="pun">()).</span><span class="pln">subscribe</span><span class="pun">((</span><span class="pln">hero</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Hero</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> selectedHero </span><span class="pun">=</span><span class="pln"> hero</span><span class="pun">);</span><span class="pln">

  heroDe</span><span class="pun">.</span><span class="pln">triggerEventHandler</span><span class="pun">(</span><span class="str">'click'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">);</span><span class="pln">
  expect</span><span class="pun">(</span><span class="pln">selectedHero</span><span class="pun">).</span><span class="pln">toBe</span><span class="pun">(</span><span class="pln">expectedHero</span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span></code>
    </pre></aio-code></code-example>
<p>The component's <code>selected</code> property returns an <code><a href="../api/core/EventEmitter.html" class="code-anchor">EventEmitter</a></code>,
which looks like an RxJS synchronous <code>Observable</code> to consumers.
The test subscribes to it <em>explicitly</em> just as the host component does <em>implicitly</em>.</p>
<p>If the component behaves as expected, clicking the hero's element
should tell the component's <code>selected</code> property to emit the <code>hero</code> object.</p>
<p>The test detects that event through its subscription to <code>selected</code>.</p>
<a id="trigger-event-handler"></a>
<h4 id="triggereventhandler"><em>triggerEventHandler</em></h4>
<p>The <code>heroDe</code> in the previous test is a <code><a href="../api/core/DebugElement.html" class="code-anchor">DebugElement</a></code> that represents the hero <code>&lt;div&gt;</code>.</p>
<p>It has Angular properties and methods that abstract interaction with the native element.
This test calls the <code>DebugElement.triggerEventHandler</code> with the "click" event name.
The "click" event binding responds by calling <code>DashboardHeroComponent.click()</code>.</p>
<p>The Angular <code>DebugElement.triggerEventHandler</code> can raise <em>any data-bound event</em> by its <em>event name</em>.
The second parameter is the event object passed to the handler.</p>
<p>The test triggered a "click" event with a <code>null</code> event object.</p>
<code-example path="testing/src/app/dashboard/dashboard-hero.component.spec.ts" region="trigger-event-handler" ng-version="13.2.2"><div style="display: none;"></div><!----><aio-code><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">heroDe</span><span class="pun">.</span><span class="pln">triggerEventHandler</span><span class="pun">(</span><span class="str">'click'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">);</span></code>
    </pre></aio-code></code-example>
<p>The test assumes (correctly in this case) that the runtime
event handlerthe component's <code>click()</code> methoddoesn't
care about the event object.</p>
<div class="alert is-helpful">
<p>Other handlers are less forgiving. For example, the <code><a href="../api/router/RouterLink.html" class="code-anchor">RouterLink</a></code>
directive expects an object with a <code>button</code> property
that identifies which mouse button (if any) was pressed during the click.
The <code><a href="../api/router/RouterLink.html" class="code-anchor">RouterLink</a></code> directive throws an error if the event object is missing.</p>
</div>
<h4 id="click-the-element">Click the element</h4>
<p>The following test alternative calls the native element's own <code>click()</code> method,
which is perfectly fine for <em>this component</em>.</p>
<code-example path="testing/src/app/dashboard/dashboard-hero.component.spec.ts" region="click-test-2" ng-version="13.2.2"><div style="display: none;"></div><!----><aio-code><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">it</span><span class="pun">(</span><span class="str">'should raise selected event when clicked (element.click)'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">let</span><span class="pln"> selectedHero</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Hero</span><span class="pln"> </span><span class="pun">|</span><span class="pln"> </span><span class="kwd">undefined</span><span class="pun">;</span><span class="pln">
  comp</span><span class="pun">.</span><span class="pln">selected</span><span class="pun">.</span><span class="pln">pipe</span><span class="pun">(</span><span class="pln">first</span><span class="pun">()).</span><span class="pln">subscribe</span><span class="pun">((</span><span class="pln">hero</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Hero</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> selectedHero </span><span class="pun">=</span><span class="pln"> hero</span><span class="pun">);</span><span class="pln">

  heroEl</span><span class="pun">.</span><span class="pln">click</span><span class="pun">();</span><span class="pln">
  expect</span><span class="pun">(</span><span class="pln">selectedHero</span><span class="pun">).</span><span class="pln">toBe</span><span class="pun">(</span><span class="pln">expectedHero</span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span></code>
    </pre></aio-code></code-example>
<a id="click-helper"></a>
<h4 id="click-helper"><em>click()</em> helper</h4>
<p>Clicking a button, an anchor, or an arbitrary HTML element is a common test task.</p>
<p>Make that consistent and straightforward by encapsulating the <em>click-triggering</em> process
in a helper such as the following <code>click()</code> function:</p>
<code-example path="testing/src/testing/index.ts" region="click-event" header="testing/index.ts (click helper)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">testing/index.ts (click helper)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from testing/index.ts (click helper)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="com">/** Button events to pass to `DebugElement.triggerEventHandler` for </span><a href="../api/router/RouterLink.html" class="code-anchor"><span class="com">RouterLink</span></a><span class="com"> event handler */</span><span class="pln">
</span><span class="kwd">export</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">ButtonClickEvents</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
   left</span><span class="pun">:</span><span class="pln">  </span><span class="pun">{</span><span class="pln"> button</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">},</span><span class="pln">
   right</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> button</span><span class="pun">:</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pun">};</span><span class="pln">

</span><span class="com">/** Simulate element click. Defaults to mouse left-button click event. */</span><span class="pln">
</span><span class="kwd">export</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> click</span><span class="pun">(</span><span class="pln">el</span><span class="pun">:</span><span class="pln"> </span><a href="../api/core/DebugElement.html" class="code-anchor"><span class="typ">DebugElement</span></a><span class="pln"> </span><span class="pun">|</span><span class="pln"> </span><span class="typ">HTMLElement</span><span class="pun">,</span><span class="pln"> eventObj</span><span class="pun">:</span><span class="pln"> any </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ButtonClickEvents</span><span class="pun">.</span><span class="pln">left</span><span class="pun">):</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">el </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">HTMLElement</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    el</span><span class="pun">.</span><span class="pln">click</span><span class="pun">();</span><span class="pln">
  </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    el</span><span class="pun">.</span><span class="pln">triggerEventHandler</span><span class="pun">(</span><span class="str">'click'</span><span class="pun">,</span><span class="pln"> eventObj</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code>
    </pre></aio-code></code-example>
<p>The first parameter is the <em>element-to-click</em>. If you want, pass a
custom event object as the second parameter. The default is a (partial)
<a href="https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/button">left-button mouse event object</a>
accepted by many handlers including the <code><a href="../api/router/RouterLink.html" class="code-anchor">RouterLink</a></code> directive.</p>
<div class="alert is-important">
<p>The <code>click()</code> helper function is <strong>not</strong> one of the Angular testing utilities.
It's a function defined in <em>this guide's sample code</em>.
All of the sample tests use it.
If you like it, add it to your own collection of helpers.</p>
</div>
<p>Here's the previous test, rewritten using the click helper.</p>
<code-example path="testing/src/app/dashboard/dashboard-hero.component.spec.ts" region="click-test-3" header="app/dashboard/dashboard-hero.component.spec.ts (test with click helper)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/dashboard/dashboard-hero.component.spec.ts (test with click helper)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/dashboard/dashboard-hero.component.spec.ts (test with click helper)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">it</span><span class="pun">(</span><span class="str">'should raise selected event when clicked (click helper with </span><a href="../api/core/DebugElement.html" class="code-anchor"><span class="str">DebugElement</span></a><span class="str">)'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">let</span><span class="pln"> selectedHero</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Hero</span><span class="pln"> </span><span class="pun">|</span><span class="pln"> </span><span class="kwd">undefined</span><span class="pun">;</span><span class="pln">
  comp</span><span class="pun">.</span><span class="pln">selected</span><span class="pun">.</span><span class="pln">pipe</span><span class="pun">(</span><span class="pln">first</span><span class="pun">()).</span><span class="pln">subscribe</span><span class="pun">((</span><span class="pln">hero</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Hero</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> selectedHero </span><span class="pun">=</span><span class="pln"> hero</span><span class="pun">);</span><span class="pln">

  click</span><span class="pun">(</span><span class="pln">heroDe</span><span class="pun">);</span><span class="pln">  </span><span class="com">// click helper with </span><a href="../api/core/DebugElement.html" class="code-anchor"><span class="com">DebugElement</span></a><span class="pln">

  expect</span><span class="pun">(</span><span class="pln">selectedHero</span><span class="pun">).</span><span class="pln">toBe</span><span class="pun">(</span><span class="pln">expectedHero</span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span></code>
    </pre></aio-code></code-example>
<a id="component-inside-test-host"></a>
<a class="dashAnchor" name="//apple_ref/Section/Component%20inside%20a%20test%20host"></a><h2 id="component-inside-a-test-host">Component inside a test host</h2>
<p>The previous tests played the role of the host <code>DashboardComponent</code> themselves.
But does the <code>DashboardHeroComponent</code> work correctly when properly data-bound to a host component?</p>
<p>You could test with the actual <code>DashboardComponent</code>.
But doing so could require a lot of setup,
especially when its template features an <code>*<a href="../api/common/NgForOf.html" class="code-anchor">ngFor</a></code> repeater,
other components, layout HTML, additional bindings,
a constructor that injects multiple services,
and it starts interacting with those services right away.</p>
<p>Imagine the effort to disable these distractions, just to prove a point
that can be made satisfactorily with a <em>test host</em> like this one:</p>
<code-example path="testing/src/app/dashboard/dashboard-hero.component.spec.ts" region="test-host" header="app/dashboard/dashboard-hero.component.spec.ts (test host)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/dashboard/dashboard-hero.component.spec.ts (test host)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/dashboard/dashboard-hero.component.spec.ts (test host)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="lit">@</span><a href="../api/core/Component.html" class="code-anchor"><span class="lit">Component</span></a><span class="pun">({</span><span class="pln">
  </span><span class="kwd">template</span><span class="pun">:</span><span class="pln"> </span><span class="str">`
    &lt;dashboard-hero
      [hero]="hero" (selected)="onSelected($event)"&gt;
    &lt;/dashboard-hero&gt;`</span><span class="pln">
</span><span class="pun">})</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">TestHostComponent</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  hero</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Hero</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln">id</span><span class="pun">:</span><span class="pln"> </span><span class="lit">42</span><span class="pun">,</span><span class="pln"> name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Test Name'</span><span class="pun">};</span><span class="pln">
  selectedHero</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Hero</span><span class="pln"> </span><span class="pun">|</span><span class="pln"> </span><span class="kwd">undefined</span><span class="pun">;</span><span class="pln">
  onSelected</span><span class="pun">(</span><span class="pln">hero</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Hero</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">selectedHero </span><span class="pun">=</span><span class="pln"> hero</span><span class="pun">;</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code>
    </pre></aio-code></code-example>
<p>This test host binds to <code>DashboardHeroComponent</code> as the <code>DashboardComponent</code> would
but without the noise of the <code><a href="../api/router/Router.html" class="code-anchor">Router</a></code>, the <code>HeroService</code>, or the <code>*<a href="../api/common/NgForOf.html" class="code-anchor">ngFor</a></code> repeater.</p>
<p>The test host sets the component's <code>hero</code> input property with its test hero.
It binds the component's <code>selected</code> event with its <code>onSelected</code> handler,
which records the emitted hero in its <code>selectedHero</code> property.</p>
<p>Later, the tests will be able to check <code>selectedHero</code> to verify that the
<code>DashboardHeroComponent.selected</code> event emitted the expected hero.</p>
<p>The setup for the <em>test-host</em> tests is similar to the setup for the stand-alone tests:</p>
<code-example path="testing/src/app/dashboard/dashboard-hero.component.spec.ts" region="test-host-setup" header="app/dashboard/dashboard-hero.component.spec.ts (test host setup)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/dashboard/dashboard-hero.component.spec.ts (test host setup)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/dashboard/dashboard-hero.component.spec.ts (test host setup)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><a href="../api/core/testing/TestBed.html" class="code-anchor"><span class="typ">TestBed</span></a><span class="pln">
    </span><span class="pun">.</span><span class="pln">configureTestingModule</span><span class="pun">({</span><span class="pln">declarations</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="typ">DashboardHeroComponent</span><span class="pun">,</span><span class="pln"> </span><span class="typ">TestHostComponent</span><span class="pun">]})</span><span class="pln">
</span><span class="com">// create TestHostComponent instead of DashboardHeroComponent</span><span class="pln">
fixture </span><span class="pun">=</span><span class="pln"> </span><span class="typ">TestBed</span><span class="pun">.</span><span class="pln">createComponent</span><span class="pun">(</span><span class="typ">TestHostComponent</span><span class="pun">);</span><span class="pln">
testHost </span><span class="pun">=</span><span class="pln"> fixture</span><span class="pun">.</span><span class="pln">componentInstance</span><span class="pun">;</span><span class="pln">
heroEl </span><span class="pun">=</span><span class="pln"> fixture</span><span class="pun">.</span><span class="pln">nativeElement</span><span class="pun">.</span><span class="pln">querySelector</span><span class="pun">(</span><span class="str">'.hero'</span><span class="pun">);</span><span class="pln">
fixture</span><span class="pun">.</span><span class="pln">detectChanges</span><span class="pun">();</span><span class="pln">  </span><span class="com">// </span><a href="../api/animations/trigger.html" class="code-anchor"><span class="com">trigger</span></a><span class="com"> initial data binding</span></code>
    </pre></aio-code></code-example>
<p>This testing module configuration shows three important differences:</p>
<ol>
<li>It <em>declares</em> both the <code>DashboardHeroComponent</code> and the <code>TestHostComponent</code>.</li>
<li>It <em>creates</em> the <code>TestHostComponent</code> instead of the <code>DashboardHeroComponent</code>.</li>
<li>The <code>TestHostComponent</code> sets the <code>DashboardHeroComponent.hero</code> with a binding.</li>
</ol>
<p>The <code>createComponent</code> returns a <code>fixture</code> that holds an instance of <code>TestHostComponent</code> instead of an instance of <code>DashboardHeroComponent</code>.</p>
<p>Creating the <code>TestHostComponent</code> has the side-effect of creating a <code>DashboardHeroComponent</code>
because the latter appears within the template of the former.
The query for the hero element (<code>heroEl</code>) still finds it in the test DOM,
albeit at greater depth in the element tree than before.</p>
<p>The tests themselves are almost identical to the stand-alone version:</p>
<code-example path="testing/src/app/dashboard/dashboard-hero.component.spec.ts" region="test-host-tests" header="app/dashboard/dashboard-hero.component.spec.ts (test-host)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/dashboard/dashboard-hero.component.spec.ts (test-host)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/dashboard/dashboard-hero.component.spec.ts (test-host)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">it</span><span class="pun">(</span><span class="str">'should display hero name'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">const</span><span class="pln"> expectedPipedName </span><span class="pun">=</span><span class="pln"> testHost</span><span class="pun">.</span><span class="pln">hero</span><span class="pun">.</span><span class="pln">name</span><span class="pun">.</span><span class="pln">toUpperCase</span><span class="pun">();</span><span class="pln">
  expect</span><span class="pun">(</span><span class="pln">heroEl</span><span class="pun">.</span><span class="pln">textContent</span><span class="pun">).</span><span class="pln">toContain</span><span class="pun">(</span><span class="pln">expectedPipedName</span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span><span class="pln">

it</span><span class="pun">(</span><span class="str">'should raise selected event when clicked'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  click</span><span class="pun">(</span><span class="pln">heroEl</span><span class="pun">);</span><span class="pln">
  </span><span class="com">// selected hero should be the same data bound hero</span><span class="pln">
  expect</span><span class="pun">(</span><span class="pln">testHost</span><span class="pun">.</span><span class="pln">selectedHero</span><span class="pun">).</span><span class="pln">toBe</span><span class="pun">(</span><span class="pln">testHost</span><span class="pun">.</span><span class="pln">hero</span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span></code>
    </pre></aio-code></code-example>
<p>Only the selected event test differs. It confirms that the selected <code>DashboardHeroComponent</code> hero
really does find its way up through the event binding to the host component.</p>
<a class="dashAnchor" name="//apple_ref/Section/Routing%20component"></a><a id="routing-component"></a>
<h2 id="routing-component">Routing component</h2>
<p>A <em>routing component</em> is a component that tells the <code><a href="../api/router/Router.html" class="code-anchor">Router</a></code> to navigate to another component.
The <code>DashboardComponent</code> is a <em>routing component</em> because the user can
navigate to the <code>HeroDetailComponent</code> by clicking on one of the <em>hero buttons</em> on the dashboard.</p>
<p>Routing is pretty complicated.
Testing the <code>DashboardComponent</code> seemed daunting in part because it involves the <code><a href="../api/router/Router.html" class="code-anchor">Router</a></code>,
which it injects together with the <code>HeroService</code>.</p>
<code-example path="testing/src/app/dashboard/dashboard.component.ts" region="ctor" header="app/dashboard/dashboard.component.ts (constructor)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/dashboard/dashboard.component.ts (constructor)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/dashboard/dashboard.component.ts (constructor)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="kwd">constructor</span><span class="pun">(</span><span class="pln">
  </span><span class="kwd">private</span><span class="pln"> router</span><span class="pun">:</span><span class="pln"> </span><a href="../api/router/Router.html" class="code-anchor"><span class="typ">Router</span></a><span class="pun">,</span><span class="pln">
  </span><span class="kwd">private</span><span class="pln"> heroService</span><span class="pun">:</span><span class="pln"> </span><span class="typ">HeroService</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
</span><span class="pun">}</span></code>
    </pre></aio-code></code-example>
<p>Mocking the <code>HeroService</code> with a spy is a <a href="./testing-components-scenarios.html#component-with-async-service">familiar story</a>.
But the <code><a href="../api/router/Router.html" class="code-anchor">Router</a></code> has a complicated API and is entwined with other services and application preconditions. Might it be difficult to mock?</p>
<p>Fortunately, not in this case because the <code>DashboardComponent</code> isn't doing much with the <code><a href="../api/router/Router.html" class="code-anchor">Router</a></code></p>
<code-example path="testing/src/app/dashboard/dashboard.component.ts" region="goto-detail" header="app/dashboard/dashboard.component.ts (goToDetail)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/dashboard/dashboard.component.ts (goToDetail)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/dashboard/dashboard.component.ts (goToDetail)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">gotoDetail</span><span class="pun">(</span><span class="pln">hero</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Hero</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">const</span><span class="pln"> url </span><span class="pun">=</span><span class="pln"> </span><span class="str">`/heroes/${hero.id}`</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">router</span><span class="pun">.</span><span class="pln">navigateByUrl</span><span class="pun">(</span><span class="pln">url</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}</span></code>
    </pre></aio-code></code-example>
<p>This is often the case with <em>routing components</em>.
As a rule you test the component, not the router,
and care only if the component navigates with the right address under the given conditions.</p>
<p>Providing a router spy for <em>this component</em> test suite happens to be as easy
as providing a <code>HeroService</code> spy.</p>
<code-example path="testing/src/app/dashboard/dashboard.component.spec.ts" region="router-spy" header="app/dashboard/dashboard.component.spec.ts (spies)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/dashboard/dashboard.component.spec.ts (spies)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/dashboard/dashboard.component.spec.ts (spies)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="kwd">const</span><span class="pln"> routerSpy </span><span class="pun">=</span><span class="pln"> jasmine</span><span class="pun">.</span><span class="pln">createSpyObj</span><span class="pun">(</span><span class="str">'</span><a href="../api/router/Router.html" class="code-anchor"><span class="str">Router</span></a><span class="str">'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">[</span><span class="str">'navigateByUrl'</span><span class="pun">]);</span><span class="pln">
</span><span class="kwd">const</span><span class="pln"> heroServiceSpy </span><span class="pun">=</span><span class="pln"> jasmine</span><span class="pun">.</span><span class="pln">createSpyObj</span><span class="pun">(</span><span class="str">'HeroService'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">[</span><span class="str">'getHeroes'</span><span class="pun">]);</span><span class="pln">

</span><a href="../api/core/testing/TestBed.html" class="code-anchor"><span class="typ">TestBed</span></a><span class="pln">
    </span><span class="pun">.</span><span class="pln">configureTestingModule</span><span class="pun">({</span><span class="pln">
      providers</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln">
        </span><span class="pun">{</span><span class="pln">provide</span><span class="pun">:</span><span class="pln"> </span><span class="typ">HeroService</span><span class="pun">,</span><span class="pln"> useValue</span><span class="pun">:</span><span class="pln"> heroServiceSpy</span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span><span class="pln">provide</span><span class="pun">:</span><span class="pln"> </span><a href="../api/router/Router.html" class="code-anchor"><span class="typ">Router</span></a><span class="pun">,</span><span class="pln"> useValue</span><span class="pun">:</span><span class="pln"> routerSpy</span><span class="pun">}</span><span class="pln">
      </span><span class="pun">]</span><span class="pln">
    </span><span class="pun">})</span></code>
    </pre></aio-code></code-example>
<p>The following test clicks the displayed hero and confirms that
<code>Router.navigateByUrl</code> is called with the expected url.</p>
<code-example path="testing/src/app/dashboard/dashboard.component.spec.ts" region="navigate-test" header="app/dashboard/dashboard.component.spec.ts (navigate test)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/dashboard/dashboard.component.spec.ts (navigate test)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/dashboard/dashboard.component.spec.ts (navigate test)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">it</span><span class="pun">(</span><span class="str">'should tell ROUTER to navigate when hero clicked'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  heroClick</span><span class="pun">();</span><span class="pln">  </span><span class="com">// </span><a href="../api/animations/trigger.html" class="code-anchor"><span class="com">trigger</span></a><span class="com"> click on first inner &lt;div class="hero"&gt;</span><span class="pln">

  </span><span class="com">// args passed to router.navigateByUrl() spy</span><span class="pln">
  </span><span class="kwd">const</span><span class="pln"> spy </span><span class="pun">=</span><span class="pln"> router</span><span class="pun">.</span><span class="pln">navigateByUrl </span><span class="kwd">as</span><span class="pln"> jasmine</span><span class="pun">.</span><span class="typ">Spy</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">const</span><span class="pln"> navArgs </span><span class="pun">=</span><span class="pln"> spy</span><span class="pun">.</span><span class="pln">calls</span><span class="pun">.</span><span class="pln">first</span><span class="pun">().</span><span class="pln">args</span><span class="pun">[</span><span class="lit">0</span><span class="pun">];</span><span class="pln">

  </span><span class="com">// expecting to navigate to id of the component's first hero</span><span class="pln">
  </span><span class="kwd">const</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> comp</span><span class="pun">.</span><span class="pln">heroes</span><span class="pun">[</span><span class="lit">0</span><span class="pun">].</span><span class="pln">id</span><span class="pun">;</span><span class="pln">
  expect</span><span class="pun">(</span><span class="pln">navArgs</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">withContext</span><span class="pun">(</span><span class="str">'should nav to HeroDetail for first hero'</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'/heroes/'</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> id</span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span></code>
    </pre></aio-code></code-example>
<a id="routed-component-w-param"></a>
<a class="dashAnchor" name="//apple_ref/Section/Routed%20components"></a><h2 id="routed-components">Routed components</h2>
<p>A <em>routed component</em> is the destination of a <code><a href="../api/router/Router.html" class="code-anchor">Router</a></code> navigation.
It can be trickier to test, especially when the route to the component <em>includes parameters</em>.
The <code>HeroDetailComponent</code> is a <em>routed component</em> that is the destination of such a route.</p>
<p>When a user clicks a <em>Dashboard</em> hero, the <code>DashboardComponent</code> tells the <code><a href="../api/router/Router.html" class="code-anchor">Router</a></code>
to navigate to <code>heroes/:id</code>.
The <code>:id</code> is a route parameter whose value is the <code>id</code> of the hero to edit.</p>
<p>The <code><a href="../api/router/Router.html" class="code-anchor">Router</a></code> matches that URL to a route to the <code>HeroDetailComponent</code>.
It creates an <code><a href="../api/router/ActivatedRoute.html" class="code-anchor">ActivatedRoute</a></code> object with the routing information and
injects it into a new instance of the <code>HeroDetailComponent</code>.</p>
<p>Here's the <code>HeroDetailComponent</code> constructor:</p>
<code-example path="testing/src/app/hero/hero-detail.component.ts" region="ctor" header="app/hero/hero-detail.component.ts (constructor)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/hero/hero-detail.component.ts (constructor)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/hero/hero-detail.component.ts (constructor)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="kwd">constructor</span><span class="pun">(</span><span class="pln">
  </span><span class="kwd">private</span><span class="pln"> heroDetailService</span><span class="pun">:</span><span class="pln"> </span><span class="typ">HeroDetailService</span><span class="pun">,</span><span class="pln">
  </span><span class="kwd">private</span><span class="pln"> route</span><span class="pun">:</span><span class="pln"> </span><a href="../api/router/ActivatedRoute.html" class="code-anchor"><span class="typ">ActivatedRoute</span></a><span class="pun">,</span><span class="pln">
  </span><span class="kwd">private</span><span class="pln"> router</span><span class="pun">:</span><span class="pln"> </span><a href="../api/router/Router.html" class="code-anchor"><span class="typ">Router</span></a><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
</span><span class="pun">}</span></code>
    </pre></aio-code></code-example>
<p>The <code>HeroDetail</code> component needs the <code>id</code> parameter so it can fetch
the corresponding hero using the <code>HeroDetailService</code>.
The component has to get the <code>id</code> from the <code><a href="../api/router/ActivatedRoute.html#paramMap" class="code-anchor">ActivatedRoute.paramMap</a></code> property
which is an <code>Observable</code>.</p>
<p>It can't just reference the <code>id</code> property of the <code><a href="../api/router/ActivatedRoute.html#paramMap" class="code-anchor">ActivatedRoute.paramMap</a></code>.
The component has to <em>subscribe</em> to the <code><a href="../api/router/ActivatedRoute.html#paramMap" class="code-anchor">ActivatedRoute.paramMap</a></code> observable and be prepared
for the <code>id</code> to change during its lifetime.</p>
<code-example path="testing/src/app/hero/hero-detail.component.ts" region="ng-on-init" header="app/hero/hero-detail.component.ts (ngOnInit)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/hero/hero-detail.component.ts (ngOnInit)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/hero/hero-detail.component.ts (ngOnInit)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">ngOnInit</span><span class="pun">():</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="com">// get hero when `id` param changes</span><span class="pln">
  </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">route</span><span class="pun">.</span><span class="pln">paramMap</span><span class="pun">.</span><span class="pln">subscribe</span><span class="pun">(</span><span class="pln">pmap </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">getHero</span><span class="pun">(</span><span class="pln">pmap</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="str">'id'</span><span class="pun">)));</span><span class="pln">
</span><span class="pun">}</span></code>
    </pre></aio-code></code-example>
<div class="alert is-helpful">
<p>The <a href="./router-tutorial-toh.html#activated-route-in-action">ActivatedRoute in action</a> section of the <a href="./router-tutorial-toh.html">Router tutorial: tour of heroes</a> guide covers <code><a href="../api/router/ActivatedRoute.html#paramMap" class="code-anchor">ActivatedRoute.paramMap</a></code> in more detail.</p>
</div>
<p>Tests can explore how the <code>HeroDetailComponent</code> responds to different <code>id</code> parameter values
by manipulating the <code><a href="../api/router/ActivatedRoute.html" class="code-anchor">ActivatedRoute</a></code> injected into the component's constructor.</p>
<p>You know how to spy on the <code><a href="../api/router/Router.html" class="code-anchor">Router</a></code> and a data service.</p>
<p>You'll take a different approach with <code><a href="../api/router/ActivatedRoute.html" class="code-anchor">ActivatedRoute</a></code> because</p>
<ul>
<li><code>paramMap</code> returns an <code>Observable</code> that can emit more than one value
during a test.</li>
<li>You need the router helper function, <code><a href="../api/router/convertToParamMap.html" class="code-anchor">convertToParamMap</a>()</code>, to create a <code><a href="../api/router/ParamMap.html" class="code-anchor">ParamMap</a></code>.</li>
<li>Other <em>routed component</em> tests need a test double for <code><a href="../api/router/ActivatedRoute.html" class="code-anchor">ActivatedRoute</a></code>.</li>
</ul>
<p>These differences argue for a re-usable stub class.</p>
<h4 id="activatedroutestub"><em>ActivatedRouteStub</em></h4>
<p>The following <code>ActivatedRouteStub</code> class serves as a test double for <code><a href="../api/router/ActivatedRoute.html" class="code-anchor">ActivatedRoute</a></code>.</p>
<code-example path="testing/src/testing/activated-route-stub.ts" region="activated-route-stub" header="testing/activated-route-stub.ts (ActivatedRouteStub)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">testing/activated-route-stub.ts (ActivatedRouteStub)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from testing/activated-route-stub.ts (ActivatedRouteStub)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="kwd">import</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><a href="../api/router/convertToParamMap.html" class="code-anchor"><span class="pln">convertToParamMap</span></a><span class="pun">,</span><span class="pln"> </span><a href="../api/router/ParamMap.html" class="code-anchor"><span class="typ">ParamMap</span></a><span class="pun">,</span><span class="pln"> </span><a href="../api/router/Params.html" class="code-anchor"><span class="typ">Params</span></a><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> </span><span class="str">'@angular/router'</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="typ">ReplaySubject</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> </span><span class="str">'rxjs'</span><span class="pun">;</span><span class="pln">

</span><span class="com">/**
 * An ActivateRoute test double with a `paramMap` observable.
 * Use the `setParamMap()` method to add the next `paramMap` value.
 */</span><span class="pln">
</span><span class="kwd">export</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">ActivatedRouteStub</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="com">// Use a ReplaySubject to share previous values with subscribers</span><span class="pln">
  </span><span class="com">// and pump new values into the `paramMap` observable</span><span class="pln">
  </span><span class="kwd">private</span><span class="pln"> subject </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ReplaySubject</span><span class="pun">&lt;</span><a href="../api/router/ParamMap.html" class="code-anchor"><span class="typ">ParamMap</span></a><span class="pun">&gt;();</span><span class="pln">

  </span><span class="kwd">constructor</span><span class="pun">(</span><span class="pln">initialParams</span><span class="pun">?:</span><span class="pln"> </span><a href="../api/router/Params.html" class="code-anchor"><span class="typ">Params</span></a><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">setParamMap</span><span class="pun">(</span><span class="pln">initialParams</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="com">/** The mock paramMap observable */</span><span class="pln">
  </span><span class="kwd">readonly</span><span class="pln"> paramMap </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">subject</span><span class="pun">.</span><span class="pln">asObservable</span><span class="pun">();</span><span class="pln">

  </span><span class="com">/** Set the paramMap observable's next value */</span><span class="pln">
  setParamMap</span><span class="pun">(</span><span class="kwd">params</span><span class="pun">:</span><span class="pln"> </span><a href="../api/router/Params.html" class="code-anchor"><span class="typ">Params</span></a><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{})</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">subject</span><span class="pun">.</span><span class="kwd">next</span><span class="pun">(</span><a href="../api/router/convertToParamMap.html" class="code-anchor"><span class="pln">convertToParamMap</span></a><span class="pun">(</span><span class="kwd">params</span><span class="pun">));</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code>
    </pre></aio-code></code-example>
<p>Consider placing such helpers in a <code>testing</code> folder sibling to the <code>app</code> folder.
This sample puts <code>ActivatedRouteStub</code> in <code>testing/activated-route-stub.ts</code>.</p>
<div class="alert is-helpful">
<p>Consider writing a more capable version of this stub class with
the <a href="./testing-components-scenarios.html#marble-testing"><em>marble testing library</em></a>.</p>
</div>
<a id="tests-w-test-double"></a>
<h4 id="testing-with-activatedroutestub">Testing with <em>ActivatedRouteStub</em></h4>
<p>Here's a test demonstrating the component's behavior when the observed <code>id</code> refers to an existing hero:</p>
<code-example path="testing/src/app/hero/hero-detail.component.spec.ts" region="route-good-id" header="app/hero/hero-detail.component.spec.ts (existing id)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/hero/hero-detail.component.spec.ts (existing id)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/hero/hero-detail.component.spec.ts (existing id)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">describe</span><span class="pun">(</span><span class="str">'when navigate to existing hero'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">let</span><span class="pln"> expectedHero</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Hero</span><span class="pun">;</span><span class="pln">

  beforeEach</span><span class="pun">(</span><span class="kwd">async</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    expectedHero </span><span class="pun">=</span><span class="pln"> firstHero</span><span class="pun">;</span><span class="pln">
    activatedRoute</span><span class="pun">.</span><span class="pln">setParamMap</span><span class="pun">({</span><span class="pln">id</span><span class="pun">:</span><span class="pln"> expectedHero</span><span class="pun">.</span><span class="pln">id</span><span class="pun">});</span><span class="pln">
    </span><span class="kwd">await</span><span class="pln"> createComponent</span><span class="pun">();</span><span class="pln">
  </span><span class="pun">});</span><span class="pln">

  it</span><span class="pun">(</span><span class="str">"should display that hero's name"</span><span class="pun">,</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    expect</span><span class="pun">(</span><span class="pln">page</span><span class="pun">.</span><span class="pln">nameDisplay</span><span class="pun">.</span><span class="pln">textContent</span><span class="pun">).</span><span class="pln">toBe</span><span class="pun">(</span><span class="pln">expectedHero</span><span class="pun">.</span><span class="pln">name</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">});</span><span class="pln">
</span><span class="pun">});</span></code>
    </pre></aio-code></code-example>
<div class="alert is-helpful">
<p>In the following section, the <code>createComponent()</code> method and <code>page</code> object are discussed.
Rely on your intuition for now.</p>
</div>
<p>When the <code>id</code> cannot be found, the component should re-route to the <code>HeroListComponent</code>.</p>
<p>The test suite setup provided the same router spy <a href="./testing-components-scenarios.html#routing-component">described above</a> which spies on the router without actually navigating.</p>
<p>This test expects the component to try to navigate to the <code>HeroListComponent</code>.</p>
<code-example path="testing/src/app/hero/hero-detail.component.spec.ts" region="route-bad-id" header="app/hero/hero-detail.component.spec.ts (bad id)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/hero/hero-detail.component.spec.ts (bad id)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/hero/hero-detail.component.spec.ts (bad id)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">describe</span><span class="pun">(</span><span class="str">'when navigate to non-existent hero id'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  beforeEach</span><span class="pun">(</span><span class="kwd">async</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    activatedRoute</span><span class="pun">.</span><span class="pln">setParamMap</span><span class="pun">({</span><span class="pln">id</span><span class="pun">:</span><span class="pln"> </span><span class="lit">99999</span><span class="pun">});</span><span class="pln">
    </span><span class="kwd">await</span><span class="pln"> createComponent</span><span class="pun">();</span><span class="pln">
  </span><span class="pun">});</span><span class="pln">

  it</span><span class="pun">(</span><span class="str">'should try to navigate back to hero list'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    expect</span><span class="pun">(</span><span class="pln">page</span><span class="pun">.</span><span class="pln">gotoListSpy</span><span class="pun">.</span><span class="pln">calls</span><span class="pun">.</span><span class="pln">any</span><span class="pun">())</span><span class="pln">
      </span><span class="pun">.</span><span class="pln">withContext</span><span class="pun">(</span><span class="str">'comp.gotoList called'</span><span class="pun">)</span><span class="pln">
      </span><span class="pun">.</span><span class="pln">toBe</span><span class="pun">(</span><span class="kwd">true</span><span class="pun">);</span><span class="pln">
    expect</span><span class="pun">(</span><span class="pln">page</span><span class="pun">.</span><span class="pln">navigateSpy</span><span class="pun">.</span><span class="pln">calls</span><span class="pun">.</span><span class="pln">any</span><span class="pun">())</span><span class="pln">
      </span><span class="pun">.</span><span class="pln">withContext</span><span class="pun">(</span><span class="str">'router.navigate called'</span><span class="pun">)</span><span class="pln">
      </span><span class="pun">.</span><span class="pln">toBe</span><span class="pun">(</span><span class="kwd">true</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">});</span><span class="pln">
</span><span class="pun">});</span></code>
    </pre></aio-code></code-example>
<p>While this application doesn't have a route to the <code>HeroDetailComponent</code> that omits the <code>id</code> parameter, it might add such a route someday.
The component should do something reasonable when there is no <code>id</code>.</p>
<p>In this implementation, the component should create and display a new hero.
New heroes have <code>id=0</code> and a blank <code>name</code>. This test confirms that the component behaves as expected:</p>
<code-example path="testing/src/app/hero/hero-detail.component.spec.ts" region="route-no-id" header="app/hero/hero-detail.component.spec.ts (no id)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/hero/hero-detail.component.spec.ts (no id)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/hero/hero-detail.component.spec.ts (no id)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">describe</span><span class="pun">(</span><span class="str">'when navigate with no hero id'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  beforeEach</span><span class="pun">(</span><span class="kwd">async</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">await</span><span class="pln"> createComponent</span><span class="pun">();</span><span class="pln">
  </span><span class="pun">});</span><span class="pln">

  it</span><span class="pun">(</span><span class="str">'should have hero.id === 0'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    expect</span><span class="pun">(</span><span class="pln">component</span><span class="pun">.</span><span class="pln">hero</span><span class="pun">.</span><span class="pln">id</span><span class="pun">).</span><span class="pln">toBe</span><span class="pun">(</span><span class="lit">0</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">});</span><span class="pln">

  it</span><span class="pun">(</span><span class="str">'should display empty hero name'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    expect</span><span class="pun">(</span><span class="pln">page</span><span class="pun">.</span><span class="pln">nameDisplay</span><span class="pun">.</span><span class="pln">textContent</span><span class="pun">).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">''</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">});</span><span class="pln">
</span><span class="pun">});</span></code>
    </pre></aio-code></code-example>
<a class="dashAnchor" name="//apple_ref/Section/Nested%20component%20tests"></a><h2 id="nested-component-tests">Nested component tests</h2>
<p>Component templates often have nested components, whose templates
might contain more components.</p>
<p>The component tree can be very deep and, most of the time, the nested components
play no role in testing the component at the top of the tree.</p>
<p>The <code>AppComponent</code>, for example, displays a navigation bar with anchors and their <code><a href="../api/router/RouterLink.html" class="code-anchor">RouterLink</a></code> directives.</p>
<code-example path="testing/src/app/app.component.html" header="app/app.component.html" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/app.component.html</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/app.component.html">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="tag">&lt;app-banner&gt;&lt;/app-banner&gt;</span><span class="pln">
</span><span class="tag">&lt;app-welcome&gt;&lt;/app-welcome&gt;</span><span class="pln">
</span><span class="tag">&lt;nav&gt;</span><span class="pln">
  </span><span class="tag">&lt;a</span><span class="pln"> </span><a href="../api/router/RouterLink.html" class="code-anchor"><span class="atn">routerLink</span></a><span class="pun">=</span><span class="atv">"/dashboard"</span><span class="tag">&gt;</span><span class="pln">Dashboard</span><span class="tag">&lt;/a&gt;</span><span class="pln">
  </span><span class="tag">&lt;a</span><span class="pln"> </span><a href="../api/router/RouterLink.html" class="code-anchor"><span class="atn">routerLink</span></a><span class="pun">=</span><span class="atv">"/heroes"</span><span class="tag">&gt;</span><span class="pln">Heroes</span><span class="tag">&lt;/a&gt;</span><span class="pln">
  </span><span class="tag">&lt;a</span><span class="pln"> </span><a href="../api/router/RouterLink.html" class="code-anchor"><span class="atn">routerLink</span></a><span class="pun">=</span><span class="atv">"/about"</span><span class="tag">&gt;</span><span class="pln">About</span><span class="tag">&lt;/a&gt;</span><span class="pln">
</span><span class="tag">&lt;/nav&gt;</span><span class="pln">
</span><span class="tag">&lt;</span><a href="../api/router/RouterOutlet.html" class="code-anchor"><span class="tag">router-outlet</span></a><span class="tag">&gt;&lt;/</span><a href="../api/router/RouterOutlet.html" class="code-anchor"><span class="tag">router-outlet</span></a><span class="tag">&gt;</span></code>
    </pre></aio-code></code-example>
<p>While the <code>AppComponent</code> <em>class</em> is empty,
you might want to write unit tests to confirm that the links are wired properly
to the <code><a href="../api/router/RouterLink.html" class="code-anchor">RouterLink</a></code> directives, perhaps for the reasons as explained in the <a href="./testing-components-scenarios.html#why-stubbed-routerlink-tests">following section</a>.</p>
<p>To validate the links, you don't need the <code><a href="../api/router/Router.html" class="code-anchor">Router</a></code> to navigate and you don't
need the <code>&lt;<a href="../api/router/RouterOutlet.html" class="code-anchor">router-outlet</a>&gt;</code> to mark where the <code><a href="../api/router/Router.html" class="code-anchor">Router</a></code> inserts <em>routed components</em>.</p>
<p>The <code>BannerComponent</code> and <code>WelcomeComponent</code>
(indicated by <code>&lt;app-banner&gt;</code> and <code>&lt;app-welcome&gt;</code>) are also irrelevant.</p>
<p>Yet any test that creates the <code>AppComponent</code> in the DOM also creates instances of
these three components and, if you let that happen,
you'll have to configure the <code><a href="../api/core/testing/TestBed.html" class="code-anchor">TestBed</a></code> to create them.</p>
<p>If you neglect to declare them, the Angular compiler won't recognize the
<code>&lt;app-banner&gt;</code>, <code>&lt;app-welcome&gt;</code>, and <code>&lt;<a href="../api/router/RouterOutlet.html" class="code-anchor">router-outlet</a>&gt;</code> tags in the <code>AppComponent</code> template
and will throw an error.</p>
<p>If you declare the real components, you'll also have to declare <em>their</em> nested components
and provide for <em>all</em> services injected in <em>any</em> component in the tree.</p>
<p>That's too much effort just to answer a few simple questions about links.</p>
<p>This section describes two techniques for minimizing the setup.
Use them, alone or in combination, to stay focused on testing the primary component.</p>
<a id="stub-component"></a>
<h5 id="stubbing-unneeded-components">Stubbing unneeded components</h5>
<p>In the first technique, you create and declare stub versions of the components
and directive that play little or no role in the tests.</p>
<code-example path="testing/src/app/app.component.spec.ts" region="component-stubs" header="app/app.component.spec.ts (stub declaration)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/app.component.spec.ts (stub declaration)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/app.component.spec.ts (stub declaration)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="lit">@</span><a href="../api/core/Component.html" class="code-anchor"><span class="lit">Component</span></a><span class="pun">({</span><span class="pln">selector</span><span class="pun">:</span><span class="pln"> </span><span class="str">'app-banner'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">template</span><span class="pun">:</span><span class="pln"> </span><span class="str">''</span><span class="pun">})</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">BannerStubComponent</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="lit">@</span><a href="../api/core/Component.html" class="code-anchor"><span class="lit">Component</span></a><span class="pun">({</span><span class="pln">selector</span><span class="pun">:</span><span class="pln"> </span><span class="str">'</span><a href="../api/router/RouterOutlet.html" class="code-anchor"><span class="str">router-outlet</span></a><span class="str">'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">template</span><span class="pun">:</span><span class="pln"> </span><span class="str">''</span><span class="pun">})</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">RouterOutletStubComponent</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="lit">@</span><a href="../api/core/Component.html" class="code-anchor"><span class="lit">Component</span></a><span class="pun">({</span><span class="pln">selector</span><span class="pun">:</span><span class="pln"> </span><span class="str">'app-welcome'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">template</span><span class="pun">:</span><span class="pln"> </span><span class="str">''</span><span class="pun">})</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">WelcomeStubComponent</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
</span><span class="pun">}</span></code>
    </pre></aio-code></code-example>
<p>The stub selectors match the selectors for the corresponding real components.
But their templates and classes are empty.</p>
<p>Then declare them in the <code><a href="../api/core/testing/TestBed.html" class="code-anchor">TestBed</a></code> configuration next to the
components, directives, and pipes that need to be real.</p>
<code-example path="testing/src/app/app.component.spec.ts" region="testbed-stubs" header="app/app.component.spec.ts (TestBed stubs)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/app.component.spec.ts (TestBed stubs)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/app.component.spec.ts (TestBed stubs)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><a href="../api/core/testing/TestBed.html" class="code-anchor"><span class="typ">TestBed</span></a><span class="pln">
    </span><span class="pun">.</span><span class="pln">configureTestingModule</span><span class="pun">({</span><span class="pln">
      declarations</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln">
        </span><span class="typ">AppComponent</span><span class="pun">,</span><span class="pln"> </span><span class="typ">RouterLinkDirectiveStub</span><span class="pun">,</span><span class="pln"> </span><span class="typ">BannerStubComponent</span><span class="pun">,</span><span class="pln"> </span><span class="typ">RouterOutletStubComponent</span><span class="pun">,</span><span class="pln">
        </span><span class="typ">WelcomeStubComponent</span><span class="pln">
      </span><span class="pun">]</span><span class="pln">
    </span><span class="pun">})</span></code>
    </pre></aio-code></code-example>
<p>The <code>AppComponent</code> is the test subject, so of course you declare the real version.</p>
<p>The <code>RouterLinkDirectiveStub</code>, <a href="./testing-components-scenarios.html#routerlink">described later</a>, is a test version
of the real <code><a href="../api/router/RouterLink.html" class="code-anchor">RouterLink</a></code> that helps with the link tests.</p>
<p>The rest are stubs.</p>
<a id="no-errors-schema"></a>
<h4 id="no_errors_schema"><em>NO_ERRORS_SCHEMA</em></h4>
<p>In the second approach, add <code><a href="../api/core/NO_ERRORS_SCHEMA.html" class="code-anchor">NO_ERRORS_SCHEMA</a></code> to the <code>TestBed.schemas</code> metadata.</p>
<code-example path="testing/src/app/app.component.spec.ts" region="no-errors-schema" header="app/app.component.spec.ts (NO_ERRORS_SCHEMA)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/app.component.spec.ts (NO_ERRORS_SCHEMA)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/app.component.spec.ts (NO_ERRORS_SCHEMA)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><a href="../api/core/testing/TestBed.html" class="code-anchor"><span class="typ">TestBed</span></a><span class="pln">
    </span><span class="pun">.</span><span class="pln">configureTestingModule</span><span class="pun">({</span><span class="pln">
      declarations</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln">
        </span><span class="typ">AppComponent</span><span class="pun">,</span><span class="pln">
        </span><span class="typ">RouterLinkDirectiveStub</span><span class="pln">
      </span><span class="pun">],</span><span class="pln">
      schemas</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><a href="../api/core/NO_ERRORS_SCHEMA.html" class="code-anchor"><span class="pln">NO_ERRORS_SCHEMA</span></a><span class="pun">]</span><span class="pln">
    </span><span class="pun">})</span></code>
    </pre></aio-code></code-example>
<p>The <code><a href="../api/core/NO_ERRORS_SCHEMA.html" class="code-anchor">NO_ERRORS_SCHEMA</a></code> tells the Angular compiler to ignore unrecognized elements and attributes.</p>
<p>The compiler recognizes the <code>&lt;app-root&gt;</code> element and the <code><a href="../api/router/RouterLink.html" class="code-anchor">routerLink</a></code> attribute
because you declared a corresponding <code>AppComponent</code> and <code>RouterLinkDirectiveStub</code>
in the <code><a href="../api/core/testing/TestBed.html" class="code-anchor">TestBed</a></code> configuration.</p>
<p>But the compiler won't throw an error when it encounters <code>&lt;app-banner&gt;</code>, <code>&lt;app-welcome&gt;</code>, or <code>&lt;<a href="../api/router/RouterOutlet.html" class="code-anchor">router-outlet</a>&gt;</code>.
It simply renders them as empty tags and the browser ignores them.</p>
<p>You no longer need the stub components.</p>
<h4 id="use-both-techniques-together">Use both techniques together</h4>
<p>These are techniques for <em>Shallow Component Testing</em> ,
so-named because they reduce the visual surface of the component to just those elements
in the component's template that matter for tests.</p>
<p>The <code><a href="../api/core/NO_ERRORS_SCHEMA.html" class="code-anchor">NO_ERRORS_SCHEMA</a></code> approach is the easier of the two but don't overuse it.</p>
<p>The <code><a href="../api/core/NO_ERRORS_SCHEMA.html" class="code-anchor">NO_ERRORS_SCHEMA</a></code> also prevents the compiler from telling you about the missing
components and attributes that you omitted inadvertently or misspelled.
You could waste hours chasing phantom bugs that the compiler would have caught in an instant.</p>
<p>The <em>stub component</em> approach has another advantage.
While the stubs in <em>this</em> example were empty,
you could give them stripped-down templates and classes if your tests
need to interact with them in some way.</p>
<p>In practice you will combine the two techniques in the same setup,
as seen in this example.</p>
<code-example path="testing/src/app/app.component.spec.ts" region="mixed-setup" header="app/app.component.spec.ts (mixed setup)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/app.component.spec.ts (mixed setup)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/app.component.spec.ts (mixed setup)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><a href="../api/core/testing/TestBed.html" class="code-anchor"><span class="typ">TestBed</span></a><span class="pln">
    </span><span class="pun">.</span><span class="pln">configureTestingModule</span><span class="pun">({</span><span class="pln">
      declarations</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln">
        </span><span class="typ">AppComponent</span><span class="pun">,</span><span class="pln">
        </span><span class="typ">BannerStubComponent</span><span class="pun">,</span><span class="pln">
        </span><span class="typ">RouterLinkDirectiveStub</span><span class="pln">
      </span><span class="pun">],</span><span class="pln">
      schemas</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><a href="../api/core/NO_ERRORS_SCHEMA.html" class="code-anchor"><span class="pln">NO_ERRORS_SCHEMA</span></a><span class="pun">]</span><span class="pln">
    </span><span class="pun">})</span></code>
    </pre></aio-code></code-example>
<p>The Angular compiler creates the <code>BannerComponentStub</code> for the <code>&lt;app-banner&gt;</code> element
and applies the <code>RouterLinkStubDirective</code> to the anchors with the <code><a href="../api/router/RouterLink.html" class="code-anchor">routerLink</a></code> attribute,
but it ignores the <code>&lt;app-welcome&gt;</code> and <code>&lt;<a href="../api/router/RouterOutlet.html" class="code-anchor">router-outlet</a>&gt;</code> tags.</p>
<a id="routerlink"></a>
<a class="dashAnchor" name="//apple_ref/Section/Components%20with%20RouterLink"></a><h2 id="components-with-routerlink">Components with <em>RouterLink</em></h2>
<p>The real <code>RouterLinkDirective</code> is quite complicated and entangled with other components
and directives of the <code><a href="../api/router/RouterModule.html" class="code-anchor">RouterModule</a></code>.
It requires challenging setup to mock and use in tests.</p>
<p>The <code>RouterLinkDirectiveStub</code> in this sample code replaces the real directive
with an alternative version designed to validate the kind of anchor tag wiring
seen in the <code>AppComponent</code> template.</p>
<code-example path="testing/src/testing/router-link-directive-stub.ts" region="router-link" header="testing/router-link-directive-stub.ts (RouterLinkDirectiveStub)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">testing/router-link-directive-stub.ts (RouterLinkDirectiveStub)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from testing/router-link-directive-stub.ts (RouterLinkDirectiveStub)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="lit">@</span><a href="../api/core/Directive.html" class="code-anchor"><span class="lit">Directive</span></a><span class="pun">({</span><span class="pln">
  selector</span><span class="pun">:</span><span class="pln"> </span><span class="str">'[</span><a href="../api/router/RouterLink.html" class="code-anchor"><span class="str">routerLink</span></a><span class="str">]'</span><span class="pln">
</span><span class="pun">})</span><span class="pln">
</span><span class="kwd">export</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">RouterLinkDirectiveStub</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="lit">@</span><a href="../api/core/Input.html" class="code-anchor"><span class="lit">Input</span></a><span class="pun">(</span><span class="str">'</span><a href="../api/router/RouterLink.html" class="code-anchor"><span class="str">routerLink</span></a><span class="str">'</span><span class="pun">)</span><span class="pln"> linkParams</span><span class="pun">:</span><span class="pln"> any</span><span class="pun">;</span><span class="pln">
  navigatedTo</span><span class="pun">:</span><span class="pln"> any </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln">

  </span><span class="lit">@</span><a href="../api/core/HostListener.html" class="code-anchor"><span class="lit">HostListener</span></a><span class="pun">(</span><span class="str">'click'</span><span class="pun">)</span><span class="pln">
  onClick</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">navigatedTo </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">linkParams</span><span class="pun">;</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code>
    </pre></aio-code></code-example>
<p>The URL bound to the <code>[<a href="../api/router/RouterLink.html" class="code-anchor">routerLink</a>]</code> attribute flows in to the directive's <code>linkParams</code> property.</p>
<p>The <code><a href="../api/core/HostListener.html" class="code-anchor">HostListener</a></code> wires the click event of the host element
(the <code>&lt;a&gt;</code> anchor elements in <code>AppComponent</code>) to the stub directive's <code>onClick</code> method.</p>
<p>Clicking the anchor should trigger the <code>onClick()</code> method,
which sets the stub's telltale <code>navigatedTo</code> property.
Tests inspect <code>navigatedTo</code> to confirm that clicking the anchor
sets the expected route definition.</p>
<div class="alert is-helpful">
<p>Whether the router is configured properly to navigate with that route definition is a
question for a separate set of tests.</p>
</div>
<a id="by-directive"></a>
<a id="inject-directive"></a>
<h4 id="bydirective-and-injected-directives"><em>By.directive</em> and injected directives</h4>
<p>A little more setup triggers the initial data binding and gets references to the navigation links:</p>
<code-example path="testing/src/app/app.component.spec.ts" region="test-setup" header="app/app.component.spec.ts (test setup)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/app.component.spec.ts (test setup)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/app.component.spec.ts (test setup)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">beforeEach</span><span class="pun">(()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  fixture</span><span class="pun">.</span><span class="pln">detectChanges</span><span class="pun">();</span><span class="pln">  </span><span class="com">// </span><a href="../api/animations/trigger.html" class="code-anchor"><span class="com">trigger</span></a><span class="com"> initial data binding</span><span class="pln">

  </span><span class="com">// find DebugElements with an attached RouterLinkStubDirective</span><span class="pln">
  linkDes </span><span class="pun">=</span><span class="pln"> fixture</span><span class="pun">.</span><span class="pln">debugElement</span><span class="pun">.</span><span class="pln">queryAll</span><span class="pun">(</span><span class="typ">By</span><span class="pun">.</span><span class="pln">directive</span><span class="pun">(</span><span class="typ">RouterLinkDirectiveStub</span><span class="pun">));</span><span class="pln">

  </span><span class="com">// get attached link directive instances</span><span class="pln">
  </span><span class="com">// using each </span><a href="../api/core/DebugElement.html" class="code-anchor"><span class="com">DebugElement</span></a><span class="com">'s injector</span><span class="pln">
  routerLinks </span><span class="pun">=</span><span class="pln"> linkDes</span><span class="pun">.</span><span class="pln">map</span><span class="pun">(</span><span class="pln">de </span><span class="pun">=&gt;</span><span class="pln"> de</span><span class="pun">.</span><span class="pln">injector</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="typ">RouterLinkDirectiveStub</span><span class="pun">));</span><span class="pln">
</span><span class="pun">});</span></code>
    </pre></aio-code></code-example>
<p>Three points of special interest:</p>
<ol>
<li>
<p>Locate the anchor elements with an attached directive using <code>By.directive</code>.</p>
</li>
<li>
<p>The query returns <code><a href="../api/core/DebugElement.html" class="code-anchor">DebugElement</a></code> wrappers around the matching elements.</p>
</li>
<li>
<p>Each <code><a href="../api/core/DebugElement.html" class="code-anchor">DebugElement</a></code> exposes a dependency injector with the
specific instance of the directive attached to that element.</p>
</li>
</ol>
<p>The <code>AppComponent</code> links to validate are as follows:</p>
<code-example path="testing/src/app/app.component.html" region="links" header="app/app.component.html (navigation links)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/app.component.html (navigation links)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/app.component.html (navigation links)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="tag">&lt;nav&gt;</span><span class="pln">
  </span><span class="tag">&lt;a</span><span class="pln"> </span><a href="../api/router/RouterLink.html" class="code-anchor"><span class="atn">routerLink</span></a><span class="pun">=</span><span class="atv">"/dashboard"</span><span class="tag">&gt;</span><span class="pln">Dashboard</span><span class="tag">&lt;/a&gt;</span><span class="pln">
  </span><span class="tag">&lt;a</span><span class="pln"> </span><a href="../api/router/RouterLink.html" class="code-anchor"><span class="atn">routerLink</span></a><span class="pun">=</span><span class="atv">"/heroes"</span><span class="tag">&gt;</span><span class="pln">Heroes</span><span class="tag">&lt;/a&gt;</span><span class="pln">
  </span><span class="tag">&lt;a</span><span class="pln"> </span><a href="../api/router/RouterLink.html" class="code-anchor"><span class="atn">routerLink</span></a><span class="pun">=</span><span class="atv">"/about"</span><span class="tag">&gt;</span><span class="pln">About</span><span class="tag">&lt;/a&gt;</span><span class="pln">
</span><span class="tag">&lt;/nav&gt;</span></code>
    </pre></aio-code></code-example>
<a id="app-component-tests"></a>
<p>Here are some tests that confirm those links are wired to the <code><a href="../api/router/RouterLink.html" class="code-anchor">routerLink</a></code> directives
as expected:</p>
<code-example path="testing/src/app/app.component.spec.ts" region="tests" header="app/app.component.spec.ts (selected tests)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/app.component.spec.ts (selected tests)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/app.component.spec.ts (selected tests)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">it</span><span class="pun">(</span><span class="str">'can get RouterLinks from template'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  expect</span><span class="pun">(</span><span class="pln">routerLinks</span><span class="pun">.</span><span class="pln">length</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">withContext</span><span class="pun">(</span><span class="str">'should have 3 routerLinks'</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">toBe</span><span class="pun">(</span><span class="lit">3</span><span class="pun">);</span><span class="pln">
  expect</span><span class="pun">(</span><span class="pln">routerLinks</span><span class="pun">[</span><span class="lit">0</span><span class="pun">].</span><span class="pln">linkParams</span><span class="pun">).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'/dashboard'</span><span class="pun">);</span><span class="pln">
  expect</span><span class="pun">(</span><span class="pln">routerLinks</span><span class="pun">[</span><span class="lit">1</span><span class="pun">].</span><span class="pln">linkParams</span><span class="pun">).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'/heroes'</span><span class="pun">);</span><span class="pln">
  expect</span><span class="pun">(</span><span class="pln">routerLinks</span><span class="pun">[</span><span class="lit">2</span><span class="pun">].</span><span class="pln">linkParams</span><span class="pun">).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'/about'</span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span><span class="pln">

it</span><span class="pun">(</span><span class="str">'can click Heroes link in template'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">const</span><span class="pln"> heroesLinkDe </span><span class="pun">=</span><span class="pln"> linkDes</span><span class="pun">[</span><span class="lit">1</span><span class="pun">];</span><span class="pln">    </span><span class="com">// heroes link </span><a href="../api/core/DebugElement.html" class="code-anchor"><span class="com">DebugElement</span></a><span class="pln">
  </span><span class="kwd">const</span><span class="pln"> heroesLink </span><span class="pun">=</span><span class="pln"> routerLinks</span><span class="pun">[</span><span class="lit">1</span><span class="pun">];</span><span class="pln">  </span><span class="com">// heroes link directive</span><span class="pln">

  expect</span><span class="pun">(</span><span class="pln">heroesLink</span><span class="pun">.</span><span class="pln">navigatedTo</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">withContext</span><span class="pun">(</span><span class="str">'should not have navigated yet'</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">toBeNull</span><span class="pun">();</span><span class="pln">

  heroesLinkDe</span><span class="pun">.</span><span class="pln">triggerEventHandler</span><span class="pun">(</span><span class="str">'click'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">);</span><span class="pln">
  fixture</span><span class="pun">.</span><span class="pln">detectChanges</span><span class="pun">();</span><span class="pln">

  expect</span><span class="pun">(</span><span class="pln">heroesLink</span><span class="pun">.</span><span class="pln">navigatedTo</span><span class="pun">).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'/heroes'</span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span></code>
    </pre></aio-code></code-example>
<div class="alert is-helpful">
<p>The "click" test <em>in this example</em> is misleading.
It tests the <code>RouterLinkDirectiveStub</code> rather than the <em>component</em>.
This is a common failing of directive stubs.</p>
<p>It has a legitimate purpose in this guide.
It demonstrates how to find a <code><a href="../api/router/RouterLink.html" class="code-anchor">RouterLink</a></code> element, click it, and inspect a result,
without engaging the full router machinery.
This is a skill you might need to test a more sophisticated component, one that changes the display,
re-calculates parameters, or re-arranges navigation options when the user clicks the link.</p>
</div>
<a id="why-stubbed-routerlink-tests"></a>
<h4 id="what-good-are-these-tests">What good are these tests?</h4>
<p>Stubbed <code><a href="../api/router/RouterLink.html" class="code-anchor">RouterLink</a></code> tests can confirm that a component with links and an outlet is setup properly,
that the component has the links it should have, and that they are all pointing in the expected direction.
These tests do not concern whether the application will succeed in navigating to the target component when the user clicks a link.</p>
<p>Stubbing the RouterLink and RouterOutlet is the best option for such limited testing goals.
Relying on the real router would make them brittle.
They could fail for reasons unrelated to the component.
For example, a navigation guard could prevent an unauthorized user from visiting the <code>HeroListComponent</code>.
That's not the fault of the <code>AppComponent</code> and no change to that component could cure the failed test.</p>
<p>A <em>different</em> battery of tests can explore whether the application navigates as expected
in the presence of conditions that influence guards such as whether the user is authenticated and authorized.</p>
<div class="alert is-helpful">
<p>A future guide update explains how to write such
tests with the <code><a href="../api/router/testing/RouterTestingModule.html" class="code-anchor">RouterTestingModule</a></code>.</p>
</div>
<a id="page-object"></a>
<a class="dashAnchor" name="//apple_ref/Section/Use%20a%20page%20object"></a><h2 id="use-a-page-object">Use a <em>page</em> object</h2>
<p>The <code>HeroDetailComponent</code> is a simple view with a title, two hero fields, and two buttons.</p>
<div class="lightbox">
  <img src="../generated/images/guide/testing/hero-detail.component.png" alt="HeroDetailComponent in action" width="269" height="170">
</div>
<p>But there's plenty of template complexity even in this simple form.</p>
<code-example path="testing/src/app/hero/hero-detail.component.html" header="app/hero/hero-detail.component.html" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/hero/hero-detail.component.html</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/hero/hero-detail.component.html">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="tag">&lt;div</span><span class="pln"> *</span><a href="../api/common/NgIf.html" class="code-anchor"><span class="atn">ngIf</span></a><span class="pun">=</span><span class="atv">"hero"</span><span class="tag">&gt;</span><span class="pln">
  </span><span class="tag">&lt;h2&gt;&lt;span&gt;</span><span class="pln">{{hero.name | </span><a href="../api/common/TitleCasePipe.html" class="code-anchor"><span class="pln">titlecase</span></a><span class="pln">}}</span><span class="tag">&lt;/span&gt;</span><span class="pln"> Details</span><span class="tag">&lt;/h2&gt;</span><span class="pln">
  </span><span class="tag">&lt;div&gt;</span><span class="pln">
    </span><span class="tag">&lt;span&gt;</span><span class="pln">id: </span><span class="tag">&lt;/span&gt;</span><span class="pln">{{hero.id}}</span><span class="tag">&lt;/div&gt;</span><span class="pln">
  </span><span class="tag">&lt;div&gt;</span><span class="pln">
    </span><span class="tag">&lt;label</span><span class="pln"> </span><span class="atn">for</span><span class="pun">=</span><span class="atv">"name"</span><span class="tag">&gt;</span><span class="pln">name: </span><span class="tag">&lt;/label&gt;</span><span class="pln">
    </span><span class="tag">&lt;input</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"name"</span><span class="pln"> [(</span><a href="../api/forms/NgModel.html" class="code-anchor"><span class="atn">ngModel</span></a><span class="pln">)]</span><span class="pun">=</span><span class="atv">"hero.name"</span><span class="pln"> </span><span class="atn">placeholder</span><span class="pun">=</span><span class="atv">"name"</span><span class="pln"> </span><span class="tag">/&gt;</span><span class="pln">
  </span><span class="tag">&lt;/div&gt;</span><span class="pln">
  </span><span class="tag">&lt;button</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"button"</span><span class="pln"> (</span><span class="atn">click</span><span class="pln">)</span><span class="pun">=</span><span class="atv">"save()"</span><span class="tag">&gt;</span><span class="pln">Save</span><span class="tag">&lt;/button&gt;</span><span class="pln">
  </span><span class="tag">&lt;button</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"button"</span><span class="pln"> (</span><span class="atn">click</span><span class="pln">)</span><span class="pun">=</span><span class="atv">"cancel()"</span><span class="tag">&gt;</span><span class="pln">Cancel</span><span class="tag">&lt;/button&gt;</span><span class="pln">
</span><span class="tag">&lt;/div&gt;</span></code>
    </pre></aio-code></code-example>
<p>Tests that exercise the component need ...</p>
<ul>
<li>to wait until a hero arrives before elements appear in the DOM.</li>
<li>a reference to the title text.</li>
<li>a reference to the name input box to inspect and set it.</li>
<li>references to the two buttons so they can click them.</li>
<li>spies for some of the component and router methods.</li>
</ul>
<p>Even a small form such as this one can produce a mess of tortured conditional setup and CSS element selection.</p>
<p>Tame the complexity with a <code>Page</code> class that handles access to component properties
and encapsulates the logic that sets them.</p>
<p>Here is such a <code>Page</code> class for the <code>hero-detail.component.spec.ts</code></p>
<code-example path="testing/src/app/hero/hero-detail.component.spec.ts" region="page" header="app/hero/hero-detail.component.spec.ts (Page)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/hero/hero-detail.component.spec.ts (Page)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/hero/hero-detail.component.spec.ts (Page)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Page</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="com">// getter properties wait to </span><a href="../api/animations/query.html" class="code-anchor"><span class="com">query</span></a><span class="com"> the DOM until called.</span><span class="pln">
  </span><span class="kwd">get</span><span class="pln"> buttons</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">queryAll</span><span class="pun">&lt;</span><span class="typ">HTMLButtonElement</span><span class="pun">&gt;(</span><span class="str">'button'</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
  </span><span class="kwd">get</span><span class="pln"> saveBtn</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">buttons</span><span class="pun">[</span><span class="lit">0</span><span class="pun">];</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
  </span><span class="kwd">get</span><span class="pln"> cancelBtn</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">buttons</span><span class="pun">[</span><span class="lit">1</span><span class="pun">];</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
  </span><span class="kwd">get</span><span class="pln"> nameDisplay</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">query</span><span class="pun">&lt;</span><span class="typ">HTMLElement</span><span class="pun">&gt;(</span><span class="str">'span'</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
  </span><span class="kwd">get</span><span class="pln"> nameInput</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">query</span><span class="pun">&lt;</span><span class="typ">HTMLInputElement</span><span class="pun">&gt;(</span><span class="str">'input'</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  gotoListSpy</span><span class="pun">:</span><span class="pln"> jasmine</span><span class="pun">.</span><span class="typ">Spy</span><span class="pun">;</span><span class="pln">
  navigateSpy</span><span class="pun">:</span><span class="pln"> jasmine</span><span class="pun">.</span><span class="typ">Spy</span><span class="pun">;</span><span class="pln">

  </span><span class="kwd">constructor</span><span class="pun">(</span><span class="pln">someFixture</span><span class="pun">:</span><span class="pln"> </span><a href="../api/core/testing/ComponentFixture.html" class="code-anchor"><span class="typ">ComponentFixture</span></a><span class="pun">&lt;</span><span class="typ">HeroDetailComponent</span><span class="pun">&gt;)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="com">// get the navigate spy from the injected router spy object</span><span class="pln">
    </span><span class="kwd">const</span><span class="pln"> routerSpy </span><span class="pun">=</span><span class="pln"> someFixture</span><span class="pun">.</span><span class="pln">debugElement</span><span class="pun">.</span><span class="pln">injector</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><a href="../api/router/Router.html" class="code-anchor"><span class="typ">Router</span></a><span class="pun">)</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> any</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">navigateSpy </span><span class="pun">=</span><span class="pln"> routerSpy</span><span class="pun">.</span><span class="pln">navigate</span><span class="pun">;</span><span class="pln">

    </span><span class="com">// spy on component's `gotoList()` method</span><span class="pln">
    </span><span class="kwd">const</span><span class="pln"> someComponent </span><span class="pun">=</span><span class="pln"> someFixture</span><span class="pun">.</span><span class="pln">componentInstance</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">gotoListSpy </span><span class="pun">=</span><span class="pln"> spyOn</span><span class="pun">(</span><span class="pln">someComponent</span><span class="pun">,</span><span class="pln"> </span><span class="str">'gotoList'</span><span class="pun">).</span><span class="kwd">and</span><span class="pun">.</span><span class="pln">callThrough</span><span class="pun">();</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="com">//// </span><a href="../api/animations/query.html" class="code-anchor"><span class="com">query</span></a><span class="com"> helpers ////</span><span class="pln">
  </span><span class="kwd">private</span><span class="pln"> </span><a href="../api/animations/query.html" class="code-anchor"><span class="pln">query</span></a><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;(</span><span class="pln">selector</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">):</span><span class="pln"> T </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> fixture</span><span class="pun">.</span><span class="pln">nativeElement</span><span class="pun">.</span><span class="pln">querySelector</span><span class="pun">(</span><span class="pln">selector</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">private</span><span class="pln"> queryAll</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;(</span><span class="pln">selector</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">):</span><span class="pln"> T</span><span class="pun">[]</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> fixture</span><span class="pun">.</span><span class="pln">nativeElement</span><span class="pun">.</span><span class="pln">querySelectorAll</span><span class="pun">(</span><span class="pln">selector</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code>
    </pre></aio-code></code-example>
<p>Now the important hooks for component manipulation and inspection are neatly organized and accessible from an instance of <code>Page</code>.</p>
<p>A <code>createComponent</code> method creates a <code>page</code> object and fills in the blanks once the <code>hero</code> arrives.</p>
<code-example path="testing/src/app/hero/hero-detail.component.spec.ts" region="create-component" header="app/hero/hero-detail.component.spec.ts (createComponent)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/hero/hero-detail.component.spec.ts (createComponent)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/hero/hero-detail.component.spec.ts (createComponent)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="com">/** Create the HeroDetailComponent, initialize it, set test variables  */</span><span class="pln">
</span><span class="kwd">function</span><span class="pln"> createComponent</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  fixture </span><span class="pun">=</span><span class="pln"> </span><span class="typ">TestBed</span><span class="pun">.</span><span class="pln">createComponent</span><span class="pun">(</span><span class="typ">HeroDetailComponent</span><span class="pun">);</span><span class="pln">
  component </span><span class="pun">=</span><span class="pln"> fixture</span><span class="pun">.</span><span class="pln">componentInstance</span><span class="pun">;</span><span class="pln">
  page </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Page</span><span class="pun">(</span><span class="pln">fixture</span><span class="pun">);</span><span class="pln">

  </span><span class="com">// 1st change detection triggers ngOnInit which gets a hero</span><span class="pln">
  fixture</span><span class="pun">.</span><span class="pln">detectChanges</span><span class="pun">();</span><span class="pln">
  </span><span class="kwd">return</span><span class="pln"> fixture</span><span class="pun">.</span><span class="pln">whenStable</span><span class="pun">().</span><span class="kwd">then</span><span class="pun">(()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="com">// 2nd change detection displays the async-fetched hero</span><span class="pln">
    fixture</span><span class="pun">.</span><span class="pln">detectChanges</span><span class="pun">();</span><span class="pln">
  </span><span class="pun">});</span><span class="pln">
</span><span class="pun">}</span></code>
    </pre></aio-code></code-example>
<p>The <a href="./testing-components-scenarios.html#tests-w-test-double"><em>HeroDetailComponent</em> tests</a> in an earlier section demonstrate how <code>createComponent</code> and <code>page</code>
keep the tests short and <em>on message</em>.
There are no distractions: no waiting for promises to resolve and no searching the DOM for element values to compare.</p>
<p>Here are a few more <code>HeroDetailComponent</code> tests to reinforce the point.</p>
<code-example path="testing/src/app/hero/hero-detail.component.spec.ts" region="selected-tests" header="app/hero/hero-detail.component.spec.ts (selected tests)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/hero/hero-detail.component.spec.ts (selected tests)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/hero/hero-detail.component.spec.ts (selected tests)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">it</span><span class="pun">(</span><span class="str">"should display that hero's name"</span><span class="pun">,</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  expect</span><span class="pun">(</span><span class="pln">page</span><span class="pun">.</span><span class="pln">nameDisplay</span><span class="pun">.</span><span class="pln">textContent</span><span class="pun">).</span><span class="pln">toBe</span><span class="pun">(</span><span class="pln">expectedHero</span><span class="pun">.</span><span class="pln">name</span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span><span class="pln">

it</span><span class="pun">(</span><span class="str">'should navigate when click cancel'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  click</span><span class="pun">(</span><span class="pln">page</span><span class="pun">.</span><span class="pln">cancelBtn</span><span class="pun">);</span><span class="pln">
  expect</span><span class="pun">(</span><span class="pln">page</span><span class="pun">.</span><span class="pln">navigateSpy</span><span class="pun">.</span><span class="pln">calls</span><span class="pun">.</span><span class="pln">any</span><span class="pun">())</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">withContext</span><span class="pun">(</span><span class="str">'router.navigate called'</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">toBe</span><span class="pun">(</span><span class="kwd">true</span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span><span class="pln">

it</span><span class="pun">(</span><span class="str">'should save when click save but not navigate immediately'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="com">// Get service injected into component and spy on its`saveHero` method.</span><span class="pln">
  </span><span class="com">// It delegates to fake `HeroService.updateHero` which delivers a safe test result.</span><span class="pln">
  </span><span class="kwd">const</span><span class="pln"> hds </span><span class="pun">=</span><span class="pln"> fixture</span><span class="pun">.</span><span class="pln">debugElement</span><span class="pun">.</span><span class="pln">injector</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="typ">HeroDetailService</span><span class="pun">);</span><span class="pln">
  </span><span class="kwd">const</span><span class="pln"> saveSpy </span><span class="pun">=</span><span class="pln"> spyOn</span><span class="pun">(</span><span class="pln">hds</span><span class="pun">,</span><span class="pln"> </span><span class="str">'saveHero'</span><span class="pun">).</span><span class="kwd">and</span><span class="pun">.</span><span class="pln">callThrough</span><span class="pun">();</span><span class="pln">

  click</span><span class="pun">(</span><span class="pln">page</span><span class="pun">.</span><span class="pln">saveBtn</span><span class="pun">);</span><span class="pln">
  expect</span><span class="pun">(</span><span class="pln">saveSpy</span><span class="pun">.</span><span class="pln">calls</span><span class="pun">.</span><span class="pln">any</span><span class="pun">())</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">withContext</span><span class="pun">(</span><span class="str">'HeroDetailService.save called'</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">toBe</span><span class="pun">(</span><span class="kwd">true</span><span class="pun">);</span><span class="pln">
  expect</span><span class="pun">(</span><span class="pln">page</span><span class="pun">.</span><span class="pln">navigateSpy</span><span class="pun">.</span><span class="pln">calls</span><span class="pun">.</span><span class="pln">any</span><span class="pun">())</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">withContext</span><span class="pun">(</span><span class="str">'router.navigate not called'</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">toBe</span><span class="pun">(</span><span class="kwd">false</span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span><span class="pln">

it</span><span class="pun">(</span><span class="str">'should navigate when click save and save resolves'</span><span class="pun">,</span><span class="pln"> </span><a href="../api/core/testing/fakeAsync.html" class="code-anchor"><span class="pln">fakeAsync</span></a><span class="pun">(()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
     click</span><span class="pun">(</span><span class="pln">page</span><span class="pun">.</span><span class="pln">saveBtn</span><span class="pun">);</span><span class="pln">
     </span><a href="../api/core/testing/tick.html" class="code-anchor"><span class="pln">tick</span></a><span class="pun">();</span><span class="pln">  </span><span class="com">// wait for async save to complete</span><span class="pln">
     expect</span><span class="pun">(</span><span class="pln">page</span><span class="pun">.</span><span class="pln">navigateSpy</span><span class="pun">.</span><span class="pln">calls</span><span class="pun">.</span><span class="pln">any</span><span class="pun">())</span><span class="pln">
      </span><span class="pun">.</span><span class="pln">withContext</span><span class="pun">(</span><span class="str">'router.navigate called'</span><span class="pun">)</span><span class="pln">
      </span><span class="pun">.</span><span class="pln">toBe</span><span class="pun">(</span><span class="kwd">true</span><span class="pun">);</span><span class="pln">
   </span><span class="pun">}));</span><span class="pln">

it</span><span class="pun">(</span><span class="str">'should convert hero name to </span><a href="../api/platform-browser/Title.html" class="code-anchor"><span class="str">Title</span></a><span class="str"> Case'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="com">// get the name's input and display elements from the DOM</span><span class="pln">
  </span><span class="kwd">const</span><span class="pln"> hostElement</span><span class="pun">:</span><span class="pln"> </span><span class="typ">HTMLElement</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> fixture</span><span class="pun">.</span><span class="pln">nativeElement</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">const</span><span class="pln"> nameInput</span><span class="pun">:</span><span class="pln"> </span><span class="typ">HTMLInputElement</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> hostElement</span><span class="pun">.</span><span class="pln">querySelector</span><span class="pun">(</span><span class="str">'input'</span><span class="pun">)!;</span><span class="pln">
  </span><span class="kwd">const</span><span class="pln"> nameDisplay</span><span class="pun">:</span><span class="pln"> </span><span class="typ">HTMLElement</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> hostElement</span><span class="pun">.</span><span class="pln">querySelector</span><span class="pun">(</span><span class="str">'span'</span><span class="pun">)!;</span><span class="pln">

  </span><span class="com">// simulate user entering a new name into the input box</span><span class="pln">
  nameInput</span><span class="pun">.</span><span class="kwd">value</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">'quick BROWN  fOx'</span><span class="pun">;</span><span class="pln">

  </span><span class="com">// Dispatch a DOM event so that Angular learns of input value change.</span><span class="pln">
  nameInput</span><span class="pun">.</span><span class="pln">dispatchEvent</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><a href="../api/router/Event.html" class="code-anchor"><span class="typ">Event</span></a><span class="pun">(</span><span class="str">'input'</span><span class="pun">));</span><span class="pln">

  </span><span class="com">// Tell Angular to update the display binding through the title pipe</span><span class="pln">
  fixture</span><span class="pun">.</span><span class="pln">detectChanges</span><span class="pun">();</span><span class="pln">

  expect</span><span class="pun">(</span><span class="pln">nameDisplay</span><span class="pun">.</span><span class="pln">textContent</span><span class="pun">).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'Quick Brown  Fox'</span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span></code>
    </pre></aio-code></code-example>
<a id="compile-components"></a>
<a class="dashAnchor" name="//apple_ref/Section/Calling%20compileComponents%28%29"></a><h2 id="calling-compilecomponents">Calling <em>compileComponents()</em></h2>
<div class="alert is-helpful">
<p>Ignore this section if you <em>only</em> run tests with the CLI <code>ng test</code> command
because the CLI compiles the application before running the tests.</p>
</div>
<p>If you run tests in a <strong>non-CLI environment</strong>, the tests might fail with a message like this one:</p>
<code-example language="sh" hidecopy="" ng-version="13.2.2"><div style="display: none;"></div><!----><aio-code><pre class="lang-sh prettyprint">      <!---->
      <code class="animated fadeIn"><span class="typ">Error</span><span class="pun">:</span><span class="pln"> </span><span class="typ">This</span><span class="pln"> test module uses the component </span><span class="typ">BannerComponent</span><span class="pln">
which is using a </span><span class="str">"templateUrl"</span><span class="pln"> or </span><span class="str">"styleUrls"</span><span class="pun">,</span><span class="pln"> but they were never compiled</span><span class="pun">.</span><span class="pln">
</span><span class="typ">Please</span><span class="pln"> call </span><span class="str">"TestBed.compileComponents"</span><span class="pln"> before your test</span><span class="pun">.</span></code>
    </pre></aio-code></code-example>
<p>The root of the problem is at least one of the components involved in the test
specifies an external template or CSS file as
the following version of the <code>BannerComponent</code> does.</p>
<code-example path="testing/src/app/banner/banner-external.component.ts" header="app/banner/banner-external.component.ts (external template &amp; css)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/banner/banner-external.component.ts (external template &amp; css)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/banner/banner-external.component.ts (external template &amp; css)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="kwd">import</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><a href="../api/core/Component.html" class="code-anchor"><span class="typ">Component</span></a><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> </span><span class="str">'@angular/core'</span><span class="pun">;</span><span class="pln">

</span><span class="lit">@</span><a href="../api/core/Component.html" class="code-anchor"><span class="lit">Component</span></a><span class="pun">({</span><span class="pln">
  selector</span><span class="pun">:</span><span class="pln"> </span><span class="str">'app-banner'</span><span class="pun">,</span><span class="pln">
  templateUrl</span><span class="pun">:</span><span class="pln"> </span><span class="str">'./banner-external.component.html'</span><span class="pun">,</span><span class="pln">
  styleUrls</span><span class="pun">:</span><span class="pln">  </span><span class="pun">[</span><span class="str">'./banner-external.component.css'</span><span class="pun">]</span><span class="pln">
</span><span class="pun">})</span><span class="pln">
</span><span class="kwd">export</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">BannerComponent</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  title </span><span class="pun">=</span><span class="pln"> </span><span class="str">'Test Tour of Heroes'</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></code>
    </pre></aio-code></code-example>
<p>The test fails when the <code><a href="../api/core/testing/TestBed.html" class="code-anchor">TestBed</a></code> tries to create the component.</p>
<code-example path="testing/src/app/banner/banner-external.component.spec.ts" region="setup-may-fail" header="app/banner/banner-external.component.spec.ts (setup that fails)" avoid="" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/banner/banner-external.component.spec.ts (setup that fails)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/banner/banner-external.component.spec.ts (setup that fails)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">beforeEach</span><span class="pun">(</span><span class="kwd">async</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">await</span><span class="pln"> </span><span class="typ">TestBed</span><span class="pun">.</span><span class="pln">configureTestingModule</span><span class="pun">({</span><span class="pln">
    declarations</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln"> </span><span class="typ">BannerComponent</span><span class="pln"> </span><span class="pun">],</span><span class="pln">
  </span><span class="pun">});</span><span class="pln"> </span><span class="com">// missing call to compileComponents()</span><span class="pln">
  fixture </span><span class="pun">=</span><span class="pln"> </span><span class="typ">TestBed</span><span class="pun">.</span><span class="pln">createComponent</span><span class="pun">(</span><span class="typ">BannerComponent</span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span></code>
    </pre></aio-code></code-example>
<p>Recall that the application hasn't been compiled.
So when you call <code>createComponent()</code>, the <code><a href="../api/core/testing/TestBed.html" class="code-anchor">TestBed</a></code> compiles implicitly.</p>
<p>That's not a problem when the source code is in memory.
But the <code>BannerComponent</code> requires external files
that the compiler must read from the file system,
an inherently <em>asynchronous</em> operation.</p>
<p>If the <code><a href="../api/core/testing/TestBed.html" class="code-anchor">TestBed</a></code> were allowed to continue, the tests would run and fail mysteriously
before the compiler could finished.</p>
<p>The preemptive error message tells you to compile explicitly with <code>compileComponents()</code>.</p>
<h4 id="compilecomponents-is-async"><em>compileComponents()</em> is async</h4>
<p>You must call <code>compileComponents()</code> within an asynchronous test function.</p>
<div class="alert is-critical">
<p>If you neglect to make the test function async
(for example, forget to use <code><a href="../api/core/testing/waitForAsync.html" class="code-anchor">waitForAsync</a>()</code> as described),
you'll see this error message</p>
<code-example language="sh" hidecopy="" ng-version="13.2.2"><div style="display: none;"></div><!----><aio-code><pre class="lang-sh prettyprint">      <!---->
      <code class="animated fadeIn"><span class="typ">Error</span><span class="pun">:</span><span class="pln"> </span><span class="typ">ViewDestroyedError</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Attempt</span><span class="pln"> to use a destroyed view</span></code>
    </pre></aio-code></code-example>
</div>
<p>A typical approach is to divide the setup logic into two separate <code>beforeEach()</code> functions:</p>
<ol>
<li>An async <code>beforeEach()</code> that compiles the components</li>
<li>A synchronous <code>beforeEach()</code> that performs the remaining setup.</li>
</ol>
<h4 id="the-async-beforeeach">The async <em>beforeEach</em></h4>
<p>Write the first async <code>beforeEach</code> like this.</p>
<code-example path="testing/src/app/banner/banner-external.component.spec.ts" region="async-before-each" header="app/banner/banner-external.component.spec.ts (async beforeEach)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/banner/banner-external.component.spec.ts (async beforeEach)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/banner/banner-external.component.spec.ts (async beforeEach)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">beforeEach</span><span class="pun">(</span><span class="kwd">async</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">await</span><span class="pln"> </span><span class="typ">TestBed</span><span class="pun">.</span><span class="pln">configureTestingModule</span><span class="pun">({</span><span class="pln">
    declarations</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln"> </span><span class="typ">BannerComponent</span><span class="pln"> </span><span class="pun">],</span><span class="pln">
  </span><span class="pun">}).</span><span class="pln">compileComponents</span><span class="pun">();</span><span class="pln">  </span><span class="com">// compile template and css</span><span class="pln">
</span><span class="pun">});</span></code>
    </pre></aio-code></code-example>
<p>The <code>TestBed.configureTestingModule()</code> method returns the <code><a href="../api/core/testing/TestBed.html" class="code-anchor">TestBed</a></code> class so you can chain
calls to other <code><a href="../api/core/testing/TestBed.html" class="code-anchor">TestBed</a></code> static methods such as <code>compileComponents()</code>.</p>
<p>In this example, the <code>BannerComponent</code> is the only component to compile.
Other examples configure the testing module with multiple components
and might import application modules that hold yet more components.
Any of them could require external files.</p>
<p>The <code>TestBed.compileComponents</code> method asynchronously compiles all components configured in the testing module.</p>
<div class="alert is-important">
<p>Do not re-configure the <code><a href="../api/core/testing/TestBed.html" class="code-anchor">TestBed</a></code> after calling <code>compileComponents()</code>.</p>
</div>
<p>Calling <code>compileComponents()</code> closes the current <code><a href="../api/core/testing/TestBed.html" class="code-anchor">TestBed</a></code> instance to further configuration.
You cannot call any more <code><a href="../api/core/testing/TestBed.html" class="code-anchor">TestBed</a></code> configuration methods, not <code>configureTestingModule()</code>
nor any of the <code>override...</code> methods. The <code><a href="../api/core/testing/TestBed.html" class="code-anchor">TestBed</a></code> throws an error if you try.</p>
<p>Make <code>compileComponents()</code> the last step
before calling <code>TestBed.createComponent()</code>.</p>
<h4 id="the-synchronous-beforeeach">The synchronous <em>beforeEach</em></h4>
<p>The second, synchronous <code>beforeEach()</code> contains the remaining setup steps,
which include creating the component and querying for elements to inspect.</p>
<code-example path="testing/src/app/banner/banner-external.component.spec.ts" region="sync-before-each" header="app/banner/banner-external.component.spec.ts (synchronous beforeEach)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/banner/banner-external.component.spec.ts (synchronous beforeEach)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/banner/banner-external.component.spec.ts (synchronous beforeEach)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">beforeEach</span><span class="pun">(()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  fixture </span><span class="pun">=</span><span class="pln"> </span><span class="typ">TestBed</span><span class="pun">.</span><span class="pln">createComponent</span><span class="pun">(</span><span class="typ">BannerComponent</span><span class="pun">);</span><span class="pln">
  component </span><span class="pun">=</span><span class="pln"> fixture</span><span class="pun">.</span><span class="pln">componentInstance</span><span class="pun">;</span><span class="pln">  </span><span class="com">// BannerComponent test instance</span><span class="pln">
  h1 </span><span class="pun">=</span><span class="pln"> fixture</span><span class="pun">.</span><span class="pln">nativeElement</span><span class="pun">.</span><span class="pln">querySelector</span><span class="pun">(</span><span class="str">'h1'</span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span></code>
    </pre></aio-code></code-example>
<p>Count on the test runner to wait for the first asynchronous <code>beforeEach</code> to finish before calling the second.</p>
<h4 id="consolidated-setup">Consolidated setup</h4>
<p>You can consolidate the two <code>beforeEach()</code> functions into a single, async <code>beforeEach()</code>.</p>
<p>The <code>compileComponents()</code> method returns a promise so you can perform the
synchronous setup tasks <em>after</em> compilation by moving the synchronous code
after the <code>await</code> keyword, where the promise has been resolved.</p>
<code-example path="testing/src/app/banner/banner-external.component.spec.ts" region="one-before-each" header="app/banner/banner-external.component.spec.ts (one beforeEach)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/banner/banner-external.component.spec.ts (one beforeEach)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/banner/banner-external.component.spec.ts (one beforeEach)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">beforeEach</span><span class="pun">(</span><span class="kwd">async</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">await</span><span class="pln"> </span><span class="typ">TestBed</span><span class="pun">.</span><span class="pln">configureTestingModule</span><span class="pun">({</span><span class="pln">
    declarations</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln"> </span><span class="typ">BannerComponent</span><span class="pln"> </span><span class="pun">],</span><span class="pln">
  </span><span class="pun">}).</span><span class="pln">compileComponents</span><span class="pun">();</span><span class="pln">
  fixture </span><span class="pun">=</span><span class="pln"> </span><span class="typ">TestBed</span><span class="pun">.</span><span class="pln">createComponent</span><span class="pun">(</span><span class="typ">BannerComponent</span><span class="pun">);</span><span class="pln">
  component </span><span class="pun">=</span><span class="pln"> fixture</span><span class="pun">.</span><span class="pln">componentInstance</span><span class="pun">;</span><span class="pln">
  h1 </span><span class="pun">=</span><span class="pln"> fixture</span><span class="pun">.</span><span class="pln">nativeElement</span><span class="pun">.</span><span class="pln">querySelector</span><span class="pun">(</span><span class="str">'h1'</span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span></code>
    </pre></aio-code></code-example>
<h4 id="compilecomponents-is-harmless"><em>compileComponents()</em> is harmless</h4>
<p>There's no harm in calling <code>compileComponents()</code> when it's not required.</p>
<p>The component test file generated by the CLI calls <code>compileComponents()</code>
even though it is never required when running <code>ng test</code>.</p>
<p>The tests in this guide only call <code>compileComponents</code> when necessary.</p>
<a id="import-module"></a>
<a class="dashAnchor" name="//apple_ref/Section/Setup%20with%20module%20imports"></a><h2 id="setup-with-module-imports">Setup with module imports</h2>
<p>Earlier component tests configured the testing module with a few <code>declarations</code> like this:</p>
<code-example path="testing/src/app/dashboard/dashboard-hero.component.spec.ts" region="config-testbed" header="app/dashboard/dashboard-hero.component.spec.ts (configure TestBed)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/dashboard/dashboard-hero.component.spec.ts (configure TestBed)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/dashboard/dashboard-hero.component.spec.ts (configure TestBed)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><a href="../api/core/testing/TestBed.html" class="code-anchor"><span class="typ">TestBed</span></a><span class="pln">
    </span><span class="pun">.</span><span class="pln">configureTestingModule</span><span class="pun">({</span><span class="pln">declarations</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="typ">DashboardHeroComponent</span><span class="pun">]})</span></code>
    </pre></aio-code></code-example>
<p>The <code>DashboardComponent</code> is simple. It needs no help.
But more complex components often depend on other components, directives, pipes, and providers
and these must be added to the testing module too.</p>
<p>Fortunately, the <code>TestBed.configureTestingModule</code> parameter parallels
the metadata passed to the <code>@<a href="../api/core/NgModule.html" class="code-anchor">NgModule</a></code> decorator
which means you can also specify <code>providers</code> and <code>imports</code>.</p>
<p>The <code>HeroDetailComponent</code> requires a lot of help despite its small size and simple construction.
In addition to the support it receives from the default testing module <code><a href="../api/common/CommonModule.html" class="code-anchor">CommonModule</a></code>, it needs:</p>
<ul>
<li><code><a href="../api/forms/NgModel.html" class="code-anchor">NgModel</a></code> and friends in the <code><a href="../api/forms/FormsModule.html" class="code-anchor">FormsModule</a></code> to enable two-way data binding.</li>
<li>The <code><a href="../api/common/TitleCasePipe.html" class="code-anchor">TitleCasePipe</a></code> from the <code>shared</code> folder.</li>
<li>Router services (which these tests are stubbing).</li>
<li>Hero data access services (also stubbed).</li>
</ul>
<p>One approach is to configure the testing module from the individual pieces as in this example:</p>
<code-example path="testing/src/app/hero/hero-detail.component.spec.ts" region="setup-forms-module" header="app/hero/hero-detail.component.spec.ts (FormsModule setup)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/hero/hero-detail.component.spec.ts (FormsModule setup)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/hero/hero-detail.component.spec.ts (FormsModule setup)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">beforeEach</span><span class="pun">(</span><span class="kwd">async</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">const</span><span class="pln"> routerSpy </span><span class="pun">=</span><span class="pln"> createRouterSpy</span><span class="pun">();</span><span class="pln">

  </span><span class="kwd">await</span><span class="pln"> </span><a href="../api/core/testing/TestBed.html" class="code-anchor"><span class="typ">TestBed</span></a><span class="pln">
      </span><span class="pun">.</span><span class="pln">configureTestingModule</span><span class="pun">({</span><span class="pln">
        imports</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><a href="../api/forms/FormsModule.html" class="code-anchor"><span class="typ">FormsModule</span></a><span class="pun">],</span><span class="pln">
        declarations</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="typ">HeroDetailComponent</span><span class="pun">,</span><span class="pln"> </span><a href="../api/common/TitleCasePipe.html" class="code-anchor"><span class="typ">TitleCasePipe</span></a><span class="pun">],</span><span class="pln">
        providers</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln">
          </span><span class="pun">{</span><span class="pln">provide</span><span class="pun">:</span><span class="pln"> </span><a href="../api/router/ActivatedRoute.html" class="code-anchor"><span class="typ">ActivatedRoute</span></a><span class="pun">,</span><span class="pln"> useValue</span><span class="pun">:</span><span class="pln"> activatedRoute</span><span class="pun">},</span><span class="pln">
          </span><span class="pun">{</span><span class="pln">provide</span><span class="pun">:</span><span class="pln"> </span><span class="typ">HeroService</span><span class="pun">,</span><span class="pln"> useClass</span><span class="pun">:</span><span class="pln"> </span><span class="typ">TestHeroService</span><span class="pun">},</span><span class="pln">
          </span><span class="pun">{</span><span class="pln">provide</span><span class="pun">:</span><span class="pln"> </span><a href="../api/router/Router.html" class="code-anchor"><span class="typ">Router</span></a><span class="pun">,</span><span class="pln"> useValue</span><span class="pun">:</span><span class="pln"> routerSpy</span><span class="pun">},</span><span class="pln">
        </span><span class="pun">]</span><span class="pln">
      </span><span class="pun">})</span><span class="pln">
      </span><span class="pun">.</span><span class="pln">compileComponents</span><span class="pun">();</span><span class="pln">
</span><span class="pun">});</span></code>
    </pre></aio-code></code-example>
<div class="alert is-helpful">
<p>Notice that the <code>beforeEach()</code> is asynchronous and calls <code>TestBed.compileComponents</code>
because the <code>HeroDetailComponent</code> has an external template and css file.</p>
<p>As explained in <a href="./testing-components-scenarios.html#compile-components"><em>Calling compileComponents()</em></a>,
these tests could be run in a non-CLI environment
where Angular would have to compile them in the browser.</p>
</div>
<h4 id="import-a-shared-module">Import a shared module</h4>
<p>Because many application components need the <code><a href="../api/forms/FormsModule.html" class="code-anchor">FormsModule</a></code> and the <code><a href="../api/common/TitleCasePipe.html" class="code-anchor">TitleCasePipe</a></code>, the developer created
a <code>SharedModule</code> to combine these and other frequently requested parts.</p>
<p>The test configuration can use the <code>SharedModule</code> too as seen in this alternative setup:</p>
<code-example path="testing/src/app/hero/hero-detail.component.spec.ts" region="setup-shared-module" header="app/hero/hero-detail.component.spec.ts (SharedModule setup)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/hero/hero-detail.component.spec.ts (SharedModule setup)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/hero/hero-detail.component.spec.ts (SharedModule setup)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">beforeEach</span><span class="pun">(</span><span class="kwd">async</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">const</span><span class="pln"> routerSpy </span><span class="pun">=</span><span class="pln"> createRouterSpy</span><span class="pun">();</span><span class="pln">

  </span><span class="kwd">await</span><span class="pln"> </span><a href="../api/core/testing/TestBed.html" class="code-anchor"><span class="typ">TestBed</span></a><span class="pln">
      </span><span class="pun">.</span><span class="pln">configureTestingModule</span><span class="pun">({</span><span class="pln">
        imports</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="typ">SharedModule</span><span class="pun">],</span><span class="pln">
        declarations</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="typ">HeroDetailComponent</span><span class="pun">],</span><span class="pln">
        providers</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln">
          </span><span class="pun">{</span><span class="pln">provide</span><span class="pun">:</span><span class="pln"> </span><a href="../api/router/ActivatedRoute.html" class="code-anchor"><span class="typ">ActivatedRoute</span></a><span class="pun">,</span><span class="pln"> useValue</span><span class="pun">:</span><span class="pln"> activatedRoute</span><span class="pun">},</span><span class="pln">
          </span><span class="pun">{</span><span class="pln">provide</span><span class="pun">:</span><span class="pln"> </span><span class="typ">HeroService</span><span class="pun">,</span><span class="pln"> useClass</span><span class="pun">:</span><span class="pln"> </span><span class="typ">TestHeroService</span><span class="pun">},</span><span class="pln">
          </span><span class="pun">{</span><span class="pln">provide</span><span class="pun">:</span><span class="pln"> </span><a href="../api/router/Router.html" class="code-anchor"><span class="typ">Router</span></a><span class="pun">,</span><span class="pln"> useValue</span><span class="pun">:</span><span class="pln"> routerSpy</span><span class="pun">},</span><span class="pln">
        </span><span class="pun">]</span><span class="pln">
      </span><span class="pun">})</span><span class="pln">
      </span><span class="pun">.</span><span class="pln">compileComponents</span><span class="pun">();</span><span class="pln">
</span><span class="pun">});</span></code>
    </pre></aio-code></code-example>
<p>It's a bit tighter and smaller, with fewer import statements (not shown).</p>
<a id="feature-module-import"></a>
<h4 id="import-a-feature-module">Import a feature module</h4>
<p>The <code>HeroDetailComponent</code> is part of the <code>HeroModule</code> <a href="./feature-modules.html">Feature Module</a> that aggregates more of the interdependent pieces
including the <code>SharedModule</code>.
Try a test configuration that imports the <code>HeroModule</code> like this one:</p>
<code-example path="testing/src/app/hero/hero-detail.component.spec.ts" region="setup-hero-module" header="app/hero/hero-detail.component.spec.ts (HeroModule setup)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/hero/hero-detail.component.spec.ts (HeroModule setup)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/hero/hero-detail.component.spec.ts (HeroModule setup)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">beforeEach</span><span class="pun">(</span><span class="kwd">async</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">const</span><span class="pln"> routerSpy </span><span class="pun">=</span><span class="pln"> createRouterSpy</span><span class="pun">();</span><span class="pln">

  </span><span class="kwd">await</span><span class="pln"> </span><a href="../api/core/testing/TestBed.html" class="code-anchor"><span class="typ">TestBed</span></a><span class="pln">
      </span><span class="pun">.</span><span class="pln">configureTestingModule</span><span class="pun">({</span><span class="pln">
        imports</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="typ">HeroModule</span><span class="pun">],</span><span class="pln">
        providers</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln">
          </span><span class="pun">{</span><span class="pln">provide</span><span class="pun">:</span><span class="pln"> </span><a href="../api/router/ActivatedRoute.html" class="code-anchor"><span class="typ">ActivatedRoute</span></a><span class="pun">,</span><span class="pln"> useValue</span><span class="pun">:</span><span class="pln"> activatedRoute</span><span class="pun">},</span><span class="pln">
          </span><span class="pun">{</span><span class="pln">provide</span><span class="pun">:</span><span class="pln"> </span><span class="typ">HeroService</span><span class="pun">,</span><span class="pln"> useClass</span><span class="pun">:</span><span class="pln"> </span><span class="typ">TestHeroService</span><span class="pun">},</span><span class="pln">
          </span><span class="pun">{</span><span class="pln">provide</span><span class="pun">:</span><span class="pln"> </span><a href="../api/router/Router.html" class="code-anchor"><span class="typ">Router</span></a><span class="pun">,</span><span class="pln"> useValue</span><span class="pun">:</span><span class="pln"> routerSpy</span><span class="pun">},</span><span class="pln">
        </span><span class="pun">]</span><span class="pln">
      </span><span class="pun">})</span><span class="pln">
      </span><span class="pun">.</span><span class="pln">compileComponents</span><span class="pun">();</span><span class="pln">
</span><span class="pun">});</span></code>
    </pre></aio-code></code-example>
<p>That's <em>really</em> crisp. Only the <em>test doubles</em> in the <code>providers</code> remain. Even the <code>HeroDetailComponent</code> declaration is gone.</p>
<p>In fact, if you try to declare it, Angular will throw an error because
<code>HeroDetailComponent</code> is declared in both the <code>HeroModule</code> and the <code>DynamicTestModule</code>
created by the <code><a href="../api/core/testing/TestBed.html" class="code-anchor">TestBed</a></code>.</p>
<div class="alert is-helpful">
<p>Importing the component's feature module can be the best way to configure tests
when there are many mutual dependencies within the module and
the module is small, as feature modules tend to be.</p>
</div>
<a id="component-override"></a>
<a class="dashAnchor" name="//apple_ref/Section/Override%20component%20providers"></a><h2 id="override-component-providers">Override component providers</h2>
<p>The <code>HeroDetailComponent</code> provides its own <code>HeroDetailService</code>.</p>
<code-example path="testing/src/app/hero/hero-detail.component.ts" region="prototype" header="app/hero/hero-detail.component.ts (prototype)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/hero/hero-detail.component.ts (prototype)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/hero/hero-detail.component.ts (prototype)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="lit">@</span><a href="../api/core/Component.html" class="code-anchor"><span class="lit">Component</span></a><span class="pun">({</span><span class="pln">
  selector</span><span class="pun">:</span><span class="pln">    </span><span class="str">'app-hero-detail'</span><span class="pun">,</span><span class="pln">
  templateUrl</span><span class="pun">:</span><span class="pln"> </span><span class="str">'./hero-detail.component.html'</span><span class="pun">,</span><span class="pln">
  styleUrls</span><span class="pun">:</span><span class="pln">  </span><span class="pun">[</span><span class="str">'./hero-detail.component.css'</span><span class="pln"> </span><span class="pun">],</span><span class="pln">
  providers</span><span class="pun">:</span><span class="pln">  </span><span class="pun">[</span><span class="pln"> </span><span class="typ">HeroDetailService</span><span class="pln"> </span><span class="pun">]</span><span class="pln">
</span><span class="pun">})</span><span class="pln">
</span><span class="kwd">export</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">HeroDetailComponent</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><a href="../api/core/OnInit.html" class="code-anchor"><span class="typ">OnInit</span></a><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">constructor</span><span class="pun">(</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> heroDetailService</span><span class="pun">:</span><span class="pln"> </span><span class="typ">HeroDetailService</span><span class="pun">,</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> route</span><span class="pun">:</span><span class="pln"> </span><a href="../api/router/ActivatedRoute.html" class="code-anchor"><span class="typ">ActivatedRoute</span></a><span class="pun">,</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> router</span><span class="pun">:</span><span class="pln"> </span><a href="../api/router/Router.html" class="code-anchor"><span class="typ">Router</span></a><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code>
    </pre></aio-code></code-example>
<p>It's not possible to stub the component's <code>HeroDetailService</code> in the <code>providers</code> of the <code>TestBed.configureTestingModule</code>.
Those are providers for the <em>testing module</em>, not the component. They prepare the dependency injector at the <em>fixture level</em>.</p>
<p>Angular creates the component with its <em>own</em> injector, which is a <em>child</em> of the fixture injector.
It registers the component's providers (the <code>HeroDetailService</code> in this case) with the child injector.</p>
<p>A test cannot get to child injector services from the fixture injector.
And <code>TestBed.configureTestingModule</code> can't configure them either.</p>
<p>Angular has created new instances of the real <code>HeroDetailService</code> all along!</p>
<div class="alert is-helpful">
<p>These tests could fail or timeout if the <code>HeroDetailService</code> made its own XHR calls to a remote server.
There might not be a remote server to call.</p>
<p>Fortunately, the <code>HeroDetailService</code> delegates responsibility for remote data access to an injected <code>HeroService</code>.</p>
<code-example path="testing/src/app/hero/hero-detail.service.ts" region="prototype" header="app/hero/hero-detail.service.ts (prototype)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/hero/hero-detail.service.ts (prototype)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/hero/hero-detail.service.ts (prototype)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="lit">@</span><a href="../api/core/Injectable.html" class="code-anchor"><span class="lit">Injectable</span></a><span class="pun">()</span><span class="pln">
</span><span class="kwd">export</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">HeroDetailService</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">constructor</span><span class="pun">(</span><span class="kwd">private</span><span class="pln"> heroService</span><span class="pun">:</span><span class="pln"> </span><span class="typ">HeroService</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="pun">}</span><span class="pln">
</span><span class="com">/* . . . */</span><span class="pln">
</span><span class="pun">}</span></code>
    </pre></aio-code></code-example>
<p>The <a href="./testing-components-scenarios.html#feature-module-import">previous test configuration</a> replaces the real <code>HeroService</code> with a <code>TestHeroService</code>
that intercepts server requests and fakes their responses.</p>
</div>
<p>What if you aren't so lucky. What if faking the <code>HeroService</code> is hard?
What if <code>HeroDetailService</code> makes its own server requests?</p>
<p>The <code>TestBed.overrideComponent</code> method can replace the component's <code>providers</code> with easy-to-manage <em>test doubles</em>
as seen in the following setup variation:</p>
<code-example path="testing/src/app/hero/hero-detail.component.spec.ts" region="setup-override" header="app/hero/hero-detail.component.spec.ts (Override setup)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/hero/hero-detail.component.spec.ts (Override setup)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/hero/hero-detail.component.spec.ts (Override setup)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">beforeEach</span><span class="pun">(</span><span class="kwd">async</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">const</span><span class="pln"> routerSpy </span><span class="pun">=</span><span class="pln"> createRouterSpy</span><span class="pun">();</span><span class="pln">

  </span><span class="kwd">await</span><span class="pln"> </span><a href="../api/core/testing/TestBed.html" class="code-anchor"><span class="typ">TestBed</span></a><span class="pln">
      </span><span class="pun">.</span><span class="pln">configureTestingModule</span><span class="pun">({</span><span class="pln">
        imports</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="typ">HeroModule</span><span class="pun">],</span><span class="pln">
        providers</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln">
          </span><span class="pun">{</span><span class="pln">provide</span><span class="pun">:</span><span class="pln"> </span><a href="../api/router/ActivatedRoute.html" class="code-anchor"><span class="typ">ActivatedRoute</span></a><span class="pun">,</span><span class="pln"> useValue</span><span class="pun">:</span><span class="pln"> activatedRoute</span><span class="pun">},</span><span class="pln">
          </span><span class="pun">{</span><span class="pln">provide</span><span class="pun">:</span><span class="pln"> </span><a href="../api/router/Router.html" class="code-anchor"><span class="typ">Router</span></a><span class="pun">,</span><span class="pln"> useValue</span><span class="pun">:</span><span class="pln"> routerSpy</span><span class="pun">},</span><span class="pln">
        </span><span class="pun">]</span><span class="pln">
      </span><span class="pun">})</span><span class="pln">

      </span><span class="com">// Override component's own provider</span><span class="pln">
      </span><span class="pun">.</span><span class="pln">overrideComponent</span><span class="pun">(</span><span class="pln">
          </span><span class="typ">HeroDetailComponent</span><span class="pun">,</span><span class="pln">
          </span><span class="pun">{</span><span class="kwd">set</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">providers</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[{</span><span class="pln">provide</span><span class="pun">:</span><span class="pln"> </span><span class="typ">HeroDetailService</span><span class="pun">,</span><span class="pln"> useClass</span><span class="pun">:</span><span class="pln"> </span><span class="typ">HeroDetailServiceSpy</span><span class="pun">}]}})</span><span class="pln">

      </span><span class="pun">.</span><span class="pln">compileComponents</span><span class="pun">();</span><span class="pln">
</span><span class="pun">});</span></code>
    </pre></aio-code></code-example>
<p>Notice that <code>TestBed.configureTestingModule</code> no longer provides a (fake) <code>HeroService</code> because it's <a href="./testing-components-scenarios.html#spy-stub">not needed</a>.</p>
<a id="override-component-method"></a>
<h4 id="the-overridecomponent-method">The <em>overrideComponent</em> method</h4>
<p>Focus on the <code>overrideComponent</code> method.</p>
<code-example path="testing/src/app/hero/hero-detail.component.spec.ts" region="override-component-method" header="app/hero/hero-detail.component.spec.ts (overrideComponent)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/hero/hero-detail.component.spec.ts (overrideComponent)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/hero/hero-detail.component.spec.ts (overrideComponent)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pun">.</span><span class="pln">overrideComponent</span><span class="pun">(</span><span class="pln">
    </span><span class="typ">HeroDetailComponent</span><span class="pun">,</span><span class="pln">
    </span><span class="pun">{</span><span class="kwd">set</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">providers</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[{</span><span class="pln">provide</span><span class="pun">:</span><span class="pln"> </span><span class="typ">HeroDetailService</span><span class="pun">,</span><span class="pln"> useClass</span><span class="pun">:</span><span class="pln"> </span><span class="typ">HeroDetailServiceSpy</span><span class="pun">}]}})</span></code>
    </pre></aio-code></code-example>
<p>It takes two arguments: the component type to override (<code>HeroDetailComponent</code>) and an override metadata object.
The <a href="./testing-utility-apis.html#metadata-override-object">override metadata object</a> is a generic defined as follows:</p>
<code-example language="javascript" ng-version="13.2.2"><div style="display: none;"></div><!----><aio-code><pre class="lang-javascript prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">type </span><a href="../api/core/testing/MetadataOverride.html" class="code-anchor"><span class="typ">MetadataOverride</span></a><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  add</span><span class="pun">?:</span><span class="pln"> </span><span class="typ">Partial</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;;</span><span class="pln">
  remove</span><span class="pun">?:</span><span class="pln"> </span><span class="typ">Partial</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;;</span><span class="pln">
  </span><span class="kwd">set</span><span class="pun">?:</span><span class="pln"> </span><span class="typ">Partial</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;;</span><span class="pln">
</span><span class="pun">};</span></code>
    </pre></aio-code></code-example>
<p>A metadata override object can either add-and-remove elements in metadata properties or completely reset those properties.
This example resets the component's <code>providers</code> metadata.</p>
<p>The type parameter, <code>T</code>, is the kind of metadata you'd pass to the <code>@<a href="../api/core/Component.html" class="code-anchor">Component</a></code> decorator:</p>
<code-example language="javascript" ng-version="13.2.2"><div style="display: none;"></div><!----><aio-code><pre class="lang-javascript prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="pln">selector</span><span class="pun">?:</span><span class="pln"> string</span><span class="pun">;</span><span class="pln">
template</span><span class="pun">?:</span><span class="pln"> string</span><span class="pun">;</span><span class="pln">
templateUrl</span><span class="pun">?:</span><span class="pln"> string</span><span class="pun">;</span><span class="pln">
providers</span><span class="pun">?:</span><span class="pln"> any</span><span class="pun">[];</span><span class="pln">
</span><span class="pun">...</span></code>
    </pre></aio-code></code-example>
<a id="spy-stub"></a>
<h4 id="provide-a-spy-stub-herodetailservicespy">Provide a <em>spy stub</em> (<em>HeroDetailServiceSpy</em>)</h4>
<p>This example completely replaces the component's <code>providers</code> array with a new array containing a <code>HeroDetailServiceSpy</code>.</p>
<p>The <code>HeroDetailServiceSpy</code> is a stubbed version of the real <code>HeroDetailService</code>
that fakes all necessary features of that service.
It neither injects nor delegates to the lower level <code>HeroService</code>
so there's no need to provide a test double for that.</p>
<p>The related <code>HeroDetailComponent</code> tests will assert that methods of the <code>HeroDetailService</code>
were called by spying on the service methods.
Accordingly, the stub implements its methods as spies:</p>
<code-example path="testing/src/app/hero/hero-detail.component.spec.ts" region="hds-spy" header="app/hero/hero-detail.component.spec.ts (HeroDetailServiceSpy)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/hero/hero-detail.component.spec.ts (HeroDetailServiceSpy)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/hero/hero-detail.component.spec.ts (HeroDetailServiceSpy)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="kwd">class</span><span class="pln"> </span><span class="typ">HeroDetailServiceSpy</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  testHero</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Hero</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln">id</span><span class="pun">:</span><span class="pln"> </span><span class="lit">42</span><span class="pun">,</span><span class="pln"> name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Test Hero'</span><span class="pun">};</span><span class="pln">

  </span><span class="com">/* emit cloned test hero */</span><span class="pln">
  getHero </span><span class="pun">=</span><span class="pln"> jasmine</span><span class="pun">.</span><span class="pln">createSpy</span><span class="pun">(</span><span class="str">'getHero'</span><span class="pun">).</span><span class="kwd">and</span><span class="pun">.</span><span class="pln">callFake</span><span class="pun">(</span><span class="pln">
      </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> asyncData</span><span class="pun">(</span><span class="typ">Object</span><span class="pun">.</span><span class="pln">assign</span><span class="pun">({},</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">testHero</span><span class="pun">)));</span><span class="pln">

  </span><span class="com">/* emit clone of test hero, with changes merged in */</span><span class="pln">
  saveHero </span><span class="pun">=</span><span class="pln"> jasmine</span><span class="pun">.</span><span class="pln">createSpy</span><span class="pun">(</span><span class="str">'saveHero'</span><span class="pun">)</span><span class="pln">
                 </span><span class="pun">.</span><span class="kwd">and</span><span class="pun">.</span><span class="pln">callFake</span><span class="pun">((</span><span class="pln">hero</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Hero</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> asyncData</span><span class="pun">(</span><span class="typ">Object</span><span class="pun">.</span><span class="pln">assign</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">testHero</span><span class="pun">,</span><span class="pln"> hero</span><span class="pun">)));</span><span class="pln">
</span><span class="pun">}</span></code>
    </pre></aio-code></code-example>
<a id="override-tests"></a>
<h4 id="the-override-tests">The override tests</h4>
<p>Now the tests can control the component's hero directly by manipulating the spy-stub's <code>testHero</code>
and confirm that service methods were called.</p>
<code-example path="testing/src/app/hero/hero-detail.component.spec.ts" region="override-tests" header="app/hero/hero-detail.component.spec.ts (override tests)" ng-version="13.2.2"><div style="display: none;"></div><header class="ng-star-inserted">app/hero/hero-detail.component.spec.ts (override tests)</header><!----><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from app/hero/hero-detail.component.spec.ts (override tests)">
        <span aria-hidden="true">content_copy</span>
      </button><!---->
      <code class="animated fadeIn"><span class="kwd">let</span><span class="pln"> hdsSpy</span><span class="pun">:</span><span class="pln"> </span><span class="typ">HeroDetailServiceSpy</span><span class="pun">;</span><span class="pln">

beforeEach</span><span class="pun">(</span><span class="kwd">async</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">await</span><span class="pln"> createComponent</span><span class="pun">();</span><span class="pln">
  </span><span class="com">// get the component's injected HeroDetailServiceSpy</span><span class="pln">
  hdsSpy </span><span class="pun">=</span><span class="pln"> fixture</span><span class="pun">.</span><span class="pln">debugElement</span><span class="pun">.</span><span class="pln">injector</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="typ">HeroDetailService</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> any</span><span class="pun">;</span><span class="pln">
</span><span class="pun">});</span><span class="pln">

it</span><span class="pun">(</span><span class="str">'should have called `getHero`'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  expect</span><span class="pun">(</span><span class="pln">hdsSpy</span><span class="pun">.</span><span class="pln">getHero</span><span class="pun">.</span><span class="pln">calls</span><span class="pun">.</span><span class="pln">count</span><span class="pun">())</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">withContext</span><span class="pun">(</span><span class="str">'getHero called once'</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">toBe</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="str">'getHero called once'</span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span><span class="pln">

it</span><span class="pun">(</span><span class="str">"should display stub hero's name"</span><span class="pun">,</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  expect</span><span class="pun">(</span><span class="pln">page</span><span class="pun">.</span><span class="pln">nameDisplay</span><span class="pun">.</span><span class="pln">textContent</span><span class="pun">).</span><span class="pln">toBe</span><span class="pun">(</span><span class="pln">hdsSpy</span><span class="pun">.</span><span class="pln">testHero</span><span class="pun">.</span><span class="pln">name</span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span><span class="pln">

it</span><span class="pun">(</span><span class="str">'should save stub hero change'</span><span class="pun">,</span><span class="pln"> </span><a href="../api/core/testing/fakeAsync.html" class="code-anchor"><span class="pln">fakeAsync</span></a><span class="pun">(()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
     </span><span class="kwd">const</span><span class="pln"> origName </span><span class="pun">=</span><span class="pln"> hdsSpy</span><span class="pun">.</span><span class="pln">testHero</span><span class="pun">.</span><span class="pln">name</span><span class="pun">;</span><span class="pln">
     </span><span class="kwd">const</span><span class="pln"> newName </span><span class="pun">=</span><span class="pln"> </span><span class="str">'New Name'</span><span class="pun">;</span><span class="pln">

     page</span><span class="pun">.</span><span class="pln">nameInput</span><span class="pun">.</span><span class="kwd">value</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> newName</span><span class="pun">;</span><span class="pln">

     page</span><span class="pun">.</span><span class="pln">nameInput</span><span class="pun">.</span><span class="pln">dispatchEvent</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><a href="../api/router/Event.html" class="code-anchor"><span class="typ">Event</span></a><span class="pun">(</span><span class="str">'input'</span><span class="pun">));</span><span class="pln"> </span><span class="com">// tell Angular</span><span class="pln">

     expect</span><span class="pun">(</span><span class="pln">component</span><span class="pun">.</span><span class="pln">hero</span><span class="pun">.</span><span class="pln">name</span><span class="pun">)</span><span class="pln">
      </span><span class="pun">.</span><span class="pln">withContext</span><span class="pun">(</span><span class="str">'component hero has new name'</span><span class="pun">)</span><span class="pln">
      </span><span class="pun">.</span><span class="pln">toBe</span><span class="pun">(</span><span class="pln">newName</span><span class="pun">);</span><span class="pln">
     expect</span><span class="pun">(</span><span class="pln">hdsSpy</span><span class="pun">.</span><span class="pln">testHero</span><span class="pun">.</span><span class="pln">name</span><span class="pun">)</span><span class="pln">
      </span><span class="pun">.</span><span class="pln">withContext</span><span class="pun">(</span><span class="str">'service hero unchanged before save'</span><span class="pun">)</span><span class="pln">
      </span><span class="pun">.</span><span class="pln">toBe</span><span class="pun">(</span><span class="pln">origName</span><span class="pun">);</span><span class="pln">

     click</span><span class="pun">(</span><span class="pln">page</span><span class="pun">.</span><span class="pln">saveBtn</span><span class="pun">);</span><span class="pln">
     expect</span><span class="pun">(</span><span class="pln">hdsSpy</span><span class="pun">.</span><span class="pln">saveHero</span><span class="pun">.</span><span class="pln">calls</span><span class="pun">.</span><span class="pln">count</span><span class="pun">())</span><span class="pln">
      </span><span class="pun">.</span><span class="pln">withContext</span><span class="pun">(</span><span class="str">'saveHero called once'</span><span class="pun">)</span><span class="pln">
      </span><span class="pun">.</span><span class="pln">toBe</span><span class="pun">(</span><span class="lit">1</span><span class="pun">);</span><span class="pln">

     </span><a href="../api/core/testing/tick.html" class="code-anchor"><span class="pln">tick</span></a><span class="pun">();</span><span class="pln">  </span><span class="com">// wait for async save to complete</span><span class="pln">
     expect</span><span class="pun">(</span><span class="pln">hdsSpy</span><span class="pun">.</span><span class="pln">testHero</span><span class="pun">.</span><span class="pln">name</span><span class="pun">)</span><span class="pln">
      </span><span class="pun">.</span><span class="pln">withContext</span><span class="pun">(</span><span class="str">'service hero has new name after save'</span><span class="pun">)</span><span class="pln">
      </span><span class="pun">.</span><span class="pln">toBe</span><span class="pun">(</span><span class="pln">newName</span><span class="pun">);</span><span class="pln">
     expect</span><span class="pun">(</span><span class="pln">page</span><span class="pun">.</span><span class="pln">navigateSpy</span><span class="pun">.</span><span class="pln">calls</span><span class="pun">.</span><span class="pln">any</span><span class="pun">())</span><span class="pln">
      </span><span class="pun">.</span><span class="pln">withContext</span><span class="pun">(</span><span class="str">'router.navigate called'</span><span class="pun">)</span><span class="pln">
      </span><span class="pun">.</span><span class="pln">toBe</span><span class="pun">(</span><span class="kwd">true</span><span class="pun">);</span><span class="pln">
   </span><span class="pun">}));</span></code>
    </pre></aio-code></code-example>
<a id="more-overrides"></a>
<h4 id="more-overrides">More overrides</h4>
<p>The <code>TestBed.overrideComponent</code> method can be called multiple times for the same or different components.
The <code><a href="../api/core/testing/TestBed.html" class="code-anchor">TestBed</a></code> offers similar <code>overrideDirective</code>, <code>overrideModule</code>, and <code>overridePipe</code> methods
for digging into and replacing parts of these other classes.</p>
<p>Explore the options and combinations on your own.</p>

  
</div>

<!-- links to this doc:
 - api/core/DebugElement
 - guide/testing
 - guide/testing-attribute-directives
 - guide/testing-components-basics
 - guide/testing-utility-apis
 - guide/upgrade-setup
-->
<!-- links from this doc:
 - api/animations/query
 - api/animations/trigger
 - api/common/AsyncPipe
 - api/common/CommonModule
 - api/common/NgForOf
 - api/common/NgIf
 - api/common/TitleCasePipe
 - api/common/UpperCasePipe
 - api/common/http/HttpClient
 - api/core/AfterViewInit
 - api/core/Component
 - api/core/Component#styleUrls
 - api/core/Component#styles
 - api/core/Component#template
 - api/core/Component#templateUrl
 - api/core/DebugElement
 - api/core/Directive
 - api/core/ElementRef
 - api/core/EventEmitter
 - api/core/HostListener
 - api/core/Injectable
 - api/core/Input
 - api/core/NO_ERRORS_SCHEMA
 - api/core/NgModule
 - api/core/OnInit
 - api/core/Output
 - api/core/ViewChild
 - api/core/testing/ComponentFixture
 - api/core/testing/ComponentFixtureAutoDetect
 - api/core/testing/MetadataOverride
 - api/core/testing/TestBed
 - api/core/testing/fakeAsync
 - api/core/testing/flush
 - api/core/testing/tick
 - api/core/testing/waitForAsync
 - api/forms/FormsModule
 - api/forms/NgModel
 - api/platform-browser/Title
 - api/router/ActivatedRoute
 - api/router/ActivatedRoute#paramMap
 - api/router/Event
 - api/router/ParamMap
 - api/router/Params
 - api/router/Router
 - api/router/Router#events
 - api/router/RouterLink
 - api/router/RouterModule
 - api/router/RouterOutlet
 - api/router/convertToParamMap
 - api/router/testing/RouterTestingModule
 - guide/feature-modules
 - guide/http
 - guide/lifecycle-hooks
 - guide/router-tutorial-toh
 - guide/router-tutorial-toh#activated-route-in-action
 - guide/testing-components-basics#component-class-testing
 - guide/testing-components-scenarios#activatedroutestub
 - guide/testing-components-scenarios#async-observable-helpers
 - guide/testing-components-scenarios#async-observables
 - guide/testing-components-scenarios#async-test-with-fakeasync
 - guide/testing-components-scenarios#async-test-with-waitforasync
 - guide/testing-components-scenarios#automatic-change-detection
 - guide/testing-components-scenarios#bydirective-and-injected-directives
 - guide/testing-components-scenarios#calling-compilecomponents
 - guide/testing-components-scenarios#change-an-input-value-with-dispatchevent
 - guide/testing-components-scenarios#click-helper
 - guide/testing-components-scenarios#click-the-element
 - guide/testing-components-scenarios#clicking
 - guide/testing-components-scenarios#cold-observable
 - guide/testing-components-scenarios#comparing-dates-inside-fakeasync
 - guide/testing-components-scenarios#compile-components
 - guide/testing-components-scenarios#compilecomponents-is-async
 - guide/testing-components-scenarios#compilecomponents-is-harmless
 - guide/testing-components-scenarios#component-binding
 - guide/testing-components-scenarios#component-inside-a-test-host
 - guide/testing-components-scenarios#component-marble-tests
 - guide/testing-components-scenarios#component-override
 - guide/testing-components-scenarios#component-testing-scenarios
 - guide/testing-components-scenarios#component-with-a-dependency
 - guide/testing-components-scenarios#component-with-async-service
 - guide/testing-components-scenarios#component-with-external-files
 - guide/testing-components-scenarios#component-with-inputs-and-outputs
 - guide/testing-components-scenarios#components-with-routerlink
 - guide/testing-components-scenarios#consolidated-setup
 - guide/testing-components-scenarios#createcomponent-does-not-bind-data
 - guide/testing-components-scenarios#dashboard-hero-component
 - guide/testing-components-scenarios#detectchanges
 - guide/testing-components-scenarios#feature-module-import
 - guide/testing-components-scenarios#final-setup-and-tests
 - guide/testing-components-scenarios#get-injected-services
 - guide/testing-components-scenarios#import-a-feature-module
 - guide/testing-components-scenarios#import-a-shared-module
 - guide/testing-components-scenarios#jasmine-done
 - guide/testing-components-scenarios#jasmineclock-with-fakeasync
 - guide/testing-components-scenarios#learn-about-marble-testing
 - guide/testing-components-scenarios#marble-error-testing
 - guide/testing-components-scenarios#marble-frame
 - guide/testing-components-scenarios#marble-testing
 - guide/testing-components-scenarios#more-async-tests
 - guide/testing-components-scenarios#more-overrides
 - guide/testing-components-scenarios#nested-component-tests
 - guide/testing-components-scenarios#no_errors_schema
 - guide/testing-components-scenarios#override-component-providers
 - guide/testing-components-scenarios#provide-a-spy-stub-herodetailservicespy
 - guide/testing-components-scenarios#provide-service-test-doubles
 - guide/testing-components-scenarios#query-for-the-h1
 - guide/testing-components-scenarios#routed-components
 - guide/testing-components-scenarios#routerlink
 - guide/testing-components-scenarios#routing-component
 - guide/testing-components-scenarios#setup-with-module-imports
 - guide/testing-components-scenarios#spy-stub
 - guide/testing-components-scenarios#stubbing-unneeded-components
 - guide/testing-components-scenarios#support-more-macrotasks
 - guide/testing-components-scenarios#synchronous-tests
 - guide/testing-components-scenarios#test-dashboardherocomponent-stand-alone
 - guide/testing-components-scenarios#testbedinject
 - guide/testing-components-scenarios#testing-with-a-spy
 - guide/testing-components-scenarios#testing-with-activatedroutestub
 - guide/testing-components-scenarios#tests-w-test-double
 - guide/testing-components-scenarios#the-async-beforeeach
 - guide/testing-components-scenarios#the-override-tests
 - guide/testing-components-scenarios#the-overridecomponent-method
 - guide/testing-components-scenarios#the-synchronous-beforeeach
 - guide/testing-components-scenarios#the-tick-function
 - guide/testing-components-scenarios#tickoptions
 - guide/testing-components-scenarios#triggereventhandler
 - guide/testing-components-scenarios#use-a-page-object
 - guide/testing-components-scenarios#use-both-techniques-together
 - guide/testing-components-scenarios#using-the-rxjs-scheduler-inside-fakeasync
 - guide/testing-components-scenarios#waitForAsync
 - guide/testing-components-scenarios#what-good-are-these-tests
 - guide/testing-components-scenarios#whenstable
 - guide/testing-components-scenarios#why-stubbed-routerlink-tests
 - guide/testing-utility-apis#metadata-override-object
 - http://reactivex.io/documentation/operators/defer.html
 - https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/button
 - https://github.com/angular/angular/edit/master/aio/content/guide/testing-components-scenarios.md?message=docs%3A%20describe%20your%20change...
 - https://jasmine.github.io/2.0/introduction.html#section-Asynchronous_Support
 - https://plnkr.co/
 - https://rxjs.dev/guide/testing/marble-testing
 - https://rxmarbles.com/
--></div></aio-doc-viewer><!----></main><!----></section><footer class="no-print"><aio-footer><div class="grid-fluid"><div class="footer-block ng-star-inserted"><h3>Resources</h3><ul><li class="ng-star-inserted"><a class="link" href="../about.html" title="Angular contributors.">About</a></li><li class="ng-star-inserted"><a class="link" href="../resources.html" title="Angular tools, training, and blogs from around the web.">Resource Listing</a></li><li class="ng-star-inserted"><a class="link" href="../presskit.html" title="Press contacts, logos, and branding.">Press Kit</a></li><li class="ng-star-inserted"><a class="link" href="https://blog.angular.io/" title="Angular Blog">Blog</a></li><li class="ng-star-inserted"><a class="link" href="../analytics.html" title="Angular Usage Analytics">Usage Analytics</a></li><!----></ul></div><div class="footer-block ng-star-inserted"><h3>Help</h3><ul><li class="ng-star-inserted"><a class="link" href="https://stackoverflow.com/questions/tagged/angular" title="Stack Overflow: where the community answers your technical Angular questions.">Stack Overflow</a></li><li class="ng-star-inserted"><a class="link" href="https://discord.gg/angular" title="Join the discussions at Angular Community Discord server.">Join Discord</a></li><li class="ng-star-inserted"><a class="link" href="https://gitter.im/angular/angular" title="Chat about Angular with other birds of a feather.">Gitter</a></li><li class="ng-star-inserted"><a class="link" href="https://github.com/angular/angular/issues" title="Post issues and suggestions on github.">Report Issues</a></li><li class="ng-star-inserted"><a class="link" href="https://github.com/angular/code-of-conduct/blob/master/CODE_OF_CONDUCT.md" title="Treating each other with respect.">Code of Conduct</a></li><!----></ul></div><div class="footer-block ng-star-inserted"><h3>Community</h3><ul><li class="ng-star-inserted"><a class="link" href="../events.html" title="Angular events around the world.">Events</a></li><li class="ng-star-inserted"><a class="link" href="https://www.meetup.com/topics/angularjs/" title="Attend a meetup and learn from fellow developers.">Meetups</a></li><li class="ng-star-inserted"><a class="link" href="https://twitter.com/angular" title="Twitter">Twitter</a></li><li class="ng-star-inserted"><a class="link" href="https://github.com/angular/angular" title="GitHub">GitHub</a></li><li class="ng-star-inserted"><a class="link" href="../contribute.html" title="Contribute to Angular">Contribute</a></li><!----></ul></div><div class="footer-block ng-star-inserted"><h3>Languages</h3><ul><li class="ng-star-inserted"><a class="link" href="http://docs.angular.lat/" title="Espaol.">Espaol</a></li><li class="ng-star-inserted"><a class="link" href="https://angular.cn/" title=""></a></li><li class="ng-star-inserted"><a class="link" href="https://angular.tw/" title=""></a></li><li class="ng-star-inserted"><a class="link" href="https://angular.jp/" title=""></a></li><li class="ng-star-inserted"><a class="link" href="https://angular.kr/" title=""></a></li><li class="ng-star-inserted"><a class="link" href="./localized-documentation.html" title="Complete language list.">Complete language list</a></li><!----></ul></div><!----></div><p> Super-powered by Google 2010-2022.
</p><p> Code licensed under an <a href="../license.html" title="License text">MIT-style License</a>. Documentation licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>.
</p><p> Version 13.2.4-local+sha.032276253f.
</p></aio-footer></footer></mat-sidenav-content><!----></mat-sidenav-container></aio-shell>

  <noscript>
    &amp;amp;amp;lt;div class="background-sky hero"&amp;amp;amp;gt;&amp;amp;amp;lt;/div&amp;amp;amp;gt;
    &amp;amp;amp;lt;section id="intro" style="text-shadow: 1px 1px #1976d2;"&amp;amp;amp;gt;
      &amp;amp;amp;lt;div class="hero-logo"&amp;amp;amp;gt;&amp;amp;amp;lt;/div&amp;amp;amp;gt;
      &amp;amp;amp;lt;div class="homepage-container"&amp;amp;amp;gt;
        &amp;amp;amp;lt;div class="hero-headline"&amp;amp;amp;gt;The modern web&amp;amp;amp;lt;br&amp;amp;amp;gt;developer's platform&amp;amp;amp;lt;/div&amp;amp;amp;gt;
      &amp;amp;amp;lt;/div&amp;amp;amp;gt;
    &amp;amp;amp;lt;/section&amp;amp;amp;gt;
    &amp;amp;amp;lt;h2 style="color: red; margin-top: 40px; position: relative; text-align: center; text-shadow: 1px 1px #fafafa; border-top: none;"&amp;amp;amp;gt;
      &amp;amp;amp;lt;b&amp;amp;amp;gt;&amp;amp;amp;lt;i&amp;amp;amp;gt;This website requires JavaScript.&amp;amp;amp;lt;/i&amp;amp;amp;gt;&amp;amp;amp;lt;/b&amp;amp;amp;gt;
    &amp;amp;amp;lt;/h2&amp;amp;amp;gt;
  </noscript>

<script src="../runtime.f679f380e8bb222c.js" type="module"></script><script src="../polyfills.47182b1b999e7c7d.js" type="module"></script>


<div class="cdk-live-announcer-element cdk-visually-hidden" aria-atomic="true" aria-live="polite"></div></body></html>