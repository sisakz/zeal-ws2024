<html><!-- Mirrored from www.php.net/manual/en/function.substr.php by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 11 Sep 2021 06:40:33 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>substr</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.substr.html">
 <link rel="shorturl" href="https://www.php.net/substr">
 <link rel="alternate" href="https://www.php.net/substr" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.strings.html">
 <link rel="prev" href="function.substr-replace.html">
 <link rel="next" href="function.trim.html">

 <link rel="alternate" href="function.substr.html" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/function.substr.php" hreflang="pt_BR">
 <link rel="alternate" href="https://www.php.net/manual/zh/function.substr.php" hreflang="zh">
 <link rel="alternate" href="https://www.php.net/manual/fr/function.substr.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/de/function.substr.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/ja/function.substr.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/ro/function.substr.php" hreflang="ro">
 <link rel="alternate" href="https://www.php.net/manual/ru/function.substr.php" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/es/function.substr.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/tr/function.substr.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached0aba.css?t=1539771603&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached2ecf.css?t=1539765004&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedba57.css?t=1606338002&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached3afa.css?t=1627831203&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="https://www.php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script>
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="https://www.php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script src="https://www.php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>


</head>
<body class="docs " style="">


<div class="headsup"><a href="https://www.php.net/conferences/index.php#id2021-09-08-1">Longhorn PHP 2021</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.errors.html">Errors</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.attributes.html">Attributes</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.sessions.html">Session Security</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
	<dd><a href="refs.ui.html">GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
    <div id="breadcrumbs-inner">
          
              
          <ul>
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.basic.text.html">Text Processing</a></li>      <li><a href="book.strings.html">Strings</a></li>      <li><a href="ref.strings.html">String Functions</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div id="function.substr" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">substr</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">substr</span> — <span class="dc-title">Return part of a string</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.substr-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>substr</strong></span>(<span class="methodparam"><span class="type">string</span> <code class="parameter">$string</code></span>, <span class="methodparam"><span class="type">int</span> <code class="parameter">$offset</code></span>, <span class="methodparam"><span class="type">?</span><span class="type"><span class="type">int</span><span class="type"></span></span> <code class="parameter">$length</code><span class="initializer"> = <strong><code>null</code></strong></span></span>): <span class="type">string</span></div>

  <p class="para rdfs-comment">
   Returns the portion of <code class="parameter">string</code> specified by the
   <code class="parameter">offset</code> and <code class="parameter">length</code> parameters.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.substr-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>
    
     <dt>
<code class="parameter">string</code></dt>

     <dd>

      <p class="para">
       The input string.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">offset</code></dt>

     <dd>

      <p class="para">
       If <code class="parameter">offset</code> is non-negative, the returned string
       will start at the <code class="parameter">offset</code>'th position in
       <code class="parameter">string</code>, counting from zero. For instance,
       in the string '<code class="literal">abcdef</code>', the character at
       position <code class="literal">0</code> is '<code class="literal">a</code>', the
       character at position <code class="literal">2</code> is
       '<code class="literal">c</code>', and so forth.
      </p>
      <p class="para">
       If <code class="parameter">offset</code> is negative, the returned string
       will start at the <code class="parameter">offset</code>'th character
       from the end of <code class="parameter">string</code>.
      </p>
      <p class="para">
       If <code class="parameter">string</code> is less than
       <code class="parameter">offset</code> characters long, an empty string will be returned.
      </p>
      <p class="para">
       </p><div class="example" id="example-4839">
        <p><strong>Example #1 Using a negative <code class="parameter">offset</code></strong></p>
        <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$rest&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">"abcdef"</span><span style="color: #007700">,&nbsp;-</span><span style="color: #0000BB">1</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;returns&nbsp;"f"<br></span><span style="color: #0000BB">$rest&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">"abcdef"</span><span style="color: #007700">,&nbsp;-</span><span style="color: #0000BB">2</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;returns&nbsp;"ef"<br></span><span style="color: #0000BB">$rest&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">"abcdef"</span><span style="color: #007700">,&nbsp;-</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;returns&nbsp;"d"<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
        </div>

       </div>
      <p></p>
     </dd>

    
    
     <dt>
<code class="parameter">length</code></dt>

     <dd>

      <p class="para">
       If <code class="parameter">length</code> is given and is positive, the string
       returned will contain at most <code class="parameter">length</code> characters
       beginning from <code class="parameter">offset</code> (depending on the length of
       <code class="parameter">string</code>).
      </p>
      <p class="para">
       If <code class="parameter">length</code> is given and is negative, then that many
       characters will be omitted from the end of <code class="parameter">string</code>
       (after the start position has been calculated when a
       <code class="parameter">offset</code> is negative).  If
       <code class="parameter">offset</code> denotes the position of this truncation or
       beyond, an empty string will be returned.
      </p>
      <p class="para">
       If <code class="parameter">length</code> is given and is <code class="literal">0</code>,
       <strong><code>false</code></strong> or <strong><code>null</code></strong>, an empty string will be returned.
      </p>
      <p class="para">
       If <code class="parameter">length</code> is omitted, the substring starting from
       <code class="parameter">offset</code> until the end of the string will be
       returned.
      </p>
      <div class="example" id="example-4840">
       <p><strong>Example #2 Using a negative <code class="parameter">length</code></strong></p>
       <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$rest&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">"abcdef"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;-</span><span style="color: #0000BB">1</span><span style="color: #007700">);&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;returns&nbsp;"abcde"<br></span><span style="color: #0000BB">$rest&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">"abcdef"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;-</span><span style="color: #0000BB">1</span><span style="color: #007700">);&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;returns&nbsp;"cde"<br></span><span style="color: #0000BB">$rest&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">"abcdef"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">,&nbsp;-</span><span style="color: #0000BB">4</span><span style="color: #007700">);&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;returns&nbsp;"";&nbsp;prior&nbsp;to&nbsp;PHP&nbsp;8.0.0,&nbsp;false&nbsp;was&nbsp;returned<br></span><span style="color: #0000BB">$rest&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">"abcdef"</span><span style="color: #007700">,&nbsp;-</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;-</span><span style="color: #0000BB">1</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;returns&nbsp;"de"<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
       </div>

      </div>
     </dd>

    
   </dl>

  <p></p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.substr-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns the extracted part of <code class="parameter">string</code>, or
   an empty string.
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.substr-changelog">
  <h3 class="title">Changelog</h3>
  <table class="doctable informaltable">
   
    <thead>
     <tr>
      <th>Version</th>
      <th>Description</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
      <td>8.0.0</td>
      <td>
       <code class="parameter">length</code> is nullable now.
      </td>
     </tr>

     <tr>
      <td>8.0.0</td>
      <td>
       The function returns an empty string where it previously returned <strong><code>false</code></strong>.
      </td>
     </tr>

    </tbody>
   
  </table>

 </div>


 <div class="refsect1 examples" id="refsect1-function.substr-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   </p><div class="example" id="example-4841">
    <p><strong>Example #3 Basic <span class="function"><strong>substr()</strong></span> usage</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">'abcdef'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;bcdef<br></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">'abcdef'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">);&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;bcd<br></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">'abcdef'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">);&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;abcd<br></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">'abcdef'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">8</span><span style="color: #007700">);&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;abcdef<br></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">'abcdef'</span><span style="color: #007700">,&nbsp;-</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;f<br><br>//&nbsp;Accessing&nbsp;single&nbsp;characters&nbsp;in&nbsp;a&nbsp;string<br>//&nbsp;can&nbsp;also&nbsp;be&nbsp;achieved&nbsp;using&nbsp;"square&nbsp;brackets"<br></span><span style="color: #0000BB">$string&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'abcdef'</span><span style="color: #007700">;<br>echo&nbsp;</span><span style="color: #0000BB">$string</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;a<br></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$string</span><span style="color: #007700">[</span><span style="color: #0000BB">3</span><span style="color: #007700">];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;d<br></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$string</span><span style="color: #007700">[</span><span style="color: #0000BB">strlen</span><span style="color: #007700">(</span><span style="color: #0000BB">$string</span><span style="color: #007700">)-</span><span style="color: #0000BB">1</span><span style="color: #007700">];&nbsp;</span><span style="color: #FF8000">//&nbsp;f<br><br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div> 
   <div class="example" id="example-4842">
    <p><strong>Example #4 <span class="function"><strong>substr()</strong></span> casting behaviour</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">apple&nbsp;</span><span style="color: #007700">{<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">__toString</span><span style="color: #007700">()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #DD0000">"green"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br><br>echo&nbsp;</span><span style="color: #DD0000">"1)&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">var_export</span><span style="color: #007700">(</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">"pear"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">).</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br>echo&nbsp;</span><span style="color: #DD0000">"2)&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">var_export</span><span style="color: #007700">(</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">54321</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">).</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br>echo&nbsp;</span><span style="color: #DD0000">"3)&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">var_export</span><span style="color: #007700">(</span><span style="color: #0000BB">substr</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">apple</span><span style="color: #007700">(),&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">).</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br>echo&nbsp;</span><span style="color: #DD0000">"4)&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">var_export</span><span style="color: #007700">(</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">true</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">).</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br>echo&nbsp;</span><span style="color: #DD0000">"5)&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">var_export</span><span style="color: #007700">(</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">false</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">).</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br>echo&nbsp;</span><span style="color: #DD0000">"6)&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">var_export</span><span style="color: #007700">(</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">""</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">).</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br>echo&nbsp;</span><span style="color: #DD0000">"7)&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">var_export</span><span style="color: #007700">(</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">1.2e3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">).</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>1) 'pe'
2) '54'
3) 'gr'
4) '1'
5) ''
6) ''
7) '1200'
</pre></div>
    </div>
   </div>
  <div class="example" id="example-4843">
   <p><strong>Example #5 Invalid Character Range</strong></p>
   <div class="example-contents"><p>
    If an invalid character range is requested, <span class="function"><strong>substr()</strong></span> returns
    an empty string as of PHP 8.0.0; previously, <strong><code>false</code></strong> was returned instead.
   </p></div>
   <div class="example" id="example-4844">
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">'a'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">));<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>Output of the above example in PHP 8:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>string(0) ""
</pre></div>]<br>
    </div>
    <div class="example-contents"><p>Output of the above example in PHP 7:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>bool(false)
</pre></div>
    </div>
   </div>
  </div>
  <p></p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.substr-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><span class="function"><a href="function.strrchr.html" class="function" rel="rdfs-seeAlso">strrchr()</a> - Find the last occurrence of a character in a string</span></li>
    <li class="member"><span class="function"><a href="function.substr-replace.html" class="function" rel="rdfs-seeAlso">substr_replace()</a> - Replace text within a portion of a string</span></li>
    <li class="member"><span class="function"><a href="function.preg-match.html" class="function" rel="rdfs-seeAlso">preg_match()</a> - Perform a regular expression match</span></li>
    <li class="member"><span class="function"><a href="function.trim.html" class="function" rel="rdfs-seeAlso">trim()</a> - Strip whitespace (or other characters) from the beginning and end of a string</span></li>
    <li class="member"><span class="function"><a href="function.mb-substr.html" class="function" rel="rdfs-seeAlso">mb_substr()</a> - Get part of string</span></li>
    <li class="member"><span class="function"><a href="function.wordwrap.html" class="function" rel="rdfs-seeAlso">wordwrap()</a> - Wraps a string to a given number of characters</span></li>
    <li class="member"><a href="language.types.string.html#language.types.string.substr" class="link">String access and modification by character</a></li>
   </ul>
  <p></p>
 </div>


</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="90581">  
  <a class="name">
  <strong class="user"><em>Andreas Bur (andreas dot buro at gmail dot com)</em></strong></a><div class="date" title="2009-04-29 06:25"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom90581">
<div class="phpcode"><code><span class="html">
For getting a substring of UTF-8 characters, I highly recommend mb_substr<br><br><span class="default">&lt;?php<br>&nbsp; &nbsp; &nbsp; &nbsp; $utf8string </span><span class="keyword">= </span><span class="string">"cakeæøå"</span><span class="keyword">;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$utf8string</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// output cake#<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">echo </span><span class="default">mb_substr</span><span class="keyword">(</span><span class="default">$utf8string</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">,</span><span class="string">'UTF-8'</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//output cakeæ<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="112707">  
  <a class="name">
  <strong class="user"><em>biohazard dot ge at gmail dot com</em></strong></a><div class="date" title="2013-07-15 02:30"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom112707">
<div class="phpcode"><code><span class="html">
may be by following functions will be easier to extract the needed sub parts from a string:<br><br><span class="default">&lt;?php<br>after </span><span class="keyword">(</span><span class="string">'@'</span><span class="keyword">, </span><span class="string">'biohazard@online.ge'</span><span class="keyword">);<br></span><span class="comment">//returns 'online.ge'<br>//from the first occurrence of '@'<br><br></span><span class="default">before </span><span class="keyword">(</span><span class="string">'@'</span><span class="keyword">, </span><span class="string">'biohazard@online.ge'</span><span class="keyword">);<br></span><span class="comment">//returns 'biohazard'<br>//from the first occurrence of '@'<br><br></span><span class="default">between </span><span class="keyword">(</span><span class="string">'@'</span><span class="keyword">, </span><span class="string">'.'</span><span class="keyword">, </span><span class="string">'biohazard@online.ge'</span><span class="keyword">);<br></span><span class="comment">//returns 'online'<br>//from the first occurrence of '@'<br><br></span><span class="default">after_last </span><span class="keyword">(</span><span class="string">'['</span><span class="keyword">, </span><span class="string">'sin[90]*cos[180]'</span><span class="keyword">);<br></span><span class="comment">//returns '180]'<br>//from the last occurrence of '['<br><br></span><span class="default">before_last </span><span class="keyword">(</span><span class="string">'['</span><span class="keyword">, </span><span class="string">'sin[90]*cos[180]'</span><span class="keyword">);<br></span><span class="comment">//returns 'sin[90]*cos['<br>//from the last occurrence of '['<br><br></span><span class="default">between_last </span><span class="keyword">(</span><span class="string">'['</span><span class="keyword">, </span><span class="string">']'</span><span class="keyword">, </span><span class="string">'sin[90]*cos[180]'</span><span class="keyword">);<br></span><span class="comment">//returns '180'<br>//from the last occurrence of '['<br></span><span class="default">?&gt;<br></span><br>here comes the source:<br><br><span class="default">&lt;?php<br><br>&nbsp; &nbsp; </span><span class="keyword">function </span><span class="default">after </span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">, </span><span class="default">$inthat</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (!</span><span class="default">is_bool</span><span class="keyword">(</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$inthat</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">)))<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$inthat</span><span class="keyword">, </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$inthat</span><span class="keyword">,</span><span class="default">$this</span><span class="keyword">)+</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">));<br>&nbsp; &nbsp; };<br><br>&nbsp; &nbsp; function </span><span class="default">after_last </span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">, </span><span class="default">$inthat</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (!</span><span class="default">is_bool</span><span class="keyword">(</span><span class="default">strrevpos</span><span class="keyword">(</span><span class="default">$inthat</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">)))<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$inthat</span><span class="keyword">, </span><span class="default">strrevpos</span><span class="keyword">(</span><span class="default">$inthat</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">)+</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">));<br>&nbsp; &nbsp; };<br><br>&nbsp; &nbsp; function </span><span class="default">before </span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">, </span><span class="default">$inthat</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$inthat</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$inthat</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">));<br>&nbsp; &nbsp; };<br><br>&nbsp; &nbsp; function </span><span class="default">before_last </span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">, </span><span class="default">$inthat</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$inthat</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">strrevpos</span><span class="keyword">(</span><span class="default">$inthat</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">));<br>&nbsp; &nbsp; };<br><br>&nbsp; &nbsp; function </span><span class="default">between </span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">, </span><span class="default">$that</span><span class="keyword">, </span><span class="default">$inthat</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">before </span><span class="keyword">(</span><span class="default">$that</span><span class="keyword">, </span><span class="default">after</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">, </span><span class="default">$inthat</span><span class="keyword">));<br>&nbsp; &nbsp; };<br><br>&nbsp; &nbsp; function </span><span class="default">between_last </span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">, </span><span class="default">$that</span><span class="keyword">, </span><span class="default">$inthat</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp;&nbsp; return </span><span class="default">after_last</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">, </span><span class="default">before_last</span><span class="keyword">(</span><span class="default">$that</span><span class="keyword">, </span><span class="default">$inthat</span><span class="keyword">));<br>&nbsp; &nbsp; };<br><br></span><span class="comment">// use strrevpos function in case your php version does not include it<br></span><span class="keyword">function </span><span class="default">strrevpos</span><span class="keyword">(</span><span class="default">$instr</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="default">$rev_pos </span><span class="keyword">= </span><span class="default">strpos </span><span class="keyword">(</span><span class="default">strrev</span><span class="keyword">(</span><span class="default">$instr</span><span class="keyword">), </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">));<br>&nbsp; &nbsp; if (</span><span class="default">$rev_pos</span><span class="keyword">===</span><span class="default">false</span><span class="keyword">) return </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; else return </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$instr</span><span class="keyword">) - </span><span class="default">$rev_pos </span><span class="keyword">- </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">);<br>};<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="113718">  
  <a class="name">
  <strong class="user"><em>greg at apparel dot com</em></strong></a><div class="date" title="2013-11-20 05:28"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom113718">
<div class="phpcode"><code><span class="html">
Coming to PHP from classic ASP I am used to the Left() and Right() functions built into ASP so I did a quick PHPversion. hope these help someone else making the switch<br><br>function left($str, $length) {<br>&nbsp; &nbsp; return substr($str, 0, $length);<br>}<br><br>function right($str, $length) {<br>&nbsp; &nbsp; return substr($str, -$length);<br>}</span>
</code></div>
  </div>
 </div>
  <div class="note" id="92473">  
  <a class="name">
  <strong class="user"><em>gkhelloworld at gmail dot com</em></strong></a><div class="date" title="2009-07-26 03:39"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom92473">
<div class="phpcode"><code><span class="html">
Shortens the filename and its expansion has seen.
<br>
<br><span class="default">&lt;?php
<br>$file </span><span class="keyword">= </span><span class="string">"Hellothisfilehasmorethan30charactersandthisfayl.exe"</span><span class="keyword">;
<br>
<br>function </span><span class="default">funclongwords</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">)
<br>{
<br>if (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">) &gt; </span><span class="default">30</span><span class="keyword">)
<br>{
<br></span><span class="default">$vartypesf </span><span class="keyword">= </span><span class="default">strrchr</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">,</span><span class="string">"."</span><span class="keyword">);
<br></span><span class="default">$vartypesf_len </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$vartypesf</span><span class="keyword">);
<br></span><span class="default">$word_l_w </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">15</span><span class="keyword">);
<br></span><span class="default">$word_r_w </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">,-</span><span class="default">15</span><span class="keyword">);
<br></span><span class="default">$word_r_a </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$word_r_w</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,-</span><span class="default">$vartypesf_len</span><span class="keyword">);
<br>
<br>return </span><span class="default">$word_l_w</span><span class="keyword">.</span><span class="string">"..."</span><span class="keyword">.</span><span class="default">$word_r_a</span><span class="keyword">.</span><span class="default">$vartypesf</span><span class="keyword">;
<br>}
<br>else
<br>return </span><span class="default">$file</span><span class="keyword">;
<br>}
<br></span><span class="comment">// RETURN: Hellothisfileha...andthisfayl.exe
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="111133">  
  <a class="name">
  <strong class="user"><em>pugazhenthi k</em></strong></a><div class="date" title="2013-01-18 09:57"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom111133">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?Php <br><br></span><span class="comment">### SUB STRING&nbsp; BY WORD USING substr() and strpos()&nbsp; #####<br><br>### THIS SCRIPT WILL RETURN PART OF STRING&nbsp; WITHOUT WORD BREAK ###<br><br></span><span class="default">$description </span><span class="keyword">= </span><span class="default">‘your description here your description here your description here your description here your description here your description here your description hereyour description here your description here’&nbsp; </span><span class="comment">// your description here .<br><br></span><span class="default">$no_letter </span><span class="keyword">= </span><span class="default">30 </span><span class="keyword">;<br><br>if(</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$desctiption</span><span class="keyword">) &gt; </span><span class="default">30 </span><span class="keyword">)<br>{<br>&nbsp; &nbsp;&nbsp; echo </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$description</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$description</span><span class="keyword">,</span><span class="default">’ ‘</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">));&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//strpos to find ‘ ‘ after 30 characters.<br></span><span class="keyword">}<br>else {<br>&nbsp; &nbsp;&nbsp; echo </span><span class="default">$description</span><span class="keyword">;<br>}<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="91351">  
  <a class="name">
  <strong class="user"><em>kaysar in ymail in com</em></strong></a><div class="date" title="2009-06-07 11:58"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom91351">
<div class="phpcode"><code><span class="html">
Drop extensions of a file (even from a file location string)<br><br><span class="default">&lt;?php<br><br>$filename </span><span class="keyword">= </span><span class="string">"c:/some dir/abc defg. hi.jklmn"</span><span class="keyword">;<br><br>echo </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, (</span><span class="default">strlen </span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">)) - (</span><span class="default">strlen </span><span class="keyword">(</span><span class="default">strrchr</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">,</span><span class="string">'.'</span><span class="keyword">))));<br><br></span><span class="default">?&gt;<br></span><br>output: c:/some dir/abc defg. hi<br><br>Hope it may help somebody like me.. (^_^)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="53199">  
  <a class="name">
  <strong class="user"><em>bleakwind at msn dot com</em></strong></a><div class="date" title="2005-05-25 10:11"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom53199">
<div class="phpcode"><code><span class="html">
This returns the portion of str specified by the start and length parameters..<br>It can performs multi-byte safe on number of characters. like mb_strcut() ...<br><br>Note:<br>1.Use it like this bite_str(string str, int start, int length [,byte of on string]);<br>2.First character's position is 0. Second character position is 1, and so on...<br>3.$byte is one character length of your encoding, For example: utf-8 is "3", gb2312 and big5 is "2"...you can use the function strlen() get it... <br>Enjoy it :) ...<br><br>--- Bleakwind<br>QQ:940641<br><a rel="nofollow" target="_blank">http://www.weaverdream.com</a><br><br>PS:I'm sorry my english is too poor... :( <br><br><span class="default">&lt;?php<br></span><span class="comment">// String intercept By Bleakwind<br>// utf-8:$byte=3 | gb2312:$byte=2 | big5:$byte=2<br></span><span class="keyword">function </span><span class="default">bite_str</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">, </span><span class="default">$len</span><span class="keyword">, </span><span class="default">$byte</span><span class="keyword">=</span><span class="default">3</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="default">$str&nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$count&nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$str_len </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">);<br>&nbsp; &nbsp; for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$str_len</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if ((</span><span class="default">$count</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">-</span><span class="default">$start</span><span class="keyword">)&gt;</span><span class="default">$len</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$str&nbsp; </span><span class="keyword">.= </span><span class="string">"..."</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; } elseif ((</span><span class="default">ord</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">)) &lt;= </span><span class="default">128</span><span class="keyword">) &amp;&amp; (</span><span class="default">$count </span><span class="keyword">&lt; </span><span class="default">$start</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$count</span><span class="keyword">++;<br>&nbsp; &nbsp; &nbsp; &nbsp; } elseif ((</span><span class="default">ord</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">)) &gt; </span><span class="default">128</span><span class="keyword">) &amp;&amp; (</span><span class="default">$count </span><span class="keyword">&lt; </span><span class="default">$start</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$count </span><span class="keyword">= </span><span class="default">$count</span><span class="keyword">+</span><span class="default">2</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$i&nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">$i</span><span class="keyword">+</span><span class="default">$byte</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; } elseif ((</span><span class="default">ord</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">)) &lt;= </span><span class="default">128</span><span class="keyword">) &amp;&amp; (</span><span class="default">$count </span><span class="keyword">&gt;= </span><span class="default">$start</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$str&nbsp; </span><span class="keyword">.= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$count</span><span class="keyword">++;<br>&nbsp; &nbsp; &nbsp; &nbsp; } elseif ((</span><span class="default">ord</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">)) &gt; </span><span class="default">128</span><span class="keyword">) &amp;&amp; (</span><span class="default">$count </span><span class="keyword">&gt;= </span><span class="default">$start</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$str&nbsp; </span><span class="keyword">.= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">,</span><span class="default">$byte</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$count </span><span class="keyword">= </span><span class="default">$count</span><span class="keyword">+</span><span class="default">2</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$i&nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">$i</span><span class="keyword">+</span><span class="default">$byte</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; return </span><span class="default">$str</span><span class="keyword">;<br>}<br><br></span><span class="comment">// Test<br></span><span class="default">$str </span><span class="keyword">= </span><span class="string">"123456???ֽ?123456?ַ???123456??ȡ????"</span><span class="keyword">;<br>for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">30</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++){<br>&nbsp; &nbsp; echo </span><span class="string">"&lt;br&gt;"</span><span class="keyword">.</span><span class="default">bite_str</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">,</span><span class="default">20</span><span class="keyword">);&nbsp; &nbsp; <br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="101863">  
  <a class="name">
  <strong class="user"><em>nikolai dot wuestemann at t-online dot de</em></strong></a><div class="date" title="2011-01-14 08:56"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom101863">
<div class="phpcode"><code><span class="html">
If you want to have a string BETWEEN two strings, just use this function:
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">get_between</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">, </span><span class="default">$end</span><span class="keyword">)
<br>{
<br>&nbsp; </span><span class="default">$substr </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$start</span><span class="keyword">)+</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">), (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">) - </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$end</span><span class="keyword">))*(-</span><span class="default">1</span><span class="keyword">));
<br>&nbsp; return </span><span class="default">$substr</span><span class="keyword">;
<br>}
<br>
<br></span><span class="comment">//Example:
<br>
<br></span><span class="default">$string </span><span class="keyword">= </span><span class="string">"123456789"</span><span class="keyword">;
<br></span><span class="default">$a </span><span class="keyword">= </span><span class="string">"12"</span><span class="keyword">;
<br></span><span class="default">$b </span><span class="keyword">= </span><span class="string">"9"</span><span class="keyword">;
<br>
<br>echo </span><span class="default">get_between</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">);
<br>
<br></span><span class="comment">//Output:
<br>//345678
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="103843">  
  <a class="name">
  <strong class="user"><em>Quicker</em></strong></a><div class="date" title="2011-05-06 04:17"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom103843">
<div class="phpcode"><code><span class="html">
If you need to parse utf-8 strings char by char, try this one:
<br>
<br><span class="default">&lt;?php
<br>&nbsp; &nbsp;&nbsp; $utf8marker</span><span class="keyword">=</span><span class="default">chr</span><span class="keyword">(</span><span class="default">128</span><span class="keyword">);
<br>&nbsp; &nbsp;&nbsp; </span><span class="default">$count</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;
<br>&nbsp; &nbsp;&nbsp; while(isset(</span><span class="default">$string</span><span class="keyword">{</span><span class="default">$count</span><span class="keyword">})){
<br>&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$string</span><span class="keyword">{</span><span class="default">$count</span><span class="keyword">}&gt;=</span><span class="default">$utf8marker</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$parsechar</span><span class="keyword">=</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$count</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$count</span><span class="keyword">+=</span><span class="default">2</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp;&nbsp; } else {
<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$parsechar</span><span class="keyword">=</span><span class="default">$string</span><span class="keyword">{</span><span class="default">$count</span><span class="keyword">};
<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$count</span><span class="keyword">++;
<br>&nbsp; &nbsp; &nbsp;&nbsp; }
<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">/* do what you like with parsechar ... , eg.:*/&nbsp; </span><span class="keyword">echo </span><span class="default">$parsechar</span><span class="keyword">.</span><span class="string">"&lt;BR&gt;\r\n"</span><span class="keyword">;
<br>&nbsp; &nbsp;&nbsp; }
<br></span><span class="default">?&gt;
<br></span>
<br>- it works without mb_substr
<br>- it is fast, because it grabs characters based on indexes&nbsp; when possible and avoids any count and split functions</span>
</code></div>
  </div>
 </div>
  <div class="note" id="121873">  
  <a class="name">
  <strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2017-11-15 01:17"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom121873">
<div class="phpcode"><code><span class="html">
Be aware of a slight inconsistency between substr and mb_substr<br><br>mb_substr("", 4);&nbsp; &nbsp; &nbsp; returns empty string<br><br>substr("", 4);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; returns boolean false<br><br>tested in PHP 7.1.11 (Fedora 26) and PHP 5.4.16 (CentOS 7.4)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="77483">  
  <a class="name">
  <strong class="user"><em>Petez</em></strong></a><div class="date" title="2007-08-31 03:56"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom77483">
<div class="phpcode"><code><span class="html">
I wanted to work out the fastest way to get the first few characters from a string, so I ran the following experiment to compare substr, direct string access and strstr:<br><br><span class="default">&lt;?php<br></span><span class="comment">/* substr access */<br></span><span class="default">beginTimer</span><span class="keyword">();<br>for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">1500000</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++){<br>&nbsp; &nbsp; </span><span class="default">$opening </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">11</span><span class="keyword">);<br>&nbsp; &nbsp; if (</span><span class="default">$opening </span><span class="keyword">== </span><span class="string">'Lorem ipsum'</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">true</span><span class="keyword">;<br>&nbsp; &nbsp; }else{<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>}<br></span><span class="default">$endtime1 </span><span class="keyword">= </span><span class="default">endTimer</span><span class="keyword">();<br><br></span><span class="comment">/* direct access */<br></span><span class="default">beginTimer</span><span class="keyword">();<br>for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">1500000</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++){<br>&nbsp; &nbsp; if (</span><span class="default">$string</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] == </span><span class="string">'L' </span><span class="keyword">&amp;&amp; </span><span class="default">$string</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] == </span><span class="string">'o' </span><span class="keyword">&amp;&amp; </span><span class="default">$string</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">] == </span><span class="string">'r' </span><span class="keyword">&amp;&amp; </span><span class="default">$string</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">] == </span><span class="string">'e' </span><span class="keyword">&amp;&amp; </span><span class="default">$string</span><span class="keyword">[</span><span class="default">4</span><span class="keyword">] == </span><span class="string">'m' </span><span class="keyword">&amp;&amp; </span><span class="default">$string</span><span class="keyword">[</span><span class="default">5</span><span class="keyword">] == </span><span class="string">' ' </span><span class="keyword">&amp;&amp; </span><span class="default">$string</span><span class="keyword">[</span><span class="default">6</span><span class="keyword">] == </span><span class="string">'i' </span><span class="keyword">&amp;&amp; </span><span class="default">$string</span><span class="keyword">[</span><span class="default">7</span><span class="keyword">] == </span><span class="string">'p' </span><span class="keyword">&amp;&amp; </span><span class="default">$string</span><span class="keyword">[</span><span class="default">8</span><span class="keyword">] == </span><span class="string">'s' </span><span class="keyword">&amp;&amp; </span><span class="default">$string</span><span class="keyword">[</span><span class="default">9</span><span class="keyword">] == </span><span class="string">'u' </span><span class="keyword">&amp;&amp; </span><span class="default">$string</span><span class="keyword">[</span><span class="default">10</span><span class="keyword">] == </span><span class="string">'m'</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">true</span><span class="keyword">;<br>&nbsp; &nbsp; }else{<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>}<br></span><span class="default">$endtime2 </span><span class="keyword">= </span><span class="default">endTimer</span><span class="keyword">();<br><br></span><span class="comment">/* strstr access */<br></span><span class="default">beginTimer</span><span class="keyword">();<br>for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">1500000</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++){<br>&nbsp; &nbsp; </span><span class="default">$opening </span><span class="keyword">= </span><span class="default">strstr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="string">'Lorem ipsum'</span><span class="keyword">);<br>&nbsp; &nbsp; if (</span><span class="default">$opening </span><span class="keyword">== </span><span class="default">true</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">true</span><span class="keyword">;<br>&nbsp; &nbsp; }else{<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>}<br></span><span class="default">$endtime3 </span><span class="keyword">= </span><span class="default">endTimer</span><span class="keyword">();<br><br>echo </span><span class="default">$endtime1</span><span class="keyword">.</span><span class="string">"\r\n"</span><span class="keyword">.</span><span class="default">$endtime2</span><span class="keyword">.</span><span class="string">"\r\n"</span><span class="keyword">.</span><span class="default">$endtime3</span><span class="keyword">;<br></span><span class="default">?&gt;<br></span><br>The string was 6 paragraphs of Lorem Ipsum, and I was trying match the first two words. The experiment was run 3 times and averaged. The results were:<br><br>(substr) 3.24<br>(direct access) 11.49<br>(strstr) 4.96<br><br>(With standard deviations 0.01, 0.02 and 0.04)<br><br>THEREFORE substr is the fastest of the three methods for getting the first few letters of a string.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="86587">  
  <a class="name">
  <strong class="user"><em>mar dot czapla at gmail dot com</em></strong></a><div class="date" title="2008-10-24 02:31"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom86587">
<div class="phpcode"><code><span class="html">
Here we have gr8 function which simply convert ip address to a number using substr with negative offset.
<br>You can need it if you want to compare some IP addresses converted to a numbers. 
<br>For example when using ip2country, or eliminating same range of ip addresses from your website :D
<br>
<br><span class="default">&lt;?php
<br>
<br></span><span class="keyword">function </span><span class="default">ip2no</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">)
<br>{&nbsp; &nbsp; 
<br>&nbsp; &nbsp; list(</span><span class="default">$A</span><span class="keyword">,</span><span class="default">$B</span><span class="keyword">,</span><span class="default">$C</span><span class="keyword">,</span><span class="default">$D</span><span class="keyword">)&nbsp; &nbsp; =&nbsp; &nbsp; </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"."</span><span class="keyword">,</span><span class="default">$val</span><span class="keyword">);
<br>&nbsp; &nbsp; return 
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">substr</span><span class="keyword">(</span><span class="string">"000"</span><span class="keyword">.</span><span class="default">$A</span><span class="keyword">,-</span><span class="default">3</span><span class="keyword">).
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">substr</span><span class="keyword">(</span><span class="string">"000"</span><span class="keyword">.</span><span class="default">$B</span><span class="keyword">,-</span><span class="default">3</span><span class="keyword">).
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">substr</span><span class="keyword">(</span><span class="string">"000"</span><span class="keyword">.</span><span class="default">$C</span><span class="keyword">,-</span><span class="default">3</span><span class="keyword">).
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">substr</span><span class="keyword">(</span><span class="string">"000"</span><span class="keyword">.</span><span class="default">$D</span><span class="keyword">,-</span><span class="default">3</span><span class="keyword">);
<br>}
<br>
<br></span><span class="default">$min&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&nbsp; &nbsp; </span><span class="default">ip2no</span><span class="keyword">(</span><span class="string">"10.11.1.0"</span><span class="keyword">);
<br></span><span class="default">$max&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&nbsp; &nbsp; </span><span class="default">ip2no</span><span class="keyword">(</span><span class="string">"111.11.1.0"</span><span class="keyword">);
<br></span><span class="default">$visitor&nbsp; &nbsp; </span><span class="keyword">=&nbsp; &nbsp; </span><span class="default">ip2no</span><span class="keyword">(</span><span class="string">"105.1.20.200"</span><span class="keyword">);
<br>
<br>if(</span><span class="default">$min</span><span class="keyword">&lt;</span><span class="default">$visitor </span><span class="keyword">&amp;&amp; </span><span class="default">$visitor</span><span class="keyword">&lt;</span><span class="default">$max</span><span class="keyword">)&nbsp; &nbsp; 
<br>&nbsp; &nbsp; {&nbsp; &nbsp; echo </span><span class="string">'Welcome !'</span><span class="keyword">;&nbsp; &nbsp; }
<br>else&nbsp; &nbsp; 
<br>&nbsp; &nbsp; {&nbsp; &nbsp; echo </span><span class="string">'Get out of here !'</span><span class="keyword">;&nbsp; &nbsp; }
<br>
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="89747">  
  <a class="name">
  <strong class="user"><em>link</em></strong></a><div class="date" title="2009-03-20 07:19"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom89747">
<div class="phpcode"><code><span class="html">
I created some functions for entity-safe splitting+lengthcounting:<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">strlen_entities</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="default">preg_match_all</span><span class="keyword">(<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'/((?:&amp;(?:#[0-9]{2,}|[a-z]{2,});)|(?:[^&amp;])|'</span><span class="keyword">.&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'(?:&amp;(?!\w;)))s'</span><span class="keyword">,</span><span class="default">$text</span><span class="keyword">,</span><span class="default">$textarray</span><span class="keyword">);<br>&nbsp; &nbsp; return </span><span class="default">count</span><span class="keyword">(</span><span class="default">$textarray</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);<br>}&nbsp; <br>function </span><span class="default">substr_entities</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">,</span><span class="default">$start</span><span class="keyword">,</span><span class="default">$limit</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="default">$return </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">preg_match_all</span><span class="keyword">(<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'/((?:&amp;(?:#[0-9]{2,}|[a-z]{2,});)|(?:[^&amp;])|'</span><span class="keyword">.&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'(?:&amp;(?!\w;)))s'</span><span class="keyword">,</span><span class="default">$text</span><span class="keyword">,</span><span class="default">$textarray</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$textarray </span><span class="keyword">= </span><span class="default">$textarray</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br>&nbsp; &nbsp; </span><span class="default">$numchars </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$textarray</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; if (</span><span class="default">$start</span><span class="keyword">&gt;=</span><span class="default">$numchars</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; if (</span><span class="default">$start</span><span class="keyword">&lt;</span><span class="default">0</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$start </span><span class="keyword">= (</span><span class="default">$numchars</span><span class="keyword">)+</span><span class="default">$start</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; if (</span><span class="default">$start</span><span class="keyword">&gt;=</span><span class="default">0</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$limit</span><span class="keyword">==</span><span class="default">0</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$end</span><span class="keyword">=</span><span class="default">$numchars</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; elseif (</span><span class="default">$limit</span><span class="keyword">&gt;</span><span class="default">0</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$end </span><span class="keyword">= </span><span class="default">$start</span><span class="keyword">+(</span><span class="default">$limit</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; else<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$end </span><span class="keyword">= (</span><span class="default">$numchars</span><span class="keyword">)+</span><span class="default">$limit</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">$start</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;=</span><span class="default">$end</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$return </span><span class="keyword">.= </span><span class="default">$textarray</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$return</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="100678">  
  <a class="name">
  <strong class="user"><em>Cristianlf</em></strong></a><div class="date" title="2010-10-29 02:10"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom100678">
<div class="phpcode"><code><span class="html">
I needed a function like lpad from oracle, or right from SQL
<br> then I use this code :
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">right</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$chars</span><span class="keyword">)
<br>{
<br>&nbsp; &nbsp; </span><span class="default">$vright </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">)-</span><span class="default">$chars</span><span class="keyword">,</span><span class="default">$chars</span><span class="keyword">);
<br>&nbsp; &nbsp; return </span><span class="default">$vright</span><span class="keyword">;
<br>&nbsp; &nbsp; 
<br>}
<br>
<br>&nbsp; &nbsp; echo </span><span class="default">right</span><span class="keyword">(</span><span class="string">'0r0j4152'</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">);
<br></span><span class="default">?&gt;
<br></span>
<br>Result: 
<br> 4152
<br>------------------------------------------------
<br>This function is really simple, I just wanted to share, maybe helps someone out there.&nbsp; 
<br>
<br>regards,</span>
</code></div>
  </div>
 </div>
  <div class="note" id="84907">  
  <a class="name">
  <strong class="user"><em>post [at] jannik - zappe [dot] de</em></strong></a><div class="date" title="2008-08-05 07:59"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom84907">
<div class="phpcode"><code><span class="html">
Just a little function to cut a string by the wanted amount. Works in both directions.<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">cutString</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$amount </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">, </span><span class="default">$dir </span><span class="keyword">= </span><span class="string">"right"</span><span class="keyword">)<br>{<br>&nbsp; if((</span><span class="default">$n </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">)) &gt; </span><span class="default">0</span><span class="keyword">)<br>&nbsp; {<br>&nbsp; &nbsp; if(</span><span class="default">$dir </span><span class="keyword">== </span><span class="string">"right"</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$start </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$end </span><span class="keyword">= </span><span class="default">$n</span><span class="keyword">-</span><span class="default">$amount</span><span class="keyword">;<br>&nbsp; &nbsp; } elseif( </span><span class="default">$dir </span><span class="keyword">== </span><span class="string">"left"</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$start </span><span class="keyword">= </span><span class="default">$amount</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$end </span><span class="keyword">= </span><span class="default">$n</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">, </span><span class="default">$end</span><span class="keyword">);<br>&nbsp; } else return </span><span class="default">false</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;<br></span><br>Enjoy ;)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="103143">  
  <a class="name">
  <strong class="user"><em>slow at acedsl dot com</em></strong></a><div class="date" title="2011-03-28 01:47"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom103143">
<div class="phpcode"><code><span class="html">
Anyone coming from the Python world will be accustomed to making substrings by using a "slice index" on a string.&nbsp; The following function emulates basic Python string slice behavior. (A more elaborate version could be made to support array input as well as string, and the optional third "step" argument.)<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">function </span><span class="default">py_slice</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$slice</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$arg </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">':'</span><span class="keyword">, </span><span class="default">$slice</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$start </span><span class="keyword">= </span><span class="default">intval</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);<br>&nbsp; &nbsp; if (</span><span class="default">$start </span><span class="keyword">&lt; </span><span class="default">0</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$start </span><span class="keyword">+= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">);<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; if (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">) === </span><span class="default">1</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; if (</span><span class="default">trim</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]) === </span><span class="string">''</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">);<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="default">$end </span><span class="keyword">= </span><span class="default">intval</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]);<br>&nbsp; &nbsp; if (</span><span class="default">$end </span><span class="keyword">&lt; </span><span class="default">0</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$end </span><span class="keyword">+= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">);<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">, </span><span class="default">$end </span><span class="keyword">- </span><span class="default">$start</span><span class="keyword">);<br>}<br><br>print </span><span class="default">py_slice</span><span class="keyword">(</span><span class="string">'abcdefg'</span><span class="keyword">, </span><span class="string">'2'</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br>print </span><span class="default">py_slice</span><span class="keyword">(</span><span class="string">'abcdefg'</span><span class="keyword">, </span><span class="string">'2:4'</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br>print </span><span class="default">py_slice</span><span class="keyword">(</span><span class="string">'abcdefg'</span><span class="keyword">, </span><span class="string">'2:'</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br>print </span><span class="default">py_slice</span><span class="keyword">(</span><span class="string">'abcdefg'</span><span class="keyword">, </span><span class="string">':4'</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br>print </span><span class="default">py_slice</span><span class="keyword">(</span><span class="string">'abcdefg'</span><span class="keyword">, </span><span class="string">':-3'</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br>print </span><span class="default">py_slice</span><span class="keyword">(</span><span class="string">'abcdefg'</span><span class="keyword">, </span><span class="string">'-3:'</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br><br></span><span class="default">?&gt;<br></span><br>The $slice parameter can be a single character index, or a range separated by a colon. The start of the range is inclusive and the end is exclusive, which may be&nbsp; counterintuitive. (Eg, py_slice('abcdefg', '2:4') yields 'cd' not 'cde'). A negative range value means to count from the end of the string instead of the beginning. Both the start and end of the range may be omitted; the start defaults to 0 and the end defaults to the total length of the input.<br><br>The output from the examples:<br>c<br>cd<br>cdefg<br>abcd<br>abcd<br>efg</span>
</code></div>
  </div>
 </div>
  <div class="note" id="53605">  
  <a class="name">
  <strong class="user"><em>rob NOSPAM at clancentric dot net</em></strong></a><div class="date" title="2005-06-07 03:43"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom53605">
<div class="phpcode"><code><span class="html">
I have developed a function with a similar outcome to jay's
<br>
<br>Checks if the last character is or isnt a space. (does it the normal way if it is)
<br>It explodes the string into an array of seperate works, the effect is... it chops off anything after and including the last space.
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">limit_string</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$charlimit</span><span class="keyword">)
<br>{
<br>&nbsp; &nbsp; if(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$charlimit</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">) != </span><span class="string">' '</span><span class="keyword">)
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="string">'0'</span><span class="keyword">,</span><span class="default">$charlimit</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">,</span><span class="default">$string</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">array_pop</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$new_string </span><span class="keyword">= </span><span class="default">implode</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">,</span><span class="default">$array</span><span class="keyword">);
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$new_string</span><span class="keyword">.</span><span class="string">'...'</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; else
<br>&nbsp; &nbsp; {&nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="string">'0'</span><span class="keyword">,</span><span class="default">$charlimit</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">).</span><span class="string">'...'</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="54281">  
  <a class="name">
  <strong class="user"><em>php_net at thomas dot trella dot de</em></strong></a><div class="date" title="2005-06-29 08:07"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom54281">
<div class="phpcode"><code><span class="html">
I needed to cut a string after x chars at a&nbsp; html converted utf-8 text (for example Japanese text like &amp;#23344;&amp;#35632;&amp;#24368;&amp;#33072;&amp;#27440;&amp;#32591;). <br>The problem was, the different length of the signs, so I wrote the following function to handle that.<br>Perhaps it helps.<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">function </span><span class="default">html_cutstr </span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$len</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; if (!</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/\&amp;#[0-9]*;.*/i'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">))<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$rVal </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$len</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; </span><span class="default">$chars </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$start </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$chars </span><span class="keyword">&gt;= </span><span class="default">$len</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; break;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$str_tmp </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">-</span><span class="default">$start</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/\&amp;#[0-9]*;.*/i'</span><span class="keyword">, </span><span class="default">$str_tmp</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$chars</span><span class="keyword">++;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$start </span><span class="keyword">= </span><span class="default">$i</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="default">$rVal </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">);<br>&nbsp; &nbsp; if (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">) &gt; </span><span class="default">$start</span><span class="keyword">)<br>&nbsp; &nbsp; </span><span class="default">$rVal </span><span class="keyword">.= </span><span class="string">" ..."</span><span class="keyword">;<br>&nbsp; &nbsp; return </span><span class="default">$rVal</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="109046">  
  <a class="name">
  <strong class="user"><em>pheagey at gmail dot com</em></strong></a><div class="date" title="2012-06-15 02:27"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom109046">
<div class="phpcode"><code><span class="html">
Using a 0 as the last parameter for substr().
<br>
<br>As per examples
<br><span class="default">&lt;?php $var </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">); </span><span class="default">?&gt;
<br></span>
<br>works no problem. However 
<br><span class="default">&lt;?php $var </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">); </span><span class="default">?&gt;
<br></span>
<br>will get you nothing. Just a quick heads up</span>
</code></div>
  </div>
 </div>
  <div class="note" id="114219">  
  <a class="name">
  <strong class="user"><em>fatihmertdogancan at hotmail dot com</em></strong></a><div class="date" title="2014-01-26 08:28"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom114219">
<div class="phpcode"><code><span class="html">
[English]<br>I created python similar accesing list or string with php substr &amp; strrev functions.<br><br>Use: str($string,$pattern)<br><br>About the python pattern,<br><a rel="nofollow" target="_blank">http://docs.python.org/release/1.5.1p1/tut/strings.html</a><br><a rel="nofollow" target="_blank">http://effbot.org/zone/python-list.htm</a><br><br>About of pattern structures<br>[start:stop:step]<br><br>Example,<br><span class="default">&lt;?php<br>$s </span><span class="keyword">= </span><span class="string">"fatihmertdogancan"</span><span class="keyword">;<br>echo </span><span class="default">str</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="string">"1:9:-2"</span><span class="keyword">);<br>echo </span><span class="string">"&lt;br/&gt;"</span><span class="keyword">;<br>echo </span><span class="default">str</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="string">"1:-3:-2"</span><span class="keyword">);<br>echo </span><span class="string">"&lt;br/&gt;"</span><span class="keyword">;<br>echo </span><span class="default">str</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="string">"1:-11:-5"</span><span class="keyword">);<br>echo </span><span class="string">"&lt;br/&gt;"</span><span class="keyword">;<br>echo </span><span class="default">str</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="string">"1:9:4"</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>Output,<br>thetoacn<br>eht<br>aom<br>htan<br><br>This is function phpfiddle link: <a rel="nofollow" target="_blank">http://phpfiddle.org/main/code/e82-y5d</a><br><br>or source;<br><br><span class="default">&lt;?php<br>&nbsp; &nbsp; </span><span class="keyword">function </span><span class="default">str</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">$pattern</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//[start:stop:step]<br>&nbsp; &nbsp; &nbsp; &nbsp; //pattern -&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ([-]?[0-9]*|\s):([-]?[0-9]*|\s):([-]?[0-9]*|\s)<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"/([-]?[0-9]*|\s?):([-]?[0-9]*|\s?):?([-]?[0-9]*|\s?)/"</span><span class="keyword">, </span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$yakala</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$start </span><span class="keyword">= </span><span class="default">$yakala</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$stop </span><span class="keyword">= </span><span class="default">$yakala</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$step </span><span class="keyword">= </span><span class="default">$yakala</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; if(empty(</span><span class="default">$start</span><span class="keyword">) &amp;&amp; empty(</span><span class="default">$stop</span><span class="keyword">) &amp;&amp; </span><span class="default">$step </span><span class="keyword">== </span><span class="string">"-1"</span><span class="keyword">){</span><span class="comment">//istisna durum<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">return </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }else if(empty(</span><span class="default">$start</span><span class="keyword">) &amp;&amp; empty(</span><span class="default">$stop</span><span class="keyword">) &amp;&amp; isset(</span><span class="default">$step</span><span class="keyword">)){</span><span class="comment">//istisna durum<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$rev </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$yeni </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$step</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] == </span><span class="string">"-" </span><span class="keyword">&amp;&amp; </span><span class="default">$stop </span><span class="keyword">!= </span><span class="string">"-1"</span><span class="keyword">){</span><span class="default">$rev </span><span class="keyword">= </span><span class="string">"VAR"</span><span class="keyword">;}<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$atla </span><span class="keyword">= </span><span class="default">abs</span><span class="keyword">(</span><span class="default">$step</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt;= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">$i</span><span class="keyword">*</span><span class="default">$atla</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(isset(</span><span class="default">$str</span><span class="keyword">[</span><span class="default">$offset</span><span class="keyword">])){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$yeni </span><span class="keyword">= </span><span class="default">$yeni</span><span class="keyword">.</span><span class="default">$str</span><span class="keyword">[</span><span class="default">$offset</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$rev </span><span class="keyword">!= </span><span class="string">"VAR"</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$yeni</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//"hepsi boş, step dolu o da +";<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">}else{<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$yeni</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//"hepsi boş, step dolu o da -";<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">}<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; if(empty(</span><span class="default">$start</span><span class="keyword">) &amp;&amp; empty(</span><span class="default">$stop</span><span class="keyword">) &amp;&amp; empty(</span><span class="default">$step</span><span class="keyword">)){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$str</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//"hepsi boş";<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">}else if(empty(</span><span class="default">$start</span><span class="keyword">)){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(isset(</span><span class="default">$stop</span><span class="keyword">) &amp;&amp; empty(</span><span class="default">$step</span><span class="keyword">)){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$rev </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$stop</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] == </span><span class="string">"-"</span><span class="keyword">){</span><span class="default">$rev </span><span class="keyword">= </span><span class="string">"VAR"</span><span class="keyword">;}<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$rev </span><span class="keyword">!= </span><span class="string">"VAR"</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$stop</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//"start ve step boş, stop dolu"<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">}else{<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$stop</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//"start ve step boş, stop -1";<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">}<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }else if(isset(</span><span class="default">$stop</span><span class="keyword">) &amp;&amp; isset(</span><span class="default">$step</span><span class="keyword">)){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$rev </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$stop</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] == </span><span class="string">"-"</span><span class="keyword">){</span><span class="default">$rev </span><span class="keyword">= </span><span class="string">"VAR"</span><span class="keyword">;}<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$yeni </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$step </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$rev </span><span class="keyword">!= </span><span class="string">"VAR"</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$str</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//"start boş, stop ve step dolu, step 1";<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">}else{<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">abs</span><span class="keyword">(</span><span class="default">$stop</span><span class="keyword">))); </span><span class="comment">//abs -&gt; mutlak değer (-5 = 5)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //"start boş, stop -, step dolu, step 1";<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">}<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }else{<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$atla </span><span class="keyword">= </span><span class="default">abs</span><span class="keyword">(</span><span class="default">$step</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt;= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">$i</span><span class="keyword">*</span><span class="default">$atla</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(isset(</span><span class="default">$str</span><span class="keyword">[</span><span class="default">$offset</span><span class="keyword">])){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$yeni </span><span class="keyword">= </span><span class="default">$yeni</span><span class="keyword">.</span><span class="default">$str</span><span class="keyword">[</span><span class="default">$offset</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$rev </span><span class="keyword">!= </span><span class="string">"VAR"</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$yeni</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$stop</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//"start boş, step ve stop dolu";<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">}else{<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$yeni</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">abs</span><span class="keyword">(</span><span class="default">$stop</span><span class="keyword">)));<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//"start boş, step ve stop -";<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">}<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//start boş değilse<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">}else if(!empty(</span><span class="default">$start</span><span class="keyword">)){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(isset(</span><span class="default">$stop</span><span class="keyword">) &amp;&amp; empty(</span><span class="default">$step</span><span class="keyword">)){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$rev </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$stop</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] == </span><span class="string">"-"</span><span class="keyword">){</span><span class="default">$rev </span><span class="keyword">= </span><span class="string">"VAR"</span><span class="keyword">;}<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$rev </span><span class="keyword">!= </span><span class="string">"VAR"</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">$start</span><span class="keyword">,</span><span class="default">$stop</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//return "step boş, start ve stop dolu";<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">}else{<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">abs</span><span class="keyword">(</span><span class="default">$stop</span><span class="keyword">)));<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//"step boş, start ve stop dolu, stop -";<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">}<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }else if(isset(</span><span class="default">$stop</span><span class="keyword">) &amp;&amp; isset(</span><span class="default">$step</span><span class="keyword">)){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//hepsi dolu<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$rev </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$stop</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] == </span><span class="string">"-"</span><span class="keyword">){</span><span class="default">$rev </span><span class="keyword">= </span><span class="string">"VAR"</span><span class="keyword">;}<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$yeni </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$step </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$rev </span><span class="keyword">!= </span><span class="string">"VAR"</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">$start</span><span class="keyword">,</span><span class="default">$stop</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//"hepsi dolu, step 1";<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">}else{<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">$start</span><span class="keyword">,</span><span class="default">abs</span><span class="keyword">(</span><span class="default">$stop</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//"hepsi dolu, step 1, stop -";<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">}<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }else{<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$stop</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] == </span><span class="string">"-"</span><span class="keyword">){</span><span class="default">$rev </span><span class="keyword">= </span><span class="string">"VAR"</span><span class="keyword">;}<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$atla </span><span class="keyword">= </span><span class="default">abs</span><span class="keyword">(</span><span class="default">$step</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt;= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">$i</span><span class="keyword">*</span><span class="default">$atla</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(isset(</span><span class="default">$str</span><span class="keyword">[</span><span class="default">$offset</span><span class="keyword">])){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$yeni </span><span class="keyword">= </span><span class="default">$yeni</span><span class="keyword">.</span><span class="default">$str</span><span class="keyword">[</span><span class="default">$offset</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$rev </span><span class="keyword">!= </span><span class="string">"VAR"</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$yeni</span><span class="keyword">,</span><span class="default">$start</span><span class="keyword">,</span><span class="default">$stop</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//"hepsi dolu";<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">}else{<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$yeni</span><span class="keyword">,</span><span class="default">$start</span><span class="keyword">,</span><span class="default">abs</span><span class="keyword">(</span><span class="default">$stop</span><span class="keyword">)));<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//"hepsi dolu, stop -";<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">}<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br></span><span class="default">?&gt;<br></span><br>Good works..</span>
</code></div>
  </div>
 </div>
  <div class="note" id="52893">  
  <a class="name">
  <strong class="user"><em>fanfatal at fanfatal dot pl</em></strong></a><div class="date" title="2005-05-16 11:45"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom52893">
<div class="phpcode"><code><span class="html">
Hmm ... this is a script I wrote, whitch is very similar to substr, but it isn't takes html and bbcode for counting and it takes portion of string and show avoided (html &amp; bbcode) tags too ;] 
<br>Specially usefull for show part of serach result included html and bbcode tags
<br>
<br><span class="default">&lt;?php
<br>
<br></span><span class="comment">/**
<br> * string csubstr ( string string, int start [, int length] )
<br> *
<br> * @author FanFataL
<br> * @param string string
<br> * @param int start
<br> * @param [int length]
<br> * @return string
<br> */
<br></span><span class="keyword">function </span><span class="default">csubstr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">, </span><span class="default">$length</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">) {
<br>&nbsp; &nbsp; </span><span class="default">$pattern </span><span class="keyword">= </span><span class="string">'/(\[\w+[^\]]*?\]|\[\/\w+\]|&lt;\w+[^&gt;]*?&gt;|&lt;\/\w+&gt;)/i'</span><span class="keyword">;
<br>&nbsp; &nbsp; </span><span class="default">$clean </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">chr</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">), </span><span class="default">$string</span><span class="keyword">);
<br>&nbsp; &nbsp; if(!</span><span class="default">$length</span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$clean</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">);
<br>&nbsp; &nbsp; else {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$clean</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">, </span><span class="default">$length</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$clean</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">, </span><span class="default">$length </span><span class="keyword">+ </span><span class="default">substr_count</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">chr</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">)));
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; </span><span class="default">$pattern </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">),</span><span class="string">'(.*?)'</span><span class="keyword">,</span><span class="default">preg_quote</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">));
<br>&nbsp; &nbsp; if(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/'</span><span class="keyword">.</span><span class="default">$pattern</span><span class="keyword">.</span><span class="string">'/is'</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">, </span><span class="default">$matched</span><span class="keyword">))
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$matched</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];
<br>&nbsp; &nbsp; return </span><span class="default">$string</span><span class="keyword">;
<br>}
<br>
<br></span><span class="default">?&gt;
<br></span>
<br>Using this is similar to simple substr.
<br>
<br>Greatings ;]
<br>...</span>
</code></div>
  </div>
 </div>
  <div class="note" id="70513">  
  <a class="name">
  <strong class="user"><em>egingell at sisna dot com</em></strong></a><div class="date" title="2006-10-19 03:19"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom70513">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?php<br><br></span><span class="comment">/**<br> * string substrpos(string $str, mixed $start [[, mixed $end], boolean $ignore_case])<br> *<br> * If $start is a string, substrpos will return the string from the position of the first occuring $start to $end<br> *<br> * If $end is a string, substrpos will return the string from $start to the position of the first occuring $end<br> *<br> * If the first character in (string) $start or (string) $end is '-', the last occuring string will be used.<br> *<br> * If $ignore_case is true, substrpos will not care about the case.<br> * If $ignore_case is false (or anything that is not (boolean) true, the function will be case sensitive.<br> *&nbsp; &nbsp; &nbsp; &nbsp; Both of the above: only applies if either $start or $end are strings.<br> *<br> * echo substrpos('This is a string with 0123456789 numbers in it.', 5, '5');<br> *&nbsp; &nbsp; &nbsp; &nbsp; // Prints 'is a string with 01234';<br> *<br> * echo substrpos('This is a string with 0123456789 numbers in it.', '5', 5);<br> *&nbsp; &nbsp; &nbsp; &nbsp; // Prints '56789'<br> *<br> * echo substrpos('This is a string with 0123456789 numbers in it and two strings.', -60, '-string')<br> *&nbsp; &nbsp; &nbsp; &nbsp; // Prints 's is a string with 0123456789 numbers in it and two '<br> *<br> * echo substrpos('This is a string with 0123456789 numbers in it and two strings.', -60, '-STRING', true)<br> *&nbsp; &nbsp; &nbsp; &nbsp; // Prints 's is a string with 0123456789 numbers in it and two '<br> *<br> * echo substrpos('This is a string with 0123456789 numbers in it and two strings.', -60, '-STRING', false)<br> *&nbsp; &nbsp; &nbsp; &nbsp; // Prints 's is a string with 0123456789 numbers in it and two strings.'<br> *<br> * Warnings:<br> *&nbsp; &nbsp; &nbsp; &nbsp; Since $start and $end both take either a string or an integer:<br> *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; If the character or string you are searching $str for is a number, pass it as a quoted string.<br> *&nbsp; &nbsp; &nbsp; &nbsp; If $end is (integer) 0, an empty string will be returned.<br> *&nbsp; &nbsp; &nbsp; &nbsp; Since this function takes negative strings ('-search_string'):<br> *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; If the string your using in $start or $end is a '-' or begins with a '-' escape it with a '\'.<br> *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; This only applies to the *first* character of $start or $end.<br> */<br><br>// Define stripos() if not defined (PHP &lt; 5).<br></span><span class="keyword">if (!</span><span class="default">is_callable</span><span class="keyword">(</span><span class="string">"stripos"</span><span class="keyword">)) {<br>&nbsp; &nbsp; function </span><span class="default">stripos</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">), </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">), </span><span class="default">$offset</span><span class="keyword">);<br>&nbsp; &nbsp; }<br>}<br><br>function </span><span class="default">substrpos</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">, </span><span class="default">$end </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">, </span><span class="default">$ignore_case </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="comment">// Use variable functions<br>&nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">$ignore_case </span><span class="keyword">=== </span><span class="default">true</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$strpos </span><span class="keyword">= </span><span class="string">'stripos'</span><span class="keyword">; </span><span class="comment">// stripos() is included above in case it's not defined (PHP &lt; 5).<br>&nbsp; &nbsp; </span><span class="keyword">} else {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$strpos </span><span class="keyword">= </span><span class="string">'strpos'</span><span class="keyword">;<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; </span><span class="comment">// If end is false, set it to the length of $str<br>&nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">$end </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$end </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">);<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; </span><span class="comment">// If $start is a string do what's needed to make it an integer position for substr().<br>&nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$start</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// If $start begins with '-' start processing until there's no more matches and use the last one found.<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">$start</span><span class="keyword">{</span><span class="default">0</span><span class="keyword">} == </span><span class="string">'-'</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Strip off the '-'<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$start </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$start</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$found </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while((</span><span class="default">$curr_pos </span><span class="keyword">= </span><span class="default">$strpos</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">)) !== </span><span class="default">false</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$found </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">$curr_pos </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$found </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$pos </span><span class="keyword">-= </span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// If $start begins with '\-', strip off the '\'.<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">$start</span><span class="keyword">{</span><span class="default">0</span><span class="keyword">} . </span><span class="default">$start</span><span class="keyword">{</span><span class="default">1</span><span class="keyword">} == </span><span class="string">'\-'</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$start </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$start</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">$strpos</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$start </span><span class="keyword">= </span><span class="default">$pos </span><span class="keyword">!== </span><span class="default">false </span><span class="keyword">? </span><span class="default">$pos </span><span class="keyword">: </span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; </span><span class="comment">// Chop the string from $start to strlen($str).<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">);<br><br>&nbsp; &nbsp; </span><span class="comment">// If $end is a string, do exactly what was done to $start, above.<br>&nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$end</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$end</span><span class="keyword">{</span><span class="default">0</span><span class="keyword">} == </span><span class="string">'-'</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$end </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$end</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$found </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while((</span><span class="default">$curr_pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$end</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">)) !== </span><span class="default">false</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$found </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">$curr_pos </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$found </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$pos </span><span class="keyword">-= </span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$end</span><span class="keyword">{</span><span class="default">0</span><span class="keyword">} . </span><span class="default">$end</span><span class="keyword">{</span><span class="default">1</span><span class="keyword">} == </span><span class="string">'\-'</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$end </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$end</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">$strpos</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$end</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$end </span><span class="keyword">= </span><span class="default">$pos </span><span class="keyword">!== </span><span class="default">false </span><span class="keyword">? </span><span class="default">$pos </span><span class="keyword">: </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">);<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; </span><span class="comment">// Since $str has already been chopped at $start, we can pass 0 as the new $start for substr()<br>&nbsp; &nbsp; </span><span class="keyword">return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$end</span><span class="keyword">);<br>}<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="126137">  
  <a class="name">
  <strong class="user"><em>robinhood70 at live dot ca</em></strong></a><div class="date" title="2021-06-04 05:45"><strong>3 months ago</strong></div>
  <div class="text" id="Hcom126137">
<div class="phpcode"><code><span class="html">
Prior to PHP 8, specifying length with zero-length strings or non-string values as input can produce potentially unexpected results.<br><br><span class="default">&lt;?php<br></span><span class="keyword">foreach ([</span><span class="string">'normal'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">, </span><span class="default">false</span><span class="keyword">, </span><span class="default">NULL</span><span class="keyword">] as </span><span class="default">$value</span><span class="keyword">) {<br>&nbsp; &nbsp; echo </span><span class="default">gettype</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">)) . </span><span class="string">' ' </span><span class="keyword">. </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">);<br>}<br><br></span><span class="comment">/*<br>string normal<br>boolean<br>string 1<br>boolean<br>boolean<br>*/<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="95918">  
  <a class="name">
  <strong class="user"><em>vnonov at gmail dot com / Viktor Nonov</em></strong></a><div class="date" title="2010-01-28 10:32"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom95918">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?php<br><br></span><span class="comment">//removes string from the end of other<br><br></span><span class="keyword">function </span><span class="default">removeFromEnd</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$stringToRemove</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$stringToRemoveLen </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$stringToRemove</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$stringLen </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">);<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">$stringLen </span><span class="keyword">- </span><span class="default">$stringToRemoveLen</span><span class="keyword">;<br><br>&nbsp; &nbsp; </span><span class="default">$out </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">);<br><br>&nbsp; &nbsp; return </span><span class="default">$out</span><span class="keyword">;<br>}<br><br></span><span class="default">$string </span><span class="keyword">= </span><span class="string">'picture.jpg.jpg'</span><span class="keyword">;<br></span><span class="default">$string </span><span class="keyword">= </span><span class="default">removeFromEnd</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="string">'.jpg'</span><span class="keyword">);<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="53639">  
  <a class="name">
  <strong class="user"><em>ivanhoe011 at gmail dot com</em></strong></a><div class="date" title="2005-06-07 08:31"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom53639">
<div class="phpcode"><code><span class="html">
If you need just a single character from the string you don't need to use substr(), just use curly braces notation:<br><br><span class="default">&lt;?php<br>&nbsp; &nbsp; </span><span class="comment">// both lines will output the 3rd character<br>&nbsp; &nbsp; </span><span class="keyword">echo </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$my_string</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br>&nbsp; &nbsp; echo </span><span class="default">$my_string</span><span class="keyword">{</span><span class="default">2</span><span class="keyword">};&nbsp; <br></span><span class="default">?&gt;<br></span><br>curly braces syntax is faster and more readable IMHO..</span>
</code></div>
  </div>
 </div>
  <div class="note" id="50915">  
  <a class="name">
  <strong class="user"><em>steve at unicycle dot co dot nz</em></strong></a><div class="date" title="2005-03-13 09:34"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom50915">
<div class="phpcode"><code><span class="html">
To quickly trim an optional trailing slash off the end of a path name:<br><br>if (substr( $path, -1 ) == '/') $path = substr( $path, 0, -1 );</span>
</code></div>
  </div>
 </div>
  <div class="note" id="90369">  
  <a class="name">
  <strong class="user"><em>webmaster at oehoeboeroe dot nl</em></strong></a><div class="date" title="2009-04-18 02:07"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom90369">
<div class="phpcode"><code><span class="html">
You might expect substr('123456', 6) to return an empty string. Instead it returns boolean FALSE.
<br>
<br>This behavior should be mentioned in the Return Values section of the manual. Instead it is only mentioned in the Parameters section.
<br>
<br>If you need an empty string instead of a boolean FALSE you should typecast the result to a string.
<br>
<br><span class="default">&lt;?php
<br>$a </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="string">'123456'</span><span class="keyword">, </span><span class="default">6</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// equivalent to $a = FALSE
<br></span><span class="default">$a </span><span class="keyword">= (string) </span><span class="default">substr</span><span class="keyword">(</span><span class="string">'123456'</span><span class="keyword">, </span><span class="default">6</span><span class="keyword">);&nbsp;&nbsp; </span><span class="comment">// equivalent to $a = '';
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="124353">  
  <a class="name">
  <strong class="user"><em>man13or at hotmail dot fr</em></strong></a><div class="date" title="2019-10-30 08:01"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom124353">
<div class="phpcode"><code><span class="html">
Shortcuts :<br><br>Getting the first character of a string<br>substr($string, 1)<br><br>Getting the last character of a string<br>substr($string, -1)<br><br>Remove the first character of a string<br>substr($string,1)<br><br>Remove the last character of a string<br>substr($string, 0, -1)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="119852">  
  <a class="name">
  <strong class="user"><em>m.m.j.kronenburg</em></strong></a><div class="date" title="2016-09-06 10:46"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom119852">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?php<br><br></span><span class="comment">/**<br>&nbsp; * Returns and extracts the portion of string specified by the<br>&nbsp; * start and length parameters from the original string.<br>&nbsp; *<br>&nbsp; * This function is simulair to function substr() except that it<br>&nbsp; * removes the substring from the orignal string <br>&nbsp; * (passed by reference).<br>&nbsp; *<br>&nbsp; * @param string $string&nbsp; &nbsp; &nbsp; The input string.<br>&nbsp; * @param integer $start&nbsp; &nbsp; &nbsp; The start position (see substr() for<br>&nbsp; *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; explanation).<br>&nbsp; * @param integer $length&nbsp; &nbsp;&nbsp; The length (see substr()<br>&nbsp; *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for explanation).<br>&nbsp; * @return mixed&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; The substring or FALSE (see substr() <br>&nbsp; *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for explanation).<br>&nbsp; **/<br></span><span class="keyword">function </span><span class="default">substrex</span><span class="keyword">(&amp;</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">, </span><span class="default">$length </span><span class="keyword">= </span><span class="default">PHP_INT_MAX</span><span class="keyword">)<br>{<br>&nbsp; if(</span><span class="default">$start </span><span class="keyword">&gt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">)) { return </span><span class="default">false</span><span class="keyword">; }<br>&nbsp; if(empty(</span><span class="default">$length</span><span class="keyword">))&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; { return </span><span class="string">''</span><span class="keyword">; }<br>&nbsp; if(</span><span class="default">$start </span><span class="keyword">&lt; </span><span class="default">0</span><span class="keyword">) { </span><span class="default">$start </span><span class="keyword">= </span><span class="default">max</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">$start </span><span class="keyword">+ </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">)); }<br>&nbsp; </span><span class="default">$end </span><span class="keyword">= (</span><span class="default">$length </span><span class="keyword">&lt; </span><span class="default">0</span><span class="keyword">) ? <br>&nbsp; &nbsp; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">) + </span><span class="default">$length </span><span class="keyword">: <br>&nbsp; &nbsp; </span><span class="default">min</span><span class="keyword">(</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">), </span><span class="default">$start </span><span class="keyword">+ </span><span class="default">$length</span><span class="keyword">);<br>&nbsp; if(</span><span class="default">$end </span><span class="keyword">&lt; </span><span class="default">$start</span><span class="keyword">) { return </span><span class="default">false</span><span class="keyword">; }<br>&nbsp; </span><span class="default">$length </span><span class="keyword">= </span><span class="default">$end </span><span class="keyword">- </span><span class="default">$start</span><span class="keyword">;<br>&nbsp; </span><span class="default">$substr </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">, </span><span class="default">$length</span><span class="keyword">);<br>&nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">).</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$end</span><span class="keyword">);&nbsp; <br>&nbsp; return </span><span class="default">$substr</span><span class="keyword">;<br>}<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="60548">  
  <a class="name">
  <strong class="user"><em>Bradley from California</em></strong></a><div class="date" title="2006-01-10 01:34"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom60548">
<div class="phpcode"><code><span class="html">
Add on to (a function originally written by) "Matias from Argentina": str_format_number function.
<br>
<br>Just added handling of $String shorter then $Format by adding a side to start the fill and a string length to the while loop.
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">str_format_number</span><span class="keyword">(</span><span class="default">$String</span><span class="keyword">, </span><span class="default">$Format</span><span class="keyword">, </span><span class="default">$Start </span><span class="keyword">= </span><span class="string">'left'</span><span class="keyword">){
<br>&nbsp; &nbsp; </span><span class="comment">//If we want to fill from right to left incase string is shorter then format
<br>&nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">$Start </span><span class="keyword">== </span><span class="string">'right'</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$String </span><span class="keyword">= </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">$String</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$Format </span><span class="keyword">= </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">$Format</span><span class="keyword">); 
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; if(</span><span class="default">$Format </span><span class="keyword">== </span><span class="string">''</span><span class="keyword">) return </span><span class="default">$String</span><span class="keyword">;
<br>&nbsp; &nbsp; if(</span><span class="default">$String </span><span class="keyword">== </span><span class="string">''</span><span class="keyword">) return </span><span class="default">$String</span><span class="keyword">;&nbsp; &nbsp; 
<br>&nbsp; &nbsp; </span><span class="default">$Result </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;
<br>&nbsp; &nbsp; </span><span class="default">$FormatPos </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br>&nbsp; &nbsp; </span><span class="default">$StringPos </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br>&nbsp; &nbsp; while ((</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$Format</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">) &gt;= </span><span class="default">$FormatPos </span><span class="keyword">&amp;&amp; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$String</span><span class="keyword">) &gt; </span><span class="default">$StringPos</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//If its a number =&gt; stores it
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$Format</span><span class="keyword">, </span><span class="default">$FormatPos</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">))) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$Result </span><span class="keyword">.= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$String</span><span class="keyword">, </span><span class="default">$StringPos</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$StringPos</span><span class="keyword">++;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//If it is not a number =&gt; stores the caracter
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">} else {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$Result </span><span class="keyword">.= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$Format</span><span class="keyword">, </span><span class="default">$FormatPos</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//Next caracter at the mask.
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$FormatPos</span><span class="keyword">++;
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; if (</span><span class="default">$Start </span><span class="keyword">== </span><span class="string">'right'</span><span class="keyword">) </span><span class="default">$Result </span><span class="keyword">= </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">$Result</span><span class="keyword">);
<br>&nbsp; &nbsp; return </span><span class="default">$Result</span><span class="keyword">;
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="51144">  
  <a class="name">
  <strong class="user"><em>woutermb at gmail dot com</em></strong></a><div class="date" title="2005-03-21 11:19"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom51144">
<div class="phpcode"><code><span class="html">
Well this is a script I wrote, what it does is chop up long words with malicious meaning into several parts. This way, a chat in a table will not get stretched anymore.<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">function </span><span class="default">text</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$limit</span><span class="keyword">=</span><span class="default">20</span><span class="keyword">,</span><span class="default">$chop</span><span class="keyword">=</span><span class="default">10</span><span class="keyword">){<br><br></span><span class="default">$text </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">" "</span><span class="keyword">,</span><span class="default">$string</span><span class="keyword">);<br>while(list(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">) = </span><span class="default">each</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">)){<br>&nbsp; &nbsp; </span><span class="default">$length </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);<br>&nbsp; &nbsp; if(</span><span class="default">$length </span><span class="keyword">&gt;=</span><span class="default">20</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;=</span><span class="default">$length</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">+=</span><span class="default">10</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$new </span><span class="keyword">.= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$new </span><span class="keyword">.= </span><span class="string">" "</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$post </span><span class="keyword">.= </span><span class="default">$new</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; elseif(</span><span class="default">$length </span><span class="keyword">&lt;=</span><span class="default">15</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$post </span><span class="keyword">.= </span><span class="default">$value</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="default">$post </span><span class="keyword">.= </span><span class="string">" "</span><span class="keyword">;<br>}<br>return(</span><span class="default">$post</span><span class="keyword">);<br>}<br><br></span><span class="comment">// for example, this would return:<br></span><span class="default">$output </span><span class="keyword">= </span><span class="default">text</span><span class="keyword">(</span><span class="string">"Well this text doesn't get cut up, yet thisssssssssssssssssssssssss one does."</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">);<br><br>echo(</span><span class="default">$output</span><span class="keyword">); </span><span class="comment">// "Well this text doesn't get cup up, yet thiss sssss sssss sssss sssss sss one does."<br></span><span class="default">?&gt;<br></span><br>I hope it was useful.. :)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="104805">  
  <a class="name">
  <strong class="user"><em>leon weidauer</em></strong></a><div class="date" title="2011-07-08 01:07"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom104805">
<div class="phpcode"><code><span class="html">
When using a value of a wrong type as second parameter , substr() does not return FALSE but NULL although the docs say, it should return FALSE on error.<br><br>Prior to PHP 5.3, substr() tries to cast the second parameter to int and doesn't throw any errors. Since PHP 5.3 a warning is thrown.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="89762">  
  <a class="name">
  <strong class="user"><em>link</em></strong></a><div class="date" title="2009-03-21 05:52"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom89762">
<div class="phpcode"><code><span class="html">
And as always there is bound to be a bug:<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">strlen_entities</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="default">preg_match_all</span><span class="keyword">(<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'/((?:&amp;(?:#[0-9]{2,}|[a-z]{2,});)|(?:[^&amp;])|'</span><span class="keyword">.&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'(?:&amp;(?!\w;)))s'</span><span class="keyword">,</span><span class="default">$text</span><span class="keyword">,</span><span class="default">$textarray</span><span class="keyword">);<br>&nbsp; &nbsp; return </span><span class="default">count</span><span class="keyword">(</span><span class="default">$textarray</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);<br>} <br>function </span><span class="default">substr_entities</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">,</span><span class="default">$start</span><span class="keyword">,</span><span class="default">$limit</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="default">$return </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">preg_match_all</span><span class="keyword">(<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'/((?:&amp;(?:#[0-9]{2,}|[a-z]{2,});)|(?:[^&amp;])|'</span><span class="keyword">.&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'(?:&amp;(?!\w;)))s'</span><span class="keyword">,</span><span class="default">$text</span><span class="keyword">,</span><span class="default">$textarray</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$textarray </span><span class="keyword">= </span><span class="default">$textarray</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br>&nbsp; &nbsp; </span><span class="default">$numchars </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$textarray</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; if (</span><span class="default">$start</span><span class="keyword">&gt;=</span><span class="default">$numchars</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; if (</span><span class="default">$start</span><span class="keyword">&lt;</span><span class="default">0</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$start </span><span class="keyword">= (</span><span class="default">$numchars</span><span class="keyword">)+</span><span class="default">$start</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; if (</span><span class="default">$start</span><span class="keyword">&gt;=</span><span class="default">0</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$limit</span><span class="keyword">==</span><span class="default">0</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$end</span><span class="keyword">=</span><span class="default">$numchars</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; elseif (</span><span class="default">$limit</span><span class="keyword">&gt;</span><span class="default">0</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$end </span><span class="keyword">= </span><span class="default">$start</span><span class="keyword">+(</span><span class="default">$limit</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; else<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$end </span><span class="keyword">= (</span><span class="default">$numchars</span><span class="keyword">)+</span><span class="default">$limit</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">$start</span><span class="keyword">;(</span><span class="default">$i</span><span class="keyword">&lt;=</span><span class="default">$end </span><span class="keyword">&amp;&amp; isset(</span><span class="default">$textarray</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]));</span><span class="default">$i</span><span class="keyword">++)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$return </span><span class="keyword">.= </span><span class="default">$textarray</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$return</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="81491">  
  <a class="name">
  <strong class="user"><em>kriskra at gmail dot com</em></strong></a><div class="date" title="2008-02-29 05:21"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom81491">
<div class="phpcode"><code><span class="html">
The javascript charAt equivalent in php of felipe has a little bug. It's necessary to compare the type (implicit) aswell or the function returns a wrong result:<br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">charAt</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">$pos</span><span class="keyword">) {<br>&nbsp; &nbsp; return (</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">$pos</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">) ? </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">$pos</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">) : -</span><span class="default">1</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="55107">  
  <a class="name">
  <strong class="user"><em>frank at jkelloggs dot dk</em></strong></a><div class="date" title="2005-07-25 02:37"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom55107">
<div class="phpcode"><code><span class="html">
Regarding the utf8_substr function from lmak: The pattern '/./u' doesn't match newline characters. This means that the substring from 0 to the total length of the string will miss the number of characters in the end matching the number of newlines in the string. To fix this one can add the s modifier (PCRE_DOTALL) in the pattern:<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">utf8_substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">$start</span><span class="keyword">)<br>{<br>&nbsp;&nbsp; </span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="string">"/./su"</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">, </span><span class="default">$ar</span><span class="keyword">);<br><br>&nbsp;&nbsp; if(</span><span class="default">func_num_args</span><span class="keyword">() &gt;= </span><span class="default">3</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$end </span><span class="keyword">= </span><span class="default">func_get_arg</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">join</span><span class="keyword">(</span><span class="string">""</span><span class="keyword">,</span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$ar</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">],</span><span class="default">$start</span><span class="keyword">,</span><span class="default">$end</span><span class="keyword">));<br>&nbsp;&nbsp; } else {<br>&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">join</span><span class="keyword">(</span><span class="string">""</span><span class="keyword">,</span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$ar</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">],</span><span class="default">$start</span><span class="keyword">));<br>&nbsp;&nbsp; }<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="115142">  
  <a class="name">
  <strong class="user"><em>Nadeem</em></strong></a><div class="date" title="2014-06-03 08:16"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom115142">
<div class="phpcode"><code><span class="html">
Truncate a float number. Similar to the Excel trunc function.<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">truncate_number</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">,</span><span class="default">$decimals</span><span class="keyword">=</span><span class="default">2</span><span class="keyword">){<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$number</span><span class="keyword">=array();<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$number</span><span class="keyword">=</span><span class="default">explode</span><span class="keyword">(</span><span class="string">"."</span><span class="keyword">,</span><span class="default">$val</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$result</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$number</span><span class="keyword">)&gt;</span><span class="default">1</span><span class="keyword">){<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">$number</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] . </span><span class="string">"." </span><span class="keyword">. </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$number</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">],</span><span class="default">0</span><span class="keyword">,</span><span class="default">$decimals</span><span class="keyword">);&nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">$val</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; }&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br><br>&nbsp; &nbsp; &nbsp; &nbsp; unset(</span><span class="default">$number</span><span class="keyword">);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$result</span><span class="keyword">;&nbsp; &nbsp; <br>}<br><br>echo </span><span class="default">truncate_number</span><span class="keyword">(</span><span class="default">99.123456</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">); </span><span class="comment">//result = 99.12<br></span><span class="keyword">echo </span><span class="default">truncate_number</span><span class="keyword">(</span><span class="default">99.123456</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">); </span><span class="comment">//result = 99.12345<br></span><span class="keyword">echo </span><span class="default">truncate_number</span><span class="keyword">(</span><span class="default">99.123456</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">); </span><span class="comment">//result = 99.1<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->

  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from www.php.net/manual/en/function.substr.php by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 11 Sep 2021 06:40:33 GMT -->

</body></html>