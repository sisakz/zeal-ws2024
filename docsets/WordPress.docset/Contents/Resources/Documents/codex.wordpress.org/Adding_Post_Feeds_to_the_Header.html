<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">


<!-- Mirrored from codex.wordpress.org/Adding_Post_Feeds_to_the_Header by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 31 Aug 2021 17:06:18 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'../www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-P24PF4B');</script>
<!--
<meta property="fb:page_id" content="6427302910" />
-->
<link rel="dns-prefetch" href="http://s.w.org/" />
<link rel="dns-prefetch" href="../fonts.googleapis.com/index.html" />
<link rel="dns-prefetch" href="http://fonts.gstatic.com/" />
<link rel="dns-prefetch" href="http://www.googletagmanager.com/" />
<meta name="google-site-verification" content="7VWES_-rcHBcmaQis9mSYamPfNwE03f4vyTj4pfuAw0" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Adding Post Feeds to the Header</title>
<link rel="canonical" href="Adding_Post_Feeds_to_the_Header.html" />

<link rel="stylesheet" href="../s.w.org/style/codex-wp4.css?3" />
<meta name="referrer" content="always">

			<link href="../s.w.org/wp-includes/css/dashicons.min.css?20181204" rel="stylesheet" type="text/css" />
		<link href='../fonts.googleapis.com/css.css?family=Open+Sans:300italic,400italic,600italic,400,300,600&amp;subset=latin,cyrillic-ext,greek-ext,greek,vietnamese,latin-ext,cyrillic' rel='stylesheet' type='text/css'>

		<link rel="stylesheet" href="../s.w.org/style/wp4-2.css?92" />

<link rel="shortcut icon" href="../s.w.org/favicon.ico?2" type="image/x-icon" />
<script type="text/javascript" src="../s.w.org/wp-includes/js/jquery/jquery.js?v=1.11.1"></script>
<script>document.cookie='devicePixelRatio='+((window.devicePixelRatio === undefined) ? 1 : window.devicePixelRatio)+'; path=/';</script>
<!--[if IE]>
    <script type="text/javascript" src="/skins/common/IEFixes.js"></script>
    <meta http-equiv="imagetoolbar" content="no" />
<![endif]-->

<script type="text/javascript">wgBreakFrames=false;wgContentLanguage='en';</script>


</head>


<body id="wordpress-org" class="wporg-responsive wporg-codex">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-P24PF4B" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<div id="wporg-header">
	<div class="wrapper">
	<h1><a href="http://wordpress.org/">WordPress.org</a></h1>				<div id="head-search">
		<form action="http://wordpress.org/search/do-search.php" method="get">
			<label for="global-search" class="screen-reader-text">Search WordPress.org for:</label>
			<input id="global-search" class="text" name="search" type="text" value="" maxlength="150" placeholder="Search WordPress.org" />
			<button type="submit" class="button"><span class="screen-reader-text">Submit</span></button>
		</form>
		</div>
				<div style="clear:both"></div>
		<button id="mobile-menu-button" aria-expanded="false"><span class="screen-reader-text">Toggle Menu</span></button>
		
<nav aria-label="Main Menu">
<ul id="wporg-header-menu">
<li class="menu-item"><a href='http://wordpress.org/showcase/' data-title='See some of the sites built on WordPress.'>Showcase</a></li>
<li class="menu-item"><a href='http://learn.wordpress.org/' data-title='Resources to help you learn more about WordPress and teach it to others.'>Learn</a></li>
<li class="menu-item"><a href='http://wordpress.org/themes/' data-title='Find just the right look for your website.'>Themes</a></li>
<li class="menu-item"><a href='http://wordpress.org/plugins/' data-title='Plugins can extend WordPress to do almost anything you can imagine.'>Plugins</a></li>
<li class="menu-item"><a href='http://wordpress.org/mobile/' data-title='Take your website on the go!'>Mobile</a></li>
<li class="menu-item"><a href='http://wordpress.org/support/' data-title='Forums, documentation, help.' aria-current="true" class="current">Support</a><ul class="nav-submenu"><li><a href='http://wordpress.org/support/' title='Documentation, tutorials, best practices.'>Documentation</a></li><li><a href='http://wordpress.org/support/forums/' title='Support and discussion forums.'>Forums</a></li></ul><div class="uparrow"></div></li>
<li class="menu-item"><a href='http://make.wordpress.org/' data-title='Contribute your knowledge.'>Get Involved</a><ul class="nav-submenu"><li><a href='http://wordpress.org/five-for-the-future/' title='How five percent is powering the next generation of the web'>Five for the Future</a></li></ul><div class="uparrow"></div></li>
<li class="menu-item"><a href='http://wordpress.org/about/' data-title='About the WordPress Organization, and where we&#039;re going.'>About</a></li>
<li class="menu-item"><a href='http://wordpress.org/news/' data-title='Come here for the latest scoop.'>Blog</a></li>
<li class="menu-item"><a href='http://wordpress.org/hosting/' data-title='Find a home for your blog.'>Hosting</a></li>
<li id="download" class="button download-button menu-item"><a href='http://wordpress.org/download/' data-title='Get it. Got it? Good.'>Get WordPress</a></li>
</ul>
</nav>
		<div style="clear:both"></div>
	</div>
</div>



<div id="headline">
	<div class="wrapper">
		<h2><a href="index.html">Codex</a></h2>
		
		<div class="portlet" id="p-personal">
		  <p class="login">Codex tools:
		     <a href="https://codex.wordpress.org/index.php?title=Special:UserLogin&amp;returnto=Adding+Post+Feeds+to+the+Header">Log in</a> 		  </p>
		</div>
	</div>
</div>

<div id="pagebody">
	<div class="wrapper">	
		<div class="col-10" id="bodyContent">
			<div id="siteNotice"><div id="localNotice" lang="en" dir="ltr"><div style="clear:both; background-color:#e5f5fa; border-left:4px solid #00a0d2; padding:10px 12px 8px; margin:0.5em auto 1.5em auto;"><span class="dashicons dashicons-info" style="color:#00a0d2"></span> Interested in functions, hooks, classes, or methods? Check out the new <a rel="nofollow" class="external text" href="../developer.wordpress.org/reference/index.html">WordPress Code Reference</a>!</div>
</div></div>			<h2 class="pagetitle">Adding Post Feeds to the Header</h2>
									<!-- start content -->
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p>As of <a href="https://wordpress.org/support/wordpress-version/version-3-0/" title="Version 3.0">Version 3.0</a>, you can enable post and comment RSS feed links with:
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php&#160;add_theme_support</span><span style="color: #007700">(&#160;</span><span style="color: #DD0000">'automatic-feed-links'&#160;</span><span style="color: #007700">);&#160;</span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
See more at <a href="../developer.wordpress.org/reference/functions/add_theme_support/index.html#Feed_Links" title="Function Reference/add theme support">Function_Reference/add_theme_support#Feed_Links</a>.
</p>
<div style="background-color:#FFFFFF; border:1px solid #FFFFFF; color:#000000; padding:7px; margin:0.5em auto 0.5em auto; vertical-align:middle; overflow:hidden;"><span style="float:left; margin:4px"><div class="floatleft"><a href="File_wp-alert.png" class="image"><img alt="wp-alert.png" src="images/9/9c/wp-alert.png" width="58" height="69" /></a></div></span><b>This article, written to accord with WordPress pre 3.0, is now obsolete. Please take caution when following its contents, as many things may have changed.</b></div>
<p>WordPress generates a unique RSS feed for each post on your blog, which can by default be accessed in the post metadata section below the post itself. However, in order to make the most of your feed you need a <a rel="nofollow" class="external text" href="http://www.w3.org/TR/REC-html40/struct/links.html#h-12.3"><tt>link</tt></a> element pointing to it, telling browsers, bots, and whatever and whoever else might be accessing your page that this is a feed, not just any old XML file.
</p><p>Unfortunately WordPress doesn't provide a dedicated option for doing this yet, so we're going to have to make one ourselves. This tutorial will provide code you can add to your header, and explain how the different parts work. <b>If you aren't interested in what's going on and just want the solution, skip down to the <a href="#The_final_code">The final code</a> section!</b>
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#The_problem"><span class="tocnumber">1</span> <span class="toctext">The problem</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Link_elements"><span class="tocnumber">2</span> <span class="toctext">Link elements</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#The_variables"><span class="tocnumber">3</span> <span class="toctext">The variables</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#The_Loop"><span class="tocnumber">4</span> <span class="toctext">The Loop</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Conditional_Tags_.28.27if_statements.27.29"><span class="tocnumber">5</span> <span class="toctext">Conditional Tags ('if statements')</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#The_final_code"><span class="tocnumber">6</span> <span class="toctext">The final code</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="The_problem">The problem</span></h2>
<p>We must create a <tt>Link</tt> element in our header that points readers to our feed. It must change to reflect the page being viewed, and must not be generated if the page is not a post. To hook into the post system we must make use of <a href="The_Loop.html" title="The Loop">The Loop</a> to get the relevant data from the database.
</p><p>The logical solution to the problem would be to examine the post metadata code and copy over the command it uses to generate its link. Unfortunately, the output of <tt>comments_rss_link()</tt> is an HTML 'anchor' link (<tt>a href</tt>), which isn't what we want at all. It is designed for linking page elements, but we want to add information that isn't tied to any particular part of the page.
</p>
<h2><span class="mw-headline" id="Link_elements">Link elements</span></h2>
<p>A <tt>Link</tt> element is included in a page header, and links to some form of off-page resource. Have a look at your existing header for some examples. For RSS feeds, they take the following basic format:
</p><p><tt>&lt;link rel="alternate" type="application/rss+xml" title="Feed Title" href="Feed Location" /&gt;</tt>
</p><p>The <tt>rel</tt> element tells the reader what this link is providing. There are many values accepted by <tt>rel</tt>: ours, <tt>alternate</tt>, indicates that the <tt>link</tt> points to an alternative form of the current page, its feed. We might also use alternate to signify a version of the page in a different language, or many other things. The type of alternate page being provided is of course defined in <tt>type</tt>, which should be self explanatory. Next is the title, which performs the same function as <tt>title</tt> elsewhere on the web; displaying a friendly name instead of the resource's location. Finally, <tt>href</tt> is the location of the <tt>link</tt>'s target on the internet, its URL. We then close the tag.
</p>
<h2><span class="mw-headline" id="The_variables">The variables</span></h2>
<p>We can't just paste the above XHTML code in of course, unless you only ever have one post on your entire blog. We must make the values reflect the page they are being placed on, and in PHP this is done through a system of substitution. We enter PHP code in and when the page is generated WordPress replaces it with the data we asked for.
</p><p>We will need to substitute three pieces of data:
</p>
<ul><li>The feed title</li>
<li>The location of the blog</li>
<li>The ID of the current post</li></ul>
<p>And to do this we need the following variables:
</p>
<ul><li><tt>the_title()</tt></li>
<li><tt>bloginfo('url')</tt></li>
<li><tt>the_ID()</tt></li></ul>
<p>We add the variables where we want their result to be inserted, and WordPress does the rest. It isn't quite that simple though, as we have to tell WordPress that we want the commands interpreted as such and not simply printed out as text. We do this by wrapping <tt>&lt;?php</tt> and <tt>?&gt;</tt> around the variables. We must also, with a few exceptions, add a semicolon after each line for programming reasons that I won't go into.
</p><p>Substituting those variables results in:
</p><p><tt>&lt;link rel="alternate" type="application/rss+xml" title="<b>&lt;?php the_title();&#160;?&gt;</b> Comments" href="<b>&lt;?php bloginfo('url');&#160;?&gt;</b>/?feed=rss2&amp;amp;p=<b>&lt;?php the_ID();&#160;?&gt;</b>" /&gt;</tt>
</p><p>Note that we have replaced the <tt>href</tt>'s '&amp;' with <tt>&amp;amp;</tt>. The ampersand is not a legal character in XHTML, and <tt>&amp;amp;</tt> is the 'encoded' version that has the same effect but does not cause browsers trouble.
</p>
<h2><span class="mw-headline" id="The_Loop">The Loop</span></h2>
<p>So we've got our link, and it has the key fields replaced with code that will fill them automatically. But we can't just use the variables anywhere. They must be within '<a href="The_Loop.html" title="The Loop">The Loop</a>'. Read more about The Loop at <a href="The_Loop.html" title="The Loop">this link</a>. If you've come back completely blasted - don't worry. It isn't nearly as complex as the article might make out.
</p><p>Ideally we would add our code to the existing Loop, the one that already provides our posts, comments, and whatnot. While that would work in some browsers, it is completely the wrong place for what we are trying to do. The default Loop is entirely within the body of the page, and <tt>link</tt> elements belong in the head. It would be very bad practice to add the code to the body, and cause all sorts of problems.
</p><p>So we need a new Loop. Fret not, it's easy.
</p><p><tt>&lt;?php while (have_posts())&#160;: the_post();&#160;?&gt;
</p><p>&lt;?php endwhile;&#160;?&gt;</tt>
</p><p>There you have it, a secondary Loop. Stick our code between those two lines and it will work just fine.
</p><p>There's only one problem. Because of the way The Loop works, if we leave it at that we will have the right feed in the document head, but the post displayed in the body of the page, the thing you actually read, will be the next one in the database. This won't do at all. Luckily the fix is once again simple:
</p><p><tt>&lt;?php rewind_posts();&#160;?&gt;</tt>
</p><p>Our loop is now complete.
</p>
<h2><span class="mw-headline" id="Conditional_Tags_.28.27if_statements.27.29">Conditional Tags ('if statements')</span></h2>
<p>We are almost done. We have our link element, we are substituting data in to it, and it is able to hook into the database without messing anything up. But if you add the code in its current state, it will be executed on every page on the blog, even when there isn't a post present. This probably won't do any harm per se, but it will be very confusing for users. We need to tell WordPress that we only want our <tt>link</tt> to be added under a certain circumstance: the page being a post. This is done with a 'Conditional Tag', or as a programmer might know it an 'if statement'.
</p><p><tt>&lt;?php if (is_single()) {&#160;?&gt;
</p><p>&lt;?php }&#160;?&gt;</tt>
</p><p>Anything between those two lines will only execute is <tt>is_single()</tt> is true; if the page is a post. Now we are all set!
</p>
<h2><span class="mw-headline" id="The_final_code">The final code</span></h2>
<p><tt>&lt;?php if (is_single()) {&#160;?&gt;
</p><p>&lt;?php while (have_posts())&#160;: the_post();&#160;?&gt;
</p><p>&lt;link rel="alternate" type="application/rss+xml" title="&lt;?php the_title();&#160;?&gt; Comments" href="&lt;?php bloginfo('url');&#160;?&gt;/?feed=rss2&amp;amp;p=&lt;?php the_ID();&#160;?&gt;" /&gt;
</p><p>&lt;?php endwhile;&#160;?&gt;
</p><p>&lt;?php rewind_posts();&#160;?&gt;
</p><p>&lt;?php }&#160;?&gt;</tt>
</p><p>Congratulations! Paste this code into <tt>header.php</tt> (preferably next to the existing site feed, for readability) and each post on your blog will properly notify browsers, bots and users of its RSS feed. Certainly better than an obscure little link in the metadata. For a quick demo, view a post in Firefox and you will get two options whenever you click the Live Bookmark icon in the Address Bar. If you don't, you've made a mistake somewhere and need to try again. Viewing your page source might make the error easier to find.
</p>
<!-- 
NewPP limit report
Cached time: 20210122110126
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.012 seconds
Real time usage: 0.017 seconds
Preprocessor visited node count: 52/1000000
Preprocessor generated node count: 142/1000000
Postâ€expand include size: 823/2097152 bytes
Template argument size: 259/2097152 bytes
Highest expansion depth: 4/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    3.328      1 - -total
100.00%    3.328      1 - Template:Oldpage
 36.81%    1.225      1 - Template:Message
-->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="https://codex.wordpress.org/index.php?title=Adding_Post_Feeds_to_the_Header&amp;oldid=91313">https://codex.wordpress.org/index.php?title=Adding_Post_Feeds_to_the_Header&amp;oldid=91313</a>"</div>
				<div id="catlinks"><div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="https://codex.wordpress.org/Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="Category_Old_pages.html" title="Category:Old pages">Old pages</a></li><li><a href="Category_Advanced_Topics.html" title="Category:Advanced Topics">Advanced Topics</a></li><li><a href="Category_Design_and_Layout.html" title="Category:Design and Layout">Design and Layout</a></li><li><a href="Category_Feeds.html" title="Category:Feeds">Feeds</a></li></ul></div></div></div>			<!-- end content -->
		</div>
		<div class="col-2">
			
						
			<ul class="submenu">
				<li id="n-mainpage"><a href="Main_Page.html">Home Page</a></li>	
				<li><a href="WordPress_Lessons.html">WordPress Lessons</a></li>
				<li><a href="Getting_Started_with_WordPress.html">Getting Started</a></li>
				<li><a href="Working_with_WordPress.html">Working with WordPress</a></li>
				<li><a href="Blog_Design_and_Layout.html">Design and Layout</a></li>
				<li><a href="Advanced_Topics.html">Advanced Topics</a></li>
				<li><a href="Troubleshooting.html">Troubleshooting</a></li>
				<li><a href="Developer_Documentation.html">Developer Docs</a></li>
				<li><a href="About_WordPress.html">About WordPress</a></li>
			</ul>

			<h3>Codex Resources</h3>
			<ul class="submenu">
				<li id="n-portal"><a href="https://codex.wordpress.org/Codex:Community_Portal">Community portal</a></li>	      
				<li id="n-currentevents"><a href="Current_events.html">Current events</a></li>	      
				<li id="n-recentchanges"><a href="https://codex.wordpress.org/Special:RecentChanges">Recent changes</a></li>	      
				<li id="n-randompage"><a href="https://codex.wordpress.org/Special:Random">Random page</a></li>	      
				<li id="n-help"><a href="https://codex.wordpress.org/Help:Contents">Help</a></li>	
			</ul>
			
		</div>
	</div>
</div>


<div id="wporg-footer">
	<div class="wrapper">
		<ul>
			<li><a href="http://wordpress.org/about/" title="An introduction to the WordPress project">About</a></li>
			<li><a href="http://wordpress.org/news/" title="News and Updates">Blog</a></li>
			<li><a href="http://wordpress.org/hosting/" title="Recommended web hosting providers">Hosting</a></li>
			<li><a href="https://wordpressfoundation.org/donate/" title="Donate to the WordPress Foundation">Donate</a></li>
		</ul>

		<ul>
			<li><a href="http://wordpress.org/support/" title="Forums, documentation, and other resources">Support</a></li>
			<li><a href="../developer.wordpress.org/index.html" title="Resources for WordPress developers">Developers</a></li>
			<li><a href="http://make.wordpress.org/" title="Give back to WordPress through code, support, translation and more">Get Involved</a></li>
			<li><a href="http://learn.wordpress.org/" title="Workshops and training materials">Learn</a></li>
		</ul>

		<ul>
			<li><a href="http://wordpress.org/showcase/" title="Some of the best WordPress sites on the Web">Showcase</a></li>
			<li><a href="http://wordpress.org/plugins/" title="Add extra functionality to WordPress">Plugins</a></li>
			<li><a href="http://wordpress.org/themes/" title="Make your WordPress pretty">Themes</a></li>
		</ul>

		<ul>
			<li><a href="http://central.wordcamp.org/" title="Find a WordPress event near you">WordCamp</a></li>
			<li><a href="http://wordpress.tv/" title="Videos, tutorials, and WordCamp sessions">WordPress.TV</a></li>
			<li><a href="http://buddypress.org/" title="A set of plugins to transform your WordPress into a social network">BuddyPress</a></li>
			<li><a href="http://bbpress.org/" title="Fast, slick forums built on WordPress">bbPress</a></li>
		</ul>

		<ul>
			<li><a href="http://wordpress.com/?ref=wporg-footer" title="Hassle-free WordPress hosting">WordPress.com</a></li>
			<li><a href="http://ma.tt/" title="Co-founder of WordPress, an example of what WordPress can do">Matt</a></li>
			<li><a href="http://wordpress.org/about/privacy/" title="WordPress.org Privacy Policy">Privacy</a></li>
			<li><a href="https://publiccode.eu/" target="_blank">Public Code</a></li>
		</ul>

		<ul>
			<li><span class="dashicons dashicons-twitter"></span><a href="https://twitter.com/WordPress" title="Follow @WordPress on Twitter">@WordPress</a></li>
			<li><span class="dashicons dashicons-facebook"></span><a href="https://www.facebook.com/WordPress/" title="Like WordPress on Facebook">WordPress</a></li>
		</ul>
	</div>

		<p class="cip cip-image">Code is Poetry.</p>
</div>

<script src="../s.w.org/style/js/navigation.min.js?20190128"></script>

</body>
<!-- Cached 20210122110126 -->

<!-- Mirrored from codex.wordpress.org/Adding_Post_Feeds_to_the_Header by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 31 Aug 2021 17:06:18 GMT -->
</html>
